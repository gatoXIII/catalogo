import { c as create_ssr_component, a as validate_component, d as add_attribute, e as escape } from "../../../../chunks/ssr.js";
import { P as Plus } from "../../../../chunks/plus.js";
const css = {
  code: "@keyframes svelte-1b6tmen-slide-in{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}.animate-slide-in.svelte-1b6tmen{animation:svelte-1b6tmen-slide-in 0.3s ease-out}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<!-- src/routes/(admin)/marcas/+page.svelte -->\\r\\n<script>\\r\\n  import { onMount } from 'svelte';\\r\\n  import { Tag, Plus, Edit, Trash2, CheckCircle2, X, Package } from 'lucide-svelte';\\r\\n  import MarcaForm from '$lib/components/forms/MarcaForm.svelte';\\r\\n  \\r\\n  let marcas = [];\\r\\n  let loading = true;\\r\\n  let mostrarFormulario = false;\\r\\n  let marcaEditando = null;\\r\\n  let mensaje = { tipo: '', texto: '', visible: false };\\r\\n  \\r\\n  // Filtros\\r\\n  let searchTerm = '';\\r\\n  let filterActivo = '';\\r\\n  \\r\\n  onMount(async () => {\\r\\n    await cargarMarcas();\\r\\n  });\\r\\n  \\r\\n  async function cargarMarcas() {\\r\\n    loading = true;\\r\\n    try {\\r\\n      const response = await fetch('/api/marcas');\\r\\n      const result = await response.json();\\r\\n      if (result.success) {\\r\\n        marcas = result.data;\\r\\n      }\\r\\n    } catch (error) {\\r\\n      console.error('Error cargando marcas:', error);\\r\\n      mostrarMensaje('error', 'Error al cargar las marcas');\\r\\n    } finally {\\r\\n      loading = false;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  function abrirFormularioCrear() {\\r\\n    marcaEditando = null;\\r\\n    mostrarFormulario = true;\\r\\n  }\\r\\n  \\r\\n  function abrirFormularioEditar(marca) {\\r\\n    marcaEditando = marca;\\r\\n    mostrarFormulario = true;\\r\\n  }\\r\\n  \\r\\n  function cerrarFormulario() {\\r\\n    mostrarFormulario = false;\\r\\n    marcaEditando = null;\\r\\n  }\\r\\n  \\r\\n  async function handleSuccess() {\\r\\n    await cargarMarcas();\\r\\n    cerrarFormulario();\\r\\n    mostrarMensaje('success', marcaEditando ? 'Marca actualizada' : 'Marca creada');\\r\\n  }\\r\\n  \\r\\n  async function eliminarMarca(marca) {\\r\\n    if (!confirm(\`¿Eliminar \\"\${marca.nombre}\\"?\\\\n\\\\nSi hay productos usando esta marca, no se podrá eliminar.\`)) return;\\r\\n    \\r\\n    try {\\r\\n      const response = await fetch(\`/api/marcas?id=\${marca.id}\`, {\\r\\n        method: 'DELETE'\\r\\n      });\\r\\n      \\r\\n      const result = await response.json();\\r\\n      \\r\\n      if (!result.success) {\\r\\n        throw new Error(result.error);\\r\\n      }\\r\\n      \\r\\n      await cargarMarcas();\\r\\n      mostrarMensaje('success', 'Marca eliminada');\\r\\n      \\r\\n    } catch (error) {\\r\\n      mostrarMensaje('error', error.message);\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  function mostrarMensaje(tipo, texto) {\\r\\n    mensaje = { tipo, texto, visible: true };\\r\\n    setTimeout(() => { mensaje.visible = false; }, 5000);\\r\\n  }\\r\\n  \\r\\n  // Filtrar marcas\\r\\n  $: marcasFiltradas = marcas.filter(m => {\\r\\n    let matches = true;\\r\\n    \\r\\n    if (searchTerm) {\\r\\n      const term = searchTerm.toLowerCase();\\r\\n      matches = matches && (\\r\\n        m.nombre.toLowerCase().includes(term) ||\\r\\n        (m.descripcion || '').toLowerCase().includes(term)\\r\\n      );\\r\\n    }\\r\\n    \\r\\n    if (filterActivo !== '') {\\r\\n      matches = matches && m.activo === (filterActivo === 'true');\\r\\n    }\\r\\n    \\r\\n    return matches;\\r\\n  });\\r\\n<\/script>\\r\\n\\r\\n<svelte:head>\\r\\n  <title>Marcas | Dashboard</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\"max-w-7xl mx-auto space-y-6\\">\\r\\n  <!-- Mensaje -->\\r\\n  {#if mensaje.visible}\\r\\n    <div class=\\"fixed top-20 right-4 z-50 animate-slide-in\\">\\r\\n      <div class={\`rounded-lg shadow-lg p-4 flex items-center gap-3 \${\\r\\n        mensaje.tipo === 'success' ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'\\r\\n      }\`}>\\r\\n        {#if mensaje.tipo === 'success'}\\r\\n          <CheckCircle2 class=\\"w-5 h-5 text-green-600\\" />\\r\\n        {:else}\\r\\n          <X class=\\"w-5 h-5 text-red-600\\" />\\r\\n        {/if}\\r\\n        <span class={mensaje.tipo === 'success' ? 'text-green-700' : 'text-red-700'}>\\r\\n          {mensaje.texto}\\r\\n        </span>\\r\\n        <button on:click={() => mensaje.visible = false}>\\r\\n          <X class=\\"w-4 h-4\\" />\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  {/if}\\r\\n  \\r\\n  <!-- Header -->\\r\\n  <div class=\\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\\">\\r\\n    <div>\\r\\n      <h1 class=\\"text-2xl font-bold text-gray-800\\">Gestión de Marcas</h1>\\r\\n      <p class=\\"text-gray-600\\">Administra las marcas de productos</p>\\r\\n    </div>\\r\\n    {#if !mostrarFormulario}\\r\\n      <button on:click={abrirFormularioCrear} class=\\"btn-primary flex items-center gap-2\\">\\r\\n        <Plus class=\\"w-5 h-5\\" />\\r\\n        Nueva Marca\\r\\n      </button>\\r\\n    {/if}\\r\\n  </div>\\r\\n  \\r\\n  <!-- Formulario -->\\r\\n  {#if mostrarFormulario}\\r\\n    <div class=\\"bg-gray-50 rounded-xl p-6 border-2 border-primary-200\\">\\r\\n      <div class=\\"flex justify-between items-center mb-4\\">\\r\\n        <h2 class=\\"text-xl font-bold text-gray-800\\">\\r\\n          {marcaEditando ? 'Editar' : 'Crear'} Marca\\r\\n        </h2>\\r\\n        <button on:click={cerrarFormulario} class=\\"p-2 hover:bg-gray-200 rounded-lg\\">\\r\\n          <X class=\\"w-5 h-5\\" />\\r\\n        </button>\\r\\n      </div>\\r\\n      \\r\\n      <MarcaForm\\r\\n        marca={marcaEditando}\\r\\n        on:success={handleSuccess}\\r\\n        on:cancel={cerrarFormulario}\\r\\n      />\\r\\n    </div>\\r\\n  {:else}\\r\\n    <!-- Filtros y búsqueda -->\\r\\n    <div class=\\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\\">\\r\\n      <div class=\\"grid grid-cols-1 md:grid-cols-2 gap-4\\">\\r\\n        <!-- Búsqueda -->\\r\\n        <div>\\r\\n          <label for=\\"search\\" class=\\"block text-sm font-medium text-gray-700 mb-1\\">\\r\\n            Buscar\\r\\n          </label>\\r\\n          <div class=\\"relative\\">\\r\\n            <input\\r\\n              id=\\"search\\"\\r\\n              type=\\"text\\"\\r\\n              bind:value={searchTerm}\\r\\n              placeholder=\\"Nombre o descripción...\\"\\r\\n              class=\\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\\"\\r\\n            />\\r\\n            <svg class=\\"absolute left-3 top-2.5 w-5 h-5 text-gray-400\\" fill=\\"none\\" stroke=\\"currentColor\\" viewBox=\\"0 0 24 24\\">\\r\\n              <path stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" stroke-width=\\"2\\" d=\\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\\"/>\\r\\n            </svg>\\r\\n          </div>\\r\\n        </div>\\r\\n        \\r\\n        <!-- Estado -->\\r\\n        <div>\\r\\n          <label for=\\"estado\\" class=\\"block text-sm font-medium text-gray-700 mb-1\\">\\r\\n            Estado\\r\\n          </label>\\r\\n          <select\\r\\n            id=\\"estado\\"\\r\\n            bind:value={filterActivo}\\r\\n            class=\\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\\"\\r\\n          >\\r\\n            <option value=\\"\\">Todos</option>\\r\\n            <option value=\\"true\\">Activos</option>\\r\\n            <option value=\\"false\\">Inactivos</option>\\r\\n          </select>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\"mt-4 flex items-center justify-between\\">\\r\\n        <p class=\\"text-sm text-gray-600\\">\\r\\n          {marcasFiltradas.length} marca{marcasFiltradas.length !== 1 ? 's' : ''}\\r\\n        </p>\\r\\n        \\r\\n        {#if searchTerm || filterActivo}\\r\\n          <button\\r\\n            on:click={() => { searchTerm = ''; filterActivo = ''; }}\\r\\n            class=\\"text-sm text-indigo-600 hover:text-indigo-700 font-medium\\"\\r\\n          >\\r\\n            Limpiar filtros\\r\\n          </button>\\r\\n        {/if}\\r\\n      </div>\\r\\n    </div>\\r\\n    \\r\\n    <!-- Lista de marcas -->\\r\\n    <div class=\\"bg-white rounded-xl shadow-sm p-6\\">\\r\\n      {#if loading}\\r\\n        <div class=\\"text-center py-12\\">\\r\\n          <div class=\\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\\"></div>\\r\\n          <p class=\\"mt-4 text-gray-600\\">Cargando marcas...</p>\\r\\n        </div>\\r\\n      {:else if marcasFiltradas.length === 0}\\r\\n        <div class=\\"text-center py-12\\">\\r\\n          <Tag class=\\"w-16 h-16 text-gray-400 mx-auto mb-4\\" />\\r\\n          <h3 class=\\"text-lg font-semibold text-gray-700 mb-2\\">\\r\\n            {marcas.length === 0 ? 'No hay marcas' : 'No se encontraron marcas'}\\r\\n          </h3>\\r\\n          <p class=\\"text-gray-500 mb-6\\">\\r\\n            {marcas.length === 0 \\r\\n              ? 'Crea tu primera marca para asociarla a productos' \\r\\n              : 'No se encontraron marcas con los filtros aplicados'}\\r\\n          </p>\\r\\n          {#if marcas.length === 0}\\r\\n            <button on:click={abrirFormularioCrear} class=\\"btn-primary\\">\\r\\n              Crear primera marca\\r\\n            </button>\\r\\n          {/if}\\r\\n        </div>\\r\\n      {:else}\\r\\n        <div class=\\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\\">\\r\\n          {#each marcasFiltradas as marca}\\r\\n            <div class=\\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\\">\\r\\n              <div class=\\"flex items-start justify-between mb-3\\">\\r\\n                <div class=\\"flex items-center gap-3 flex-1 min-w-0\\">\\r\\n                  <!-- Logo -->\\r\\n                  <div class=\\"w-12 h-12 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden\\">\\r\\n                    {#if marca.logo_url}\\r\\n                      <img \\r\\n                        src={marca.logo_url} \\r\\n                        alt={marca.nombre}\\r\\n                        class=\\"w-full h-full object-cover\\"\\r\\n                        on:error={(e) => e.target.style.display = 'none'}\\r\\n                      />\\r\\n                    {:else}\\r\\n                      <div class=\\"w-full h-full flex items-center justify-center\\">\\r\\n                        <Package class=\\"w-6 h-6 text-gray-400\\" />\\r\\n                      </div>\\r\\n                    {/if}\\r\\n                  </div>\\r\\n                  \\r\\n                  <div class=\\"flex-1 min-w-0\\">\\r\\n                    <h3 class=\\"font-semibold text-gray-800 truncate\\">{marca.nombre}</h3>\\r\\n                    <span class={\`text-xs px-2 py-0.5 rounded-full inline-block mt-1 \${\\r\\n                      marca.activo ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\\r\\n                    }\`}>\\r\\n                      {marca.activo ? 'Activo' : 'Inactivo'}\\r\\n                    </span>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n              \\r\\n              {#if marca.descripcion}\\r\\n                <p class=\\"text-sm text-gray-600 mb-3 line-clamp-2\\">{marca.descripcion}</p>\\r\\n              {/if}\\r\\n              \\r\\n              <div class=\\"flex items-center justify-end gap-2 pt-3 border-t border-gray-100\\">\\r\\n                <button\\r\\n                  on:click={() => abrirFormularioEditar(marca)}\\r\\n                  class=\\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\\"\\r\\n                  title=\\"Editar\\"\\r\\n                >\\r\\n                  <Edit class=\\"w-4 h-4\\" />\\r\\n                </button>\\r\\n                <button\\r\\n                  on:click={() => eliminarMarca(marca)}\\r\\n                  class=\\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\\"\\r\\n                  title=\\"Eliminar\\"\\r\\n                >\\r\\n                  <Trash2 class=\\"w-4 h-4\\" />\\r\\n                </button>\\r\\n              </div>\\r\\n            </div>\\r\\n          {/each}\\r\\n        </div>\\r\\n      {/if}\\r\\n    </div>\\r\\n  {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n  @keyframes slide-in {\\r\\n    from {\\r\\n      transform: translateX(100%);\\r\\n      opacity: 0;\\r\\n    }\\r\\n    to {\\r\\n      transform: translateX(0);\\r\\n      opacity: 1;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  .animate-slide-in {\\r\\n    animation: slide-in 0.3s ease-out;\\r\\n  }\\r\\n</style>"],"names":[],"mappings":"AAgTE,WAAW,uBAAS,CAClB,IAAK,CACH,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,OAAO,CAAE,CACX,CACA,EAAG,CACD,SAAS,CAAE,WAAW,CAAC,CAAC,CACxB,OAAO,CAAE,CACX,CACF,CAEA,gCAAkB,CAChB,SAAS,CAAE,uBAAQ,CAAC,IAAI,CAAC,QAC3B"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let marcasFiltradas;
  let marcas = [];
  let searchTerm = "";
  $$result.css.add(css);
  marcasFiltradas = marcas.filter((m) => {
    let matches = true;
    return matches;
  });
  return `  ${$$result.head += `<!-- HEAD_svelte-93bo1y_START -->${$$result.title = `<title>Marcas | Dashboard</title>`, ""}<!-- HEAD_svelte-93bo1y_END -->`, ""} <div class="max-w-7xl mx-auto space-y-6"> ${``}  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><div><h1 class="text-2xl font-bold text-gray-800" data-svelte-h="svelte-1p2cg0l">Gestión de Marcas</h1> <p class="text-gray-600" data-svelte-h="svelte-11i8uic">Administra las marcas de productos</p></div> ${`<button class="btn-primary flex items-center gap-2">${validate_component(Plus, "Plus").$$render($$result, { class: "w-5 h-5" }, {}, {})}
        Nueva Marca</button>`}</div>  ${` <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"> <div><label for="search" class="block text-sm font-medium text-gray-700 mb-1" data-svelte-h="svelte-a8utqf">Buscar</label> <div class="relative"><input id="search" type="text" placeholder="Nombre o descripción..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"${add_attribute("value", searchTerm, 0)}> <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div>  <div><label for="estado" class="block text-sm font-medium text-gray-700 mb-1" data-svelte-h="svelte-5e50if">Estado</label> <select id="estado" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"><option value="" data-svelte-h="svelte-uh9n4x">Todos</option><option value="true" data-svelte-h="svelte-1oyzk9x">Activos</option><option value="false" data-svelte-h="svelte-n79c89">Inactivos</option></select></div></div> <div class="mt-4 flex items-center justify-between"><p class="text-sm text-gray-600">${escape(marcasFiltradas.length)} marca${escape(marcasFiltradas.length !== 1 ? "s" : "")}</p> ${``}</div></div>  <div class="bg-white rounded-xl shadow-sm p-6">${`<div class="text-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"></div> <p class="mt-4 text-gray-600" data-svelte-h="svelte-1rvu9mz">Cargando marcas...</p></div>`}</div>`} </div>`;
});
export {
  Page as default
};
