import { c as create_ssr_component, a as validate_component } from "../../../../chunks/ssr.js";
import { S as Settings } from "../../../../chunks/settings.js";
const css = {
  code: "@keyframes svelte-1b6tmen-slide-in{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}.animate-slide-in.svelte-1b6tmen{animation:svelte-1b6tmen-slide-in 0.3s ease-out}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<!-- src/routes/(admin)/configuracion/+page.svelte -->\\r\\n<script>\\r\\n  import { onMount } from 'svelte';\\r\\n  import { Settings, Save, Loader2, CheckCircle2, Palette, Share2 } from 'lucide-svelte';\\r\\n  import ColorPalettePicker from '$lib/components/ui/ColorPalettePicker.svelte';\\r\\n  import SocialMediaLinks from '$lib/components/ui/SocialMediaLinks.svelte';\\r\\n  import { getPaletteById } from '$lib/data/colorPalettes';\\r\\n  \\r\\n  let configuracion = null;\\r\\n  let loading = true;\\r\\n  let guardando = false;\\r\\n  let mensaje = { tipo: '', texto: '', visible: false };\\r\\n  \\r\\n  let formData = {\\r\\n    nombre_empresa: '',\\r\\n    whatsapp_numero: '',\\r\\n    email: '',\\r\\n    direccion: '',\\r\\n    horario_atencion: '',\\r\\n    moneda_simbolo: '$',\\r\\n    impuesto_porcentaje: 18,\\r\\n    descripcion_empresa: '',\\r\\n    colores_tema: null,\\r\\n    redes_sociales: null\\r\\n  };\\r\\n  \\r\\n  // Estado de la paleta seleccionada\\r\\n  let paletaSeleccionada = 'blue-default';\\r\\n  \\r\\n  // Estado de redes sociales\\r\\n  let redesSociales = {\\r\\n    facebook: '',\\r\\n    instagram: '',\\r\\n    tiktok: '',\\r\\n    whatsapp: ''\\r\\n  };\\r\\n  \\r\\n  onMount(async () => {\\r\\n    await cargarConfiguracion();\\r\\n  });\\r\\n  \\r\\n  async function cargarConfiguracion() {\\r\\n    loading = true;\\r\\n    try {\\r\\n      const response = await fetch('/api/configuracion');\\r\\n      const result = await response.json();\\r\\n      \\r\\n      if (result.success) {\\r\\n        configuracion = result.data;\\r\\n        formData = {\\r\\n          nombre_empresa: result.data.nombre_empresa || '',\\r\\n          whatsapp_numero: result.data.whatsapp_numero || '',\\r\\n          email: result.data.email || '',\\r\\n          direccion: result.data.direccion || '',\\r\\n          horario_atencion: result.data.horario_atencion || '',\\r\\n          moneda_simbolo: result.data.moneda_simbolo || '$',\\r\\n          impuesto_porcentaje: result.data.impuesto_porcentaje || 18,\\r\\n          descripcion_empresa: result.data.descripcion_empresa || '',\\r\\n          colores_tema: result.data.colores_tema || null,\\r\\n          redes_sociales: result.data.redes_sociales || null\\r\\n        };\\r\\n        \\r\\n        // Cargar paleta seleccionada\\r\\n        if (formData.colores_tema?.palette_id) {\\r\\n          paletaSeleccionada = formData.colores_tema.palette_id;\\r\\n        }\\r\\n        \\r\\n        // Cargar redes sociales\\r\\n        if (formData.redes_sociales) {\\r\\n          redesSociales = {\\r\\n            facebook: formData.redes_sociales.facebook || '',\\r\\n            instagram: formData.redes_sociales.instagram || '',\\r\\n            tiktok: formData.redes_sociales.tiktok || '',\\r\\n            whatsapp: formData.redes_sociales.whatsapp || ''\\r\\n          };\\r\\n        }\\r\\n      }\\r\\n    } catch (error) {\\r\\n      console.error('Error cargando configuraci√≥n:', error);\\r\\n    } finally {\\r\\n      loading = false;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  function handlePaletteChange(event) {\\r\\n    const { paletteId, palette } = event.detail;\\r\\n    paletaSeleccionada = paletteId;\\r\\n    \\r\\n    // Guardar informaci√≥n de la paleta\\r\\n    formData.colores_tema = {\\r\\n      palette_id: paletteId,\\r\\n      palette_name: palette.name,\\r\\n      colors: palette\\r\\n    };\\r\\n  }\\r\\n  \\r\\n  function handleSocialChange(event) {\\r\\n    redesSociales = event.detail;\\r\\n    formData.redes_sociales = redesSociales;\\r\\n  }\\r\\n  \\r\\n  async function guardarConfiguracion() {\\r\\n    guardando = true;\\r\\n    \\r\\n    try {\\r\\n      // Asegurar que colores_tema tenga la estructura correcta\\r\\n      if (paletaSeleccionada) {\\r\\n        const palette = getPaletteById(paletaSeleccionada);\\r\\n        formData.colores_tema = {\\r\\n          palette_id: paletaSeleccionada,\\r\\n          palette_name: palette.name,\\r\\n          colors: palette\\r\\n        };\\r\\n      }\\r\\n      \\r\\n      // Asegurar que redes_sociales est√© actualizado\\r\\n      formData.redes_sociales = redesSociales;\\r\\n      \\r\\n      const response = await fetch('/api/configuracion', {\\r\\n        method: 'PUT',\\r\\n        headers: { 'Content-Type': 'application/json' },\\r\\n        body: JSON.stringify(formData)\\r\\n      });\\r\\n      \\r\\n      const result = await response.json();\\r\\n      \\r\\n      if (!result.success) {\\r\\n        throw new Error(result.error || 'Error al guardar');\\r\\n      }\\r\\n      \\r\\n      configuracion = result.data;\\r\\n      mostrarMensaje('success', '‚úÖ Configuraci√≥n guardada correctamente. Recarga la p√°gina para ver los cambios de color.');\\r\\n      \\r\\n      // Recargar la p√°gina despu√©s de 2 segundos para aplicar los nuevos colores\\r\\n      setTimeout(() => {\\r\\n        window.location.reload();\\r\\n      }, 2000);\\r\\n      \\r\\n    } catch (error) {\\r\\n      console.error('Error guardando configuraci√≥n:', error);\\r\\n      mostrarMensaje('error', error.message);\\r\\n    } finally {\\r\\n      guardando = false;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  function mostrarMensaje(tipo, texto) {\\r\\n    mensaje = { tipo, texto, visible: true };\\r\\n    setTimeout(() => { mensaje.visible = false; }, 5000);\\r\\n  }\\r\\n  \\r\\n  function restablecer() {\\r\\n    if (configuracion && confirm('¬øDescartar los cambios?')) {\\r\\n      formData = {\\r\\n        nombre_empresa: configuracion.nombre_empresa || '',\\r\\n        whatsapp_numero: configuracion.whatsapp_numero || '',\\r\\n        email: configuracion.email || '',\\r\\n        direccion: configuracion.direccion || '',\\r\\n        horario_atencion: configuracion.horario_atencion || '',\\r\\n        moneda_simbolo: configuracion.moneda_simbolo || '$',\\r\\n        impuesto_porcentaje: configuracion.impuesto_porcentaje || 18,\\r\\n        descripcion_empresa: configuracion.descripcion_empresa || '',\\r\\n        colores_tema: configuracion.colores_tema || null,\\r\\n        redes_sociales: configuracion.redes_sociales || null\\r\\n      };\\r\\n      \\r\\n      if (configuracion.colores_tema?.palette_id) {\\r\\n        paletaSeleccionada = configuracion.colores_tema.palette_id;\\r\\n      }\\r\\n      \\r\\n      if (configuracion.redes_sociales) {\\r\\n        redesSociales = { ...configuracion.redes_sociales };\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n<\/script>\\r\\n\\r\\n<svelte:head>\\r\\n  <title>Configuraci√≥n | Dashboard</title>\\r\\n</svelte:head>\\r\\n\\r\\n<div class=\\"max-w-5xl mx-auto space-y-6\\">\\r\\n  <!-- Mensaje -->\\r\\n  {#if mensaje.visible}\\r\\n    <div class=\\"fixed top-20 right-4 z-50 animate-slide-in max-w-md\\">\\r\\n      <div class={\`rounded-lg shadow-lg p-4 flex items-start gap-3 \${\\r\\n        mensaje.tipo === 'success' ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'\\r\\n      }\`}>\\r\\n        {#if mensaje.tipo === 'success'}\\r\\n          <CheckCircle2 class=\\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\\" />\\r\\n        {:else}\\r\\n          <svg class=\\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\\" fill=\\"currentColor\\" viewBox=\\"0 0 20 20\\">\\r\\n            <path fill-rule=\\"evenodd\\" d=\\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\\" clip-rule=\\"evenodd\\"/>\\r\\n          </svg>\\r\\n        {/if}\\r\\n        <span class={mensaje.tipo === 'success' ? 'text-green-700' : 'text-red-700'}>\\r\\n          {mensaje.texto}\\r\\n        </span>\\r\\n      </div>\\r\\n    </div>\\r\\n  {/if}\\r\\n  \\r\\n  <!-- Header -->\\r\\n  <div>\\r\\n    <h1 class=\\"text-2xl font-bold text-gray-800 flex items-center gap-2\\">\\r\\n      <Settings class=\\"w-7 h-7\\" />\\r\\n      Configuraci√≥n de la Tienda\\r\\n    </h1>\\r\\n    <p class=\\"text-gray-600 mt-1\\">Personaliza la informaci√≥n y apariencia de tu negocio</p>\\r\\n  </div>\\r\\n  \\r\\n  {#if loading}\\r\\n    <div class=\\"bg-white rounded-xl shadow-sm p-12 text-center\\">\\r\\n      <div class=\\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\\"></div>\\r\\n      <p class=\\"text-gray-600\\">Cargando configuraci√≥n...</p>\\r\\n    </div>\\r\\n  {:else}\\r\\n    <form on:submit|preventDefault={guardarConfiguracion} class=\\"space-y-6\\">\\r\\n      \\r\\n      <!-- üé® SECCI√ìN: Personalizaci√≥n Visual -->\\r\\n      <div class=\\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500\\">\\r\\n        <div class=\\"flex items-center gap-2 mb-6\\">\\r\\n          <Palette class=\\"w-6 h-6 text-purple-600\\" />\\r\\n          <h2 class=\\"text-xl font-semibold text-gray-800\\">Personalizaci√≥n Visual</h2>\\r\\n        </div>\\r\\n        \\r\\n        <ColorPalettePicker \\r\\n          bind:selectedPaletteId={paletaSeleccionada}\\r\\n          disabled={guardando}\\r\\n          on:change={handlePaletteChange}\\r\\n        />\\r\\n      </div>\\r\\n      \\r\\n      <!-- üì± SECCI√ìN: Redes Sociales -->\\r\\n      <div class=\\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500\\">\\r\\n        <div class=\\"flex items-center gap-2 mb-6\\">\\r\\n          <Share2 class=\\"w-6 h-6 text-blue-600\\" />\\r\\n          <h2 class=\\"text-xl font-semibold text-gray-800\\">Redes Sociales</h2>\\r\\n        </div>\\r\\n        \\r\\n        <SocialMediaLinks \\r\\n          bind:socialLinks={redesSociales}\\r\\n          disabled={guardando}\\r\\n          on:change={handleSocialChange}\\r\\n        />\\r\\n      </div>\\r\\n      \\r\\n      <!-- üè¢ SECCI√ìN: Informaci√≥n del Negocio -->\\r\\n      <div class=\\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-primary-500\\">\\r\\n        <h2 class=\\"text-xl font-semibold text-gray-800 mb-6\\">Informaci√≥n del Negocio</h2>\\r\\n        \\r\\n        <div class=\\"grid grid-cols-1 md:grid-cols-2 gap-4\\">\\r\\n          <div class=\\"md:col-span-2\\">\\r\\n            <label class=\\"label\\">Nombre de la empresa</label>\\r\\n            <input\\r\\n              type=\\"text\\"\\r\\n              bind:value={formData.nombre_empresa}\\r\\n              placeholder=\\"Ej: las Salsas\\"\\r\\n              class=\\"input\\"\\r\\n              required\\r\\n            />\\r\\n          </div>\\r\\n          \\r\\n          <div>\\r\\n            <label class=\\"label\\">N√∫mero de WhatsApp</label>\\r\\n            <input\\r\\n              type=\\"tel\\"\\r\\n              bind:value={formData.whatsapp_numero}\\r\\n              placeholder=\\"7121920418\\"\\r\\n              class=\\"input\\"\\r\\n              required\\r\\n            />\\r\\n            <p class=\\"text-xs text-gray-500 mt-1\\">Sin espacios ni guiones</p>\\r\\n          </div>\\r\\n          \\r\\n          <div>\\r\\n            <label class=\\"label\\">Email</label>\\r\\n            <input\\r\\n              type=\\"email\\"\\r\\n              bind:value={formData.email}\\r\\n              placeholder=\\"info@ejemplo.com\\"\\r\\n              class=\\"input\\"\\r\\n            />\\r\\n          </div>\\r\\n          \\r\\n          <div class=\\"md:col-span-2\\">\\r\\n            <label class=\\"label\\">Direcci√≥n</label>\\r\\n            <input\\r\\n              type=\\"text\\"\\r\\n              bind:value={formData.direccion}\\r\\n              placeholder=\\"Calle Principal 123, Ciudad\\"\\r\\n              class=\\"input\\"\\r\\n            />\\r\\n          </div>\\r\\n          \\r\\n          <div class=\\"md:col-span-2\\">\\r\\n            <label class=\\"label\\">Horario de atenci√≥n</label>\\r\\n            <input\\r\\n              type=\\"text\\"\\r\\n              bind:value={formData.horario_atencion}\\r\\n              placeholder=\\"Lunes a Viernes: 9am - 6pm\\"\\r\\n              class=\\"input\\"\\r\\n            />\\r\\n          </div>\\r\\n          \\r\\n          <div class=\\"md:col-span-2\\">\\r\\n            <label class=\\"label\\">Descripci√≥n de la empresa</label>\\r\\n            <textarea\\r\\n              bind:value={formData.descripcion_empresa}\\r\\n              placeholder=\\"Breve descripci√≥n de tu negocio\\"\\r\\n              rows=\\"3\\"\\r\\n              class=\\"input resize-none\\"\\r\\n            ></textarea>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n      <!-- üí∞ SECCI√ìN: Configuraci√≥n Financiera -->\\r\\n      <div class=\\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500\\">\\r\\n        <h2 class=\\"text-xl font-semibold text-gray-800 mb-6\\">Configuraci√≥n Financiera</h2>\\r\\n        \\r\\n        <div class=\\"grid grid-cols-1 md:grid-cols-2 gap-4\\">\\r\\n          <div>\\r\\n            <label class=\\"label\\">S√≠mbolo de moneda</label>\\r\\n            <select bind:value={formData.moneda_simbolo} class=\\"input\\">\\r\\n              <option value=\\"$\\">$ (Peso/D√≥lar)</option>\\r\\n              <option value=\\"S/\\">S/ (Sol)</option>\\r\\n              <option value=\\"‚Ç¨\\">‚Ç¨ (Euro)</option>\\r\\n              <option value=\\"¬£\\">¬£ (Libra)</option>\\r\\n            </select>\\r\\n          </div>\\r\\n          \\r\\n          <div>\\r\\n            <label class=\\"label\\">Porcentaje de impuesto (%)</label>\\r\\n            <input\\r\\n              type=\\"number\\"\\r\\n              bind:value={formData.impuesto_porcentaje}\\r\\n              placeholder=\\"18\\"\\r\\n              min=\\"0\\"\\r\\n              max=\\"100\\"\\r\\n              step=\\"0.1\\"\\r\\n              class=\\"input\\"\\r\\n              required\\r\\n            />\\r\\n            <p class=\\"text-xs text-gray-500 mt-1\\">IVA o impuesto aplicable</p>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n      <!-- üëÅÔ∏è SECCI√ìN: Vista Previa -->\\r\\n      <div class=\\"bg-blue-50 border border-blue-200 rounded-xl p-6\\">\\r\\n        <h3 class=\\"font-semibold text-blue-800 mb-4 flex items-center gap-2\\">\\r\\n          <svg class=\\"w-5 h-5\\" fill=\\"none\\" stroke=\\"currentColor\\" viewBox=\\"0 0 24 24\\">\\r\\n            <path stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" stroke-width=\\"2\\" d=\\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\\"/>\\r\\n            <path stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\" stroke-width=\\"2\\" d=\\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\\"/>\\r\\n          </svg>\\r\\n          Vista Previa\\r\\n        </h3>\\r\\n        \\r\\n        <div class=\\"bg-white rounded-lg p-6 space-y-3 text-sm\\">\\r\\n          <div class=\\"flex items-start justify-between\\">\\r\\n            <div>\\r\\n              <p class=\\"font-bold text-lg text-gray-900\\">{formData.nombre_empresa || 'Nombre de empresa'}</p>\\r\\n              <p class=\\"text-gray-600 mt-1\\">{formData.descripcion_empresa || 'Descripci√≥n de la empresa'}</p>\\r\\n            </div>\\r\\n          </div>\\r\\n          \\r\\n          <div class=\\"grid grid-cols-1 md:grid-cols-2 gap-3 pt-3 border-t\\">\\r\\n            <div class=\\"flex items-center gap-2\\">\\r\\n              <span class=\\"text-gray-500\\">üìç</span>\\r\\n              <span class=\\"text-gray-700\\">{formData.direccion || 'Direcci√≥n'}</span>\\r\\n            </div>\\r\\n            <div class=\\"flex items-center gap-2\\">\\r\\n              <span class=\\"text-gray-500\\">üìû</span>\\r\\n              <span class=\\"text-gray-700\\">{formData.whatsapp_numero || 'WhatsApp'}</span>\\r\\n            </div>\\r\\n            <div class=\\"flex items-center gap-2\\">\\r\\n              <span class=\\"text-gray-500\\">üìß</span>\\r\\n              <span class=\\"text-gray-700\\">{formData.email || 'Email'}</span>\\r\\n            </div>\\r\\n            <div class=\\"flex items-center gap-2\\">\\r\\n              <span class=\\"text-gray-500\\">üïí</span>\\r\\n              <span class=\\"text-gray-700\\">{formData.horario_atencion || 'Horario'}</span>\\r\\n            </div>\\r\\n          </div>\\r\\n          \\r\\n          <div class=\\"pt-3 border-t\\">\\r\\n            <p class=\\"font-medium text-gray-900 mb-2\\">Ejemplo de precio:</p>\\r\\n            <div class=\\"space-y-1\\">\\r\\n              <p class=\\"text-gray-700\\">Producto: {formData.moneda_simbolo}100.00</p>\\r\\n              <p class=\\"text-sm text-gray-600\\">\\r\\n                + Impuesto ({formData.impuesto_porcentaje}%): {formData.moneda_simbolo}{(100 * formData.impuesto_porcentaje / 100).toFixed(2)}\\r\\n              </p>\\r\\n              <p class=\\"font-bold text-gray-900\\">\\r\\n                Total: {formData.moneda_simbolo}{(100 + (100 * formData.impuesto_porcentaje / 100)).toFixed(2)}\\r\\n              </p>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n      <!-- Botones de acci√≥n -->\\r\\n      <div class=\\"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-gray-200\\">\\r\\n        <button\\r\\n          type=\\"button\\"\\r\\n          on:click={restablecer}\\r\\n          class=\\"btn-secondary\\"\\r\\n          disabled={guardando}\\r\\n        >\\r\\n          Descartar cambios\\r\\n        </button>\\r\\n        \\r\\n        <button\\r\\n          type=\\"submit\\"\\r\\n          class=\\"btn-primary flex items-center justify-center gap-2\\"\\r\\n          disabled={guardando}\\r\\n        >\\r\\n          {#if guardando}\\r\\n            <Loader2 class=\\"w-5 h-5 animate-spin\\" />\\r\\n            Guardando...\\r\\n          {:else}\\r\\n            <Save class=\\"w-5 h-5\\" />\\r\\n            Guardar Configuraci√≥n\\r\\n          {/if}\\r\\n        </button>\\r\\n      </div>\\r\\n    </form>\\r\\n  {/if}\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n  @keyframes slide-in {\\r\\n    from {\\r\\n      transform: translateX(100%);\\r\\n      opacity: 0;\\r\\n    }\\r\\n    to {\\r\\n      transform: translateX(0);\\r\\n      opacity: 1;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  .animate-slide-in {\\r\\n    animation: slide-in 0.3s ease-out;\\r\\n  }\\r\\n</style>"],"names":[],"mappings":"AA+aE,WAAW,uBAAS,CAClB,IAAK,CACH,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,OAAO,CAAE,CACX,CACA,EAAG,CACD,SAAS,CAAE,WAAW,CAAC,CAAC,CACxB,OAAO,CAAE,CACX,CACF,CAEA,gCAAkB,CAChB,SAAS,CAAE,uBAAQ,CAAC,IAAI,CAAC,QAC3B"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css);
  let $$settled;
  let $$rendered;
  let previous_head = $$result.head;
  do {
    $$settled = true;
    $$result.head = previous_head;
    $$rendered = `  ${$$result.head += `<!-- HEAD_svelte-8nm3c8_START -->${$$result.title = `<title>Configuraci√≥n | Dashboard</title>`, ""}<!-- HEAD_svelte-8nm3c8_END -->`, ""} <div class="max-w-5xl mx-auto space-y-6"> ${``}  <div><h1 class="text-2xl font-bold text-gray-800 flex items-center gap-2">${validate_component(Settings, "Settings").$$render($$result, { class: "w-7 h-7" }, {}, {})}
      Configuraci√≥n de la Tienda</h1> <p class="text-gray-600 mt-1" data-svelte-h="svelte-udhj9m">Personaliza la informaci√≥n y apariencia de tu negocio</p></div> ${`<div class="bg-white rounded-xl shadow-sm p-12 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"></div> <p class="text-gray-600" data-svelte-h="svelte-ischnd">Cargando configuraci√≥n...</p></div>`} </div>`;
  } while (!$$settled);
  return $$rendered;
});
export {
  Page as default
};
