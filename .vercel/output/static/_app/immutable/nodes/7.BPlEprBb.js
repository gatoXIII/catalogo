import{S as ht,i as _t,s as pt,d as W,Y as Ft,Z as xt,a as gt,_ as at,n as Se,b as m,w as pe,O as rt,x as K,y as G,X as Pe,P as Ie,$ as st,a3 as $t,a0 as Be,a1 as Te,f as Q,g as u,z as ge,R as me,a4 as zt,G as f,h as p,j as v,k as w,m as j,l as le,I as ue,A as ve,o as b,p as L,t as oe,B as be,e as Ee,J as Ne,K as Re,F as it,H as qt,V as Gt,a8 as Fe,L as ct,Q as ut,T as Ht,M as Xt,W as ft}from"../chunks/VwrJ_jBZ.js";import{g as vt}from"../chunks/D0QH3NT1.js";import"../chunks/ClsFpFEz.js";import{I as bt}from"../chunks/CAqCW1Qx.js";import{X as je}from"../chunks/CLRgUYaD.js";import{L as kt}from"../chunks/v0fJu9_I.js";import{S as yt}from"../chunks/Dd2nhuDv.js";import{P as Et}from"../chunks/B2qUbE6W.js";import{C as wt}from"../chunks/jd2_iQiR.js";import{T as Ct,P as St}from"../chunks/Dh4o2pt7.js";import{S as It}from"../chunks/9uylGhct.js";import{T as Vt}from"../chunks/B4QJF5bk.js";const{Error:dt,console:Jt}=vt,J="C:/SERVER/SVELTE/tienda/src/lib/components/forms/MarcaForm.svelte";function ze(n){let e,t,a,r,o,s;const c={c:function(){e=b("div"),t=Re("svg"),a=Re("path"),r=L(),o=b("span"),s=oe(n[4]),this.h()},l:function(i){e=v(i,"DIV",{class:!0});var d=w(e);t=Ne(d,"svg",{class:!0,fill:!0,viewBox:!0});var _=w(t);a=Ne(_,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(a).forEach(m),_.forEach(m),r=j(d),o=v(d,"SPAN",{});var k=w(o);s=le(k,n[4]),k.forEach(m),d.forEach(m),this.h()},h:function(){f(a,"fill-rule","evenodd"),f(a,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),f(a,"clip-rule","evenodd"),p(a,J,111,8,2993),f(t,"class","w-5 h-5 mr-2 mt-0.5 flex-shrink-0"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 20 20"),p(t,J,110,6,2896),p(o,J,113,6,3282),f(e,"class","bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg flex items-start"),p(e,J,109,4,2792)},m:function(i,d){Q(i,e,d),u(e,t),u(t,a),u(e,r),u(e,o),u(o,s)},p:function(i,d){d&16&&Ee(s,i[4])},d:function(i){i&&m(e)}};return W("SvelteRegisterBlock",{block:c,id:ze.name,type:"if",source:"(109:2) {#if error}",ctx:n}),c}function qe(n){let e,t,a,r,o,s;const c={c:function(){e=b("div"),t=Re("svg"),a=Re("path"),r=L(),o=b("span"),s=oe(n[5]),this.h()},l:function(i){e=v(i,"DIV",{class:!0});var d=w(e);t=Ne(d,"svg",{class:!0,fill:!0,viewBox:!0});var _=w(t);a=Ne(_,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(a).forEach(m),_.forEach(m),r=j(d),o=v(d,"SPAN",{});var k=w(o);s=le(k,n[5]),k.forEach(m),d.forEach(m),this.h()},h:function(){f(a,"fill-rule","evenodd"),f(a,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),f(a,"clip-rule","evenodd"),p(a,J,120,8,3555),f(t,"class","w-5 h-5 mr-2 mt-0.5 flex-shrink-0"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 20 20"),p(t,J,119,6,3458),p(o,J,122,6,3762),f(e,"class","bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-start"),p(e,J,118,4,3348)},m:function(i,d){Q(i,e,d),u(e,t),u(t,a),u(e,r),u(e,o),u(o,s)},p:function(i,d){d&32&&Ee(s,i[5])},d:function(i){i&&m(e)}};return W("SvelteRegisterBlock",{block:c,id:qe.name,type:"if",source:"(118:2) {#if success}",ctx:n}),c}function Ge(n){let e,t="El nombre es obligatorio";const a={c:function(){e=b("p"),e.textContent=t,this.h()},l:function(o){e=v(o,"P",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-arhcll"&&(e.textContent=t),this.h()},h:function(){f(e,"class","mt-1 text-sm text-red-600"),p(e,J,143,8,4405)},m:function(o,s){Q(o,e,s)},d:function(o){o&&m(e)}};return W("SvelteRegisterBlock",{block:a,id:Ge.name,type:"if",source:"(143:6) {#if !nombreValido && formData.nombre.length > 0}",ctx:n}),a}function Bt(n){let e,t,a=n[0]?"Actualizar Marca":"Crear Marca",r,o;e=new yt({props:{class:"w-5 h-5 mr-2"},$$inline:!0});const s={c:function(){be(e.$$.fragment),t=L(),r=oe(a)},l:function(l){ve(e.$$.fragment,l),t=j(l),r=le(l,a)},m:function(l,i){ge(e,l,i),Q(l,t,i),Q(l,r,i),o=!0},p:function(l,i){(!o||i&1)&&a!==(a=l[0]?"Actualizar Marca":"Crear Marca")&&Ee(r,a)},i:function(l){o||(G(e.$$.fragment,l),o=!0)},o:function(l){K(e.$$.fragment,l),o=!1},d:function(l){l&&(m(t),m(r)),pe(e,l)}};return W("SvelteRegisterBlock",{block:s,id:Bt.name,type:"else",source:"(210:6) {:else}",ctx:n}),s}function Tt(n){let e,t,a;e=new kt({props:{class:"w-5 h-5 animate-spin mr-2"},$$inline:!0});const r={c:function(){be(e.$$.fragment),t=oe(`\r
        Guardando...`)},l:function(s){ve(e.$$.fragment,s),t=le(s,`\r
        Guardando...`)},m:function(s,c){ge(e,s,c),Q(s,t,c),a=!0},p:Se,i:function(s){a||(G(e.$$.fragment,s),a=!0)},o:function(s){K(e.$$.fragment,s),a=!1},d:function(s){s&&m(t),pe(e,s)}};return W("SvelteRegisterBlock",{block:r,id:Tt.name,type:"if",source:"(207:6) {#if loading}",ctx:n}),r}function He(n){let e,t,a="âš ï¸ Completa el campo obligatorio:",r,o,s=!n[2]&&Xe(n);const c={c:function(){e=b("div"),t=b("p"),t.textContent=a,r=L(),o=b("ul"),s&&s.c(),this.h()},l:function(i){e=v(i,"DIV",{class:!0});var d=w(e);t=v(d,"P",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-qif6ei"&&(t.textContent=a),r=j(d),o=v(d,"UL",{class:!0});var _=w(o);s&&s.l(_),_.forEach(m),d.forEach(m),this.h()},h:function(){f(t,"class","text-sm text-amber-800 font-medium mb-2"),p(t,J,219,6,6555),f(o,"class","text-sm text-amber-700 space-y-1 ml-4"),p(o,J,222,6,6669),f(e,"class","bg-amber-50 border border-amber-200 rounded-lg p-4"),p(e,J,218,4,6483)},m:function(i,d){Q(i,e,d),u(e,t),u(e,r),u(e,o),s&&s.m(o,null)},p:function(i,d){i[2]?s&&(s.d(1),s=null):s||(s=Xe(i),s.c(),s.m(o,null))},d:function(i){i&&m(e),s&&s.d()}};return W("SvelteRegisterBlock",{block:c,id:He.name,type:"if",source:"(218:2) {#if !formularioValido}",ctx:n}),c}function Xe(n){let e,t="â€¢ Nombre de la marca";const a={c:function(){e=b("li"),e.textContent=t,this.h()},l:function(o){e=v(o,"LI",{"data-svelte-h":!0}),ue(e)!=="svelte-83c6ch"&&(e.textContent=t),this.h()},h:function(){p(e,J,224,10,6760)},m:function(o,s){Q(o,e,s)},d:function(o){o&&m(e)}};return W("SvelteRegisterBlock",{block:a,id:Xe.name,type:"if",source:"(224:8) {#if !nombreValido}",ctx:n}),a}function Je(n){let e,t,a,r,o,s,c,l,i="*",d,_,k,y,S,N,E,g,I,B,O="DescripciÃ³n",F,h,V,D,P,A,C,U,fe="Marca activa (visible en formularios)",ne,ae,z,he,de,re,x,$,q,_e,Y,ie,se,Ve,Z=n[4]&&ze(n),H=n[5]&&qe(n),R=!n[2]&&n[1].nombre.length>0&&Ge(n);function ee(ce){n[12](ce)}let we={label:"Logo de la Marca",disabled:n[3]};n[1].logo_url!==void 0&&(we.imageUrl=n[1].logo_url),N=new bt({props:we,$$inline:!0}),Ft.push(()=>xt(N,"imageUrl",ee)),N.$on("upload",n[9]),N.$on("remove",n[10]),he=new je({props:{class:"w-4 h-4 mr-2"},$$inline:!0});const De=[Tt,Bt],ke=[];function Le(ce,M){return ce[3]?0:1}$=Le(n),q=ke[$]=De[$](n);let te=!n[6]&&He(n);const Me={c:function(){e=b("form"),Z&&Z.c(),t=L(),H&&H.c(),a=L(),r=b("div"),o=b("div"),s=b("label"),c=oe("Nombre de la Marca "),l=b("span"),l.textContent=i,d=L(),_=b("input"),k=L(),R&&R.c(),y=L(),S=b("div"),be(N.$$.fragment),g=L(),I=b("div"),B=b("label"),B.textContent=O,F=L(),h=b("textarea"),V=L(),D=b("div"),P=b("label"),A=b("input"),C=L(),U=b("span"),U.textContent=fe,ne=L(),ae=b("div"),z=b("button"),be(he.$$.fragment),de=oe(`\r
      Cancelar`),re=L(),x=b("button"),q.c(),Y=L(),te&&te.c(),this.h()},l:function(M){e=v(M,"FORM",{class:!0});var X=w(e);Z&&Z.l(X),t=j(X),H&&H.l(X),a=j(X),r=v(X,"DIV",{class:!0});var ye=w(r);o=v(ye,"DIV",{class:!0});var Ce=w(o);s=v(Ce,"LABEL",{for:!0,class:!0});var xe=w(s);c=le(xe,"Nombre de la Marca "),l=v(xe,"SPAN",{class:!0,"data-svelte-h":!0}),ue(l)!=="svelte-1n3raya"&&(l.textContent=i),xe.forEach(m),d=j(Ce),_=v(Ce,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),k=j(Ce),R&&R.l(Ce),Ce.forEach(m),y=j(ye),S=v(ye,"DIV",{class:!0});var nt=w(S);ve(N.$$.fragment,nt),nt.forEach(m),g=j(ye),I=v(ye,"DIV",{class:!0});var Ae=w(I);B=v(Ae,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(B)!=="svelte-oos6ip"&&(B.textContent=O),F=j(Ae),h=v(Ae,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),w(h).forEach(m),Ae.forEach(m),V=j(ye),D=v(ye,"DIV",{class:!0});var lt=w(D);P=v(lt,"LABEL",{class:!0});var Oe=w(P);A=v(Oe,"INPUT",{type:!0,class:!0}),C=j(Oe),U=v(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),ue(U)!=="svelte-i0l29c"&&(U.textContent=fe),Oe.forEach(m),lt.forEach(m),ye.forEach(m),ne=j(X),ae=v(X,"DIV",{class:!0});var Ue=w(ae);z=v(Ue,"BUTTON",{type:!0,class:!0});var $e=w(z);ve(he.$$.fragment,$e),de=le($e,`\r
      Cancelar`),$e.forEach(m),re=j(Ue),x=v(Ue,"BUTTON",{type:!0,class:!0});var ot=w(x);q.l(ot),ot.forEach(m),Ue.forEach(m),Y=j(X),te&&te.l(X),X.forEach(m),this.h()},h:function(){f(l,"class","text-red-500"),p(l,J,130,27,3987),f(s,"for","nombre"),f(s,"class","label"),p(s,J,129,6,3924),f(_,"id","nombre"),f(_,"type","text"),_.disabled=n[3],f(_,"class","input"),f(_,"placeholder","Ej: Nike, Samsung, Apple..."),_.required=!0,st(_,"border-red-500",!n[2]&&n[1].nombre.length>0),p(_,J,132,6,4046),f(o,"class","md:col-span-2"),p(o,J,128,4,3889),f(S,"class","md:col-span-2"),p(S,J,148,4,4522),f(B,"for","descripcion"),f(B,"class","label"),p(B,J,160,6,4843),f(h,"id","descripcion"),h.disabled=n[3],f(h,"rows","4"),f(h,"class","input resize-none"),f(h,"placeholder","DescripciÃ³n de la marca, historia, caracterÃ­sticas..."),p(h,J,163,6,4927),f(I,"class","md:col-span-2"),p(I,J,159,4,4808),f(A,"type","checkbox"),A.disabled=n[3],f(A,"class","w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"),p(A,J,176,8,5316),f(U,"class","ml-2 text-sm text-gray-700 font-medium"),p(U,J,182,8,5534),f(P,"class","flex items-center cursor-pointer"),p(P,J,175,6,5258),f(D,"class","md:col-span-2"),p(D,J,174,4,5223),f(r,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),p(r,J,126,2,3811),f(z,"type","button"),z.disabled=n[3],f(z,"class","btn-secondary w-full sm:w-auto"),p(z,J,191,4,5816),f(x,"type","submit"),x.disabled=_e=!n[6]||n[3],f(x,"class","btn-primary w-full sm:flex-1 flex items-center justify-center"),p(x,J,201,4,6027),f(ae,"class","flex flex-col-reverse sm:flex-row gap-3 pt-6 border-t border-gray-200"),p(ae,J,190,2,5727),f(e,"class","space-y-6"),p(e,J,106,0,2671)},m:function(M,X){Q(M,e,X),Z&&Z.m(e,null),u(e,t),H&&H.m(e,null),u(e,a),u(e,r),u(r,o),u(o,s),u(s,c),u(s,l),u(o,d),u(o,_),Ie(_,n[1].nombre),u(o,k),R&&R.m(o,null),u(r,y),u(r,S),ge(N,S,null),u(r,g),u(r,I),u(I,B),u(I,F),u(I,h),Ie(h,n[1].descripcion),u(r,V),u(r,D),u(D,P),u(P,A),A.checked=n[1].activo,u(P,C),u(P,U),u(e,ne),u(e,ae),u(ae,z),ge(he,z,null),u(z,de),u(ae,re),u(ae,x),ke[$].m(x,null),u(e,Y),te&&te.m(e,null),ie=!0,se||(Ve=[me(_,"input",n[11]),me(h,"input",n[13]),me(A,"change",n[14]),me(z,"click",n[8],!1,!1,!1,!1),me(e,"submit",zt(n[7]),!1,!0,!1,!1)],se=!0)},p:function(M,[X]){M[4]?Z?Z.p(M,X):(Z=ze(M),Z.c(),Z.m(e,t)):Z&&(Z.d(1),Z=null),M[5]?H?H.p(M,X):(H=qe(M),H.c(),H.m(e,a)):H&&(H.d(1),H=null),(!ie||X&8)&&Pe(_,"disabled",M[3]),X&2&&_.value!==M[1].nombre&&Ie(_,M[1].nombre),(!ie||X&6)&&st(_,"border-red-500",!M[2]&&M[1].nombre.length>0),!M[2]&&M[1].nombre.length>0?R||(R=Ge(M),R.c(),R.m(o,null)):R&&(R.d(1),R=null);const ye={};X&8&&(ye.disabled=M[3]),!E&&X&2&&(E=!0,ye.imageUrl=M[1].logo_url,$t(()=>E=!1)),N.$set(ye),(!ie||X&8)&&Pe(h,"disabled",M[3]),X&2&&Ie(h,M[1].descripcion),(!ie||X&8)&&Pe(A,"disabled",M[3]),X&2&&(A.checked=M[1].activo),(!ie||X&8)&&Pe(z,"disabled",M[3]);let Ce=$;$=Le(M),$===Ce?ke[$].p(M,X):(Be(),K(ke[Ce],1,1,()=>{ke[Ce]=null}),Te(),q=ke[$],q?q.p(M,X):(q=ke[$]=De[$](M),q.c()),G(q,1),q.m(x,null)),(!ie||X&72&&_e!==(_e=!M[6]||M[3]))&&Pe(x,"disabled",_e),M[6]?te&&(te.d(1),te=null):te?te.p(M,X):(te=He(M),te.c(),te.m(e,null))},i:function(M){ie||(G(N.$$.fragment,M),G(he.$$.fragment,M),G(q),ie=!0)},o:function(M){K(N.$$.fragment,M),K(he.$$.fragment,M),K(q),ie=!1},d:function(M){M&&m(e),Z&&Z.d(),H&&H.d(),R&&R.d(),pe(N),pe(he),ke[$].d(),te&&te.d(),se=!1,rt(Ve)}};return W("SvelteRegisterBlock",{block:Me,id:Je.name,type:"component",source:"",ctx:n}),Me}function Kt(n,e,t){let a,r,{$$slots:o={},$$scope:s}=e;gt("MarcaForm",o,[]);const c=at();let{marca:l=null}=e,i=!1,d="",_="",k={nombre:(l==null?void 0:l.nombre)||"",descripcion:(l==null?void 0:l.descripcion)||"",logo_url:(l==null?void 0:l.logo_url)||"",activo:(l==null?void 0:l.activo)!==!1};async function y(){var h,V;if(!(!r||i)){t(4,d=""),t(5,_=""),t(3,i=!0);try{const D={nombre:k.nombre.trim(),descripcion:((h=k.descripcion)==null?void 0:h.trim())||null,logo_url:((V=k.logo_url)==null?void 0:V.trim())||null,activo:k.activo};l&&(D.id=l.id),console.log("ðŸ“¤ Enviando marca:",D);const U=await(await fetch("/api/marcas",{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(!U.success)throw new Error(U.error||"Error al guardar la marca");console.log("ðŸ“¥ Respuesta:",U),t(5,_=l?"âœ… Marca actualizada correctamente":"âœ… Marca creada correctamente"),l||t(1,k={nombre:"",descripcion:"",logo_url:"",activo:!0}),setTimeout(()=>{c("success",U.data)},1e3)}catch(D){console.error("âŒ Error:",D),t(4,d=D.message)}finally{t(3,i=!1)}}}function S(){c("cancel")}function N(h){const{url:V}=h.detail;t(1,k.logo_url=V,k)}function E(){t(1,k.logo_url="",k)}const g=["marca"];Object.keys(e).forEach(h=>{!~g.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&Jt.warn(`<MarcaForm> was created with unknown prop '${h}'`)});function I(){k.nombre=this.value,t(1,k)}function B(h){n.$$.not_equal(k.logo_url,h)&&(k.logo_url=h,t(1,k))}function O(){k.descripcion=this.value,t(1,k)}function F(){k.activo=this.checked,t(1,k)}return n.$$set=h=>{"marca"in h&&t(0,l=h.marca)},n.$capture_state=()=>({createEventDispatcher:at,Save:yt,X:je,Loader2:kt,ImageUploader:bt,dispatch:c,marca:l,loading:i,error:d,success:_,formData:k,handleSubmit:y,handleCancel:S,handleLogoUpload:N,handleLogoRemove:E,formularioValido:r,nombreValido:a}),n.$inject_state=h=>{"marca"in h&&t(0,l=h.marca),"loading"in h&&t(3,i=h.loading),"error"in h&&t(4,d=h.error),"success"in h&&t(5,_=h.success),"formData"in h&&t(1,k=h.formData),"formularioValido"in h&&t(6,r=h.formularioValido),"nombreValido"in h&&t(2,a=h.nombreValido)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&2&&t(2,a=k.nombre.trim().length>0),n.$$.dirty&4&&t(6,r=a)},[l,k,a,i,d,_,r,y,S,N,E,I,B,O,F]}class Dt extends ht{constructor(e){super(e),_t(this,e,Kt,Je,pt,{marca:0}),W("SvelteRegisterComponent",{component:this,tagName:"MarcaForm",options:e,id:Je.name})}get marca(){throw new dt("<MarcaForm>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set marca(e){throw new dt("<MarcaForm>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Qt}=vt,T="C:/SERVER/SVELTE/tienda/src/routes/(admin)/marcas/+page.svelte";function mt(n,e,t){const a=n.slice();return a[21]=e[t],a}function Ke(n){let e,t,a,r,o,s,c=n[6].texto+"",l,i,d,_,k,y,S,N,E;const g=[Nt,Mt],I=[];function B(F,h){return F[6].tipo==="success"?0:1}a=B(n),r=I[a]=g[a](n),k=new je({props:{class:"w-4 h-4"},$$inline:!0});const O={c:function(){e=b("div"),t=b("div"),r.c(),o=L(),s=b("span"),l=oe(c),d=L(),_=b("button"),be(k.$$.fragment),this.h()},l:function(h){e=v(h,"DIV",{class:!0});var V=w(e);t=v(V,"DIV",{class:!0});var D=w(t);r.l(D),o=j(D),s=v(D,"SPAN",{class:!0});var P=w(s);l=le(P,c),P.forEach(m),d=j(D),_=v(D,"BUTTON",{});var A=w(_);ve(k.$$.fragment,A),A.forEach(m),D.forEach(m),V.forEach(m),this.h()},h:function(){f(s,"class",i=n[6].tipo==="success"?"text-green-700":"text-red-700"),p(s,T,120,8,3331),p(_,T,123,8,3462),f(t,"class",y=Fe(`rounded-lg shadow-lg p-4 flex items-center gap-3 ${n[6].tipo==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`)+" svelte-1b6tmen"),p(t,T,112,6,2954),f(e,"class","fixed top-20 right-4 z-50 animate-slide-in svelte-1b6tmen"),p(e,T,111,4,2890)},m:function(h,V){Q(h,e,V),u(e,t),I[a].m(t,null),u(t,o),u(t,s),u(s,l),u(t,d),u(t,_),ge(k,_,null),S=!0,N||(E=me(_,"click",n[13],!1,!1,!1,!1),N=!0)},p:function(h,V){let D=a;a=B(h),a!==D&&(Be(),K(I[D],1,1,()=>{I[D]=null}),Te(),r=I[a],r||(r=I[a]=g[a](h),r.c()),G(r,1),r.m(t,o)),(!S||V&64)&&c!==(c=h[6].texto+"")&&Ee(l,c),(!S||V&64&&i!==(i=h[6].tipo==="success"?"text-green-700":"text-red-700"))&&f(s,"class",i),(!S||V&64&&y!==(y=Fe(`rounded-lg shadow-lg p-4 flex items-center gap-3 ${h[6].tipo==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`)+" svelte-1b6tmen"))&&f(t,"class",y)},i:function(h){S||(G(r),G(k.$$.fragment,h),S=!0)},o:function(h){K(r),K(k.$$.fragment,h),S=!1},d:function(h){h&&m(e),I[a].d(),pe(k),N=!1,E()}};return W("SvelteRegisterBlock",{block:O,id:Ke.name,type:"if",source:"(111:2) {#if mensaje.visible}",ctx:n}),O}function Mt(n){let e,t;e=new je({props:{class:"w-5 h-5 text-red-600"},$$inline:!0});const a={c:function(){be(e.$$.fragment)},l:function(o){ve(e.$$.fragment,o)},m:function(o,s){ge(e,o,s),t=!0},i:function(o){t||(G(e.$$.fragment,o),t=!0)},o:function(o){K(e.$$.fragment,o),t=!1},d:function(o){pe(e,o)}};return W("SvelteRegisterBlock",{block:a,id:Mt.name,type:"else",source:"(118:8) {:else}",ctx:n}),a}function Nt(n){let e,t;e=new wt({props:{class:"w-5 h-5 text-green-600"},$$inline:!0});const a={c:function(){be(e.$$.fragment)},l:function(o){ve(e.$$.fragment,o)},m:function(o,s){ge(e,o,s),t=!0},i:function(o){t||(G(e.$$.fragment,o),t=!0)},o:function(o){K(e.$$.fragment,o),t=!1},d:function(o){pe(e,o)}};return W("SvelteRegisterBlock",{block:a,id:Nt.name,type:"if",source:"(116:8) {#if mensaje.tipo === 'success'}",ctx:n}),a}function Qe(n){let e,t,a,r,o,s;t=new St({props:{class:"w-5 h-5"},$$inline:!0});const c={c:function(){e=b("button"),be(t.$$.fragment),a=oe(`\r
        Nueva Marca`),this.h()},l:function(i){e=v(i,"BUTTON",{class:!0});var d=w(e);ve(t.$$.fragment,d),a=le(d,`\r
        Nueva Marca`),d.forEach(m),this.h()},h:function(){f(e,"class","btn-primary flex items-center gap-2"),p(e,T,137,6,3912)},m:function(i,d){Q(i,e,d),ge(t,e,null),u(e,a),r=!0,o||(s=me(e,"click",n[8],!1,!1,!1,!1),o=!0)},p:Se,i:function(i){r||(G(t.$$.fragment,i),r=!0)},o:function(i){K(t.$$.fragment,i),r=!1},d:function(i){i&&m(e),pe(t),o=!1,s()}};return W("SvelteRegisterBlock",{block:c,id:Qe.name,type:"if",source:"(137:4) {#if !mostrarFormulario}",ctx:n}),c}function Rt(n){let e,t,a,r,o="Buscar",s,c,l,i,d,_,k,y,S,N="Estado",E,g,I,B="Todos",O,F="Activos",h,V="Inactivos",D,P,A,C=n[7].length+"",U,fe,ne=n[7].length!==1?"s":"",ae,z,he,de,re,x,$,q,_e,Y=(n[1]||n[2])&&We(n);const ie=[At,Pt,Lt],se=[];function Ve(H,R){return H[3]?0:H[7].length===0?1:2}re=Ve(n),x=se[re]=ie[re](n);const Z={c:function(){e=b("div"),t=b("div"),a=b("div"),r=b("label"),r.textContent=o,s=L(),c=b("div"),l=b("input"),i=L(),d=Re("svg"),_=Re("path"),k=L(),y=b("div"),S=b("label"),S.textContent=N,E=L(),g=b("select"),I=b("option"),I.textContent=B,O=b("option"),O.textContent=F,h=b("option"),h.textContent=V,D=L(),P=b("div"),A=b("p"),U=oe(C),fe=oe(" marca"),ae=oe(ne),z=L(),Y&&Y.c(),he=L(),de=b("div"),x.c(),this.h()},l:function(R){e=v(R,"DIV",{class:!0});var ee=w(e);t=v(ee,"DIV",{class:!0});var we=w(t);a=v(we,"DIV",{});var De=w(a);r=v(De,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-a8utqf"&&(r.textContent=o),s=j(De),c=v(De,"DIV",{class:!0});var ke=w(c);l=v(ke,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),i=j(ke),d=Ne(ke,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var Le=w(d);_=Ne(Le,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),w(_).forEach(m),Le.forEach(m),ke.forEach(m),De.forEach(m),k=j(we),y=v(we,"DIV",{});var te=w(y);S=v(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(S)!=="svelte-5e50if"&&(S.textContent=N),E=j(te),g=v(te,"SELECT",{id:!0,class:!0});var Me=w(g);I=v(Me,"OPTION",{"data-svelte-h":!0}),ue(I)!=="svelte-uh9n4x"&&(I.textContent=B),O=v(Me,"OPTION",{"data-svelte-h":!0}),ue(O)!=="svelte-1oyzk9x"&&(O.textContent=F),h=v(Me,"OPTION",{"data-svelte-h":!0}),ue(h)!=="svelte-n79c89"&&(h.textContent=V),Me.forEach(m),te.forEach(m),we.forEach(m),D=j(ee),P=v(ee,"DIV",{class:!0});var ce=w(P);A=v(ce,"P",{class:!0});var M=w(A);U=le(M,C),fe=le(M," marca"),ae=le(M,ne),M.forEach(m),z=j(ce),Y&&Y.l(ce),ce.forEach(m),ee.forEach(m),he=j(R),de=v(R,"DIV",{class:!0});var X=w(de);x.l(X),X.forEach(m),this.h()},h:function(){f(r,"for","search"),f(r,"class","block text-sm font-medium text-gray-700 mb-1"),p(r,T,168,10,4938),f(l,"id","search"),f(l,"type","text"),f(l,"placeholder","Nombre o descripciÃ³n..."),f(l,"class","w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"),p(l,T,172,12,5099),f(_,"stroke-linecap","round"),f(_,"stroke-linejoin","round"),f(_,"stroke-width","2"),f(_,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),p(_,T,180,14,5550),f(d,"class","absolute left-3 top-2.5 w-5 h-5 text-gray-400"),f(d,"fill","none"),f(d,"stroke","currentColor"),f(d,"viewBox","0 0 24 24"),p(d,T,179,12,5421),f(c,"class","relative"),p(c,T,171,10,5063),p(a,T,167,8,4921),f(S,"for","estado"),f(S,"class","block text-sm font-medium text-gray-700 mb-1"),p(S,T,187,10,5785),I.__value="",Ie(I,I.__value),p(I,T,195,12,6140),O.__value="true",Ie(O,O.__value),p(O,T,196,12,6185),h.__value="false",Ie(h,h.__value),p(h,T,197,12,6236),f(g,"id","estado"),f(g,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"),n[2]===void 0&&Ht(()=>n[15].call(g)),p(g,T,190,10,5910),p(y,T,186,8,5768),f(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),p(t,T,165,6,4833),f(A,"class","text-sm text-gray-600"),p(A,T,203,8,6405),f(P,"class","mt-4 flex items-center justify-between"),p(P,T,202,6,6343),f(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),p(e,T,164,4,4755),f(de,"class","bg-white rounded-xl shadow-sm p-6"),p(de,T,219,4,6901)},m:function(R,ee){Q(R,e,ee),u(e,t),u(t,a),u(a,r),u(a,s),u(a,c),u(c,l),Ie(l,n[1]),u(c,i),u(c,d),u(d,_),u(t,k),u(t,y),u(y,S),u(y,E),u(y,g),u(g,I),u(g,O),u(g,h),ut(g,n[2],!0),u(e,D),u(e,P),u(P,A),u(A,U),u(A,fe),u(A,ae),u(P,z),Y&&Y.m(P,null),Q(R,he,ee),Q(R,de,ee),se[re].m(de,null),$=!0,q||(_e=[me(l,"input",n[14]),me(g,"change",n[15])],q=!0)},p:function(R,ee){ee&2&&l.value!==R[1]&&Ie(l,R[1]),ee&4&&ut(g,R[2]),(!$||ee&128)&&C!==(C=R[7].length+"")&&Ee(U,C),(!$||ee&128)&&ne!==(ne=R[7].length!==1?"s":"")&&Ee(ae,ne),R[1]||R[2]?Y?Y.p(R,ee):(Y=We(R),Y.c(),Y.m(P,null)):Y&&(Y.d(1),Y=null);let we=re;re=Ve(R),re===we?se[re].p(R,ee):(Be(),K(se[we],1,1,()=>{se[we]=null}),Te(),x=se[re],x?x.p(R,ee):(x=se[re]=ie[re](R),x.c()),G(x,1),x.m(de,null))},i:function(R){$||(G(x),$=!0)},o:function(R){K(x),$=!1},d:function(R){R&&(m(e),m(he),m(de)),Y&&Y.d(),se[re].d(),q=!1,rt(_e)}};return W("SvelteRegisterBlock",{block:Z,id:Rt.name,type:"else",source:"(163:2) {:else}",ctx:n}),Z}function jt(n){let e,t,a,r=n[5]?"Editar":"Crear",o,s,c,l,i,d,_,k,y,S;i=new je({props:{class:"w-5 h-5"},$$inline:!0}),_=new Dt({props:{marca:n[5]},$$inline:!0}),_.$on("success",n[11]),_.$on("cancel",n[10]);const N={c:function(){e=b("div"),t=b("div"),a=b("h2"),o=oe(r),s=oe(" Marca"),c=L(),l=b("button"),be(i.$$.fragment),d=L(),be(_.$$.fragment),this.h()},l:function(g){e=v(g,"DIV",{class:!0});var I=w(e);t=v(I,"DIV",{class:!0});var B=w(t);a=v(B,"H2",{class:!0});var O=w(a);o=le(O,r),s=le(O," Marca"),O.forEach(m),c=j(B),l=v(B,"BUTTON",{class:!0});var F=w(l);ve(i.$$.fragment,F),F.forEach(m),B.forEach(m),d=j(I),ve(_.$$.fragment,I),I.forEach(m),this.h()},h:function(){f(a,"class","text-xl font-bold text-gray-800"),p(a,T,148,8,4286),f(l,"class","p-2 hover:bg-gray-200 rounded-lg"),p(l,T,151,8,4409),f(t,"class","flex justify-between items-center mb-4"),p(t,T,147,6,4224),f(e,"class","bg-gray-50 rounded-xl p-6 border-2 border-primary-200"),p(e,T,146,4,4149)},m:function(g,I){Q(g,e,I),u(e,t),u(t,a),u(a,o),u(a,s),u(t,c),u(t,l),ge(i,l,null),u(e,d),ge(_,e,null),k=!0,y||(S=me(l,"click",n[10],!1,!1,!1,!1),y=!0)},p:function(g,I){(!k||I&32)&&r!==(r=g[5]?"Editar":"Crear")&&Ee(o,r);const B={};I&32&&(B.marca=g[5]),_.$set(B)},i:function(g){k||(G(i.$$.fragment,g),G(_.$$.fragment,g),k=!0)},o:function(g){K(i.$$.fragment,g),K(_.$$.fragment,g),k=!1},d:function(g){g&&m(e),pe(i),pe(_),y=!1,S()}};return W("SvelteRegisterBlock",{block:N,id:jt.name,type:"if",source:"(146:2) {#if mostrarFormulario}",ctx:n}),N}function We(n){let e,t="Limpiar filtros",a,r;const o={c:function(){e=b("button"),e.textContent=t,this.h()},l:function(c){e=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1obo4pi"&&(e.textContent=t),this.h()},h:function(){f(e,"class","text-sm text-indigo-600 hover:text-indigo-700 font-medium"),p(e,T,208,10,6599)},m:function(c,l){Q(c,e,l),a||(r=me(e,"click",n[16],!1,!1,!1,!1),a=!0)},p:Se,d:function(c){c&&m(e),a=!1,r()}};return W("SvelteRegisterBlock",{block:o,id:We.name,type:"if",source:"(208:8) {#if searchTerm || filterActivo}",ctx:n}),o}function Lt(n){let e,t,a=ct(n[7]),r=[];for(let c=0;c<a.length;c+=1)r[c]=Ze(mt(n,a,c));const o=c=>K(r[c],1,1,()=>{r[c]=null}),s={c:function(){e=b("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l:function(l){e=v(l,"DIV",{class:!0});var i=w(e);for(let d=0;d<r.length;d+=1)r[d].l(i);i.forEach(m),this.h()},h:function(){f(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"),p(e,T,243,8,7971)},m:function(l,i){Q(l,e,i);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);t=!0},p:function(l,i){if(i&4736){a=ct(l[7]);let d;for(d=0;d<a.length;d+=1){const _=mt(l,a,d);r[d]?(r[d].p(_,i),G(r[d],1)):(r[d]=Ze(_),r[d].c(),G(r[d],1),r[d].m(e,null))}for(Be(),d=a.length;d<r.length;d+=1)o(d);Te()}},i:function(l){if(!t){for(let i=0;i<a.length;i+=1)G(r[i]);t=!0}},o:function(l){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)K(r[i]);t=!1},d:function(l){l&&m(e),Xt(r,l)}};return W("SvelteRegisterBlock",{block:s,id:Lt.name,type:"else",source:"(243:6) {:else}",ctx:n}),s}function Pt(n){let e,t,a,r,o=n[0].length===0?"No hay marcas":"No se encontraron marcas",s,c,l,i=n[0].length===0?"Crea tu primera marca para asociarla a productos":"No se encontraron marcas con los filtros aplicados",d,_,k;t=new Vt({props:{class:"w-16 h-16 text-gray-400 mx-auto mb-4"},$$inline:!0});let y=n[0].length===0&&et(n);const S={c:function(){e=b("div"),be(t.$$.fragment),a=L(),r=b("h3"),s=oe(o),c=L(),l=b("p"),d=oe(i),_=L(),y&&y.c(),this.h()},l:function(E){e=v(E,"DIV",{class:!0});var g=w(e);ve(t.$$.fragment,g),a=j(g),r=v(g,"H3",{class:!0});var I=w(r);s=le(I,o),I.forEach(m),c=j(g),l=v(g,"P",{class:!0});var B=w(l);d=le(B,i),B.forEach(m),_=j(g),y&&y.l(g),g.forEach(m),this.h()},h:function(){f(r,"class","text-lg font-semibold text-gray-700 mb-2"),p(r,T,228,10,7359),f(l,"class","text-gray-500 mb-6"),p(l,T,231,10,7523),f(e,"class","text-center py-12"),p(e,T,226,8,7252)},m:function(E,g){Q(E,e,g),ge(t,e,null),u(e,a),u(e,r),u(r,s),u(e,c),u(e,l),u(l,d),u(e,_),y&&y.m(e,null),k=!0},p:function(E,g){(!k||g&1)&&o!==(o=E[0].length===0?"No hay marcas":"No se encontraron marcas")&&Ee(s,o),(!k||g&1)&&i!==(i=E[0].length===0?"Crea tu primera marca para asociarla a productos":"No se encontraron marcas con los filtros aplicados")&&Ee(d,i),E[0].length===0?y?y.p(E,g):(y=et(E),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i:function(E){k||(G(t.$$.fragment,E),k=!0)},o:function(E){K(t.$$.fragment,E),k=!1},d:function(E){E&&m(e),pe(t),y&&y.d()}};return W("SvelteRegisterBlock",{block:S,id:Pt.name,type:"if",source:"(226:45) ",ctx:n}),S}function At(n){let e,t,a,r,o="Cargando marcas...";const s={c:function(){e=b("div"),t=b("div"),a=L(),r=b("p"),r.textContent=o,this.h()},l:function(l){e=v(l,"DIV",{class:!0});var i=w(e);t=v(i,"DIV",{class:!0}),w(t).forEach(m),a=j(i),r=v(i,"P",{class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-1rvu9mz"&&(r.textContent=o),i.forEach(m),this.h()},h:function(){f(t,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"),p(t,T,222,10,7022),f(r,"class","mt-4 text-gray-600"),p(r,T,223,10,7127),f(e,"class","text-center py-12"),p(e,T,221,8,6979)},m:function(l,i){Q(l,e,i),u(e,t),u(e,a),u(e,r)},p:Se,i:Se,o:Se,d:function(l){l&&m(e)}};return W("SvelteRegisterBlock",{block:s,id:At.name,type:"if",source:"(221:6) {#if loading}",ctx:n}),s}function Ot(n){let e,t,a;t=new Et({props:{class:"w-6 h-6 text-gray-400"},$$inline:!0});const r={c:function(){e=b("div"),be(t.$$.fragment),this.h()},l:function(s){e=v(s,"DIV",{class:!0});var c=w(e);ve(t.$$.fragment,c),c.forEach(m),this.h()},h:function(){f(e,"class","w-full h-full flex items-center justify-center"),p(e,T,258,22,8822)},m:function(s,c){Q(s,e,c),ge(t,e,null),a=!0},p:Se,i:function(s){a||(G(t.$$.fragment,s),a=!0)},o:function(s){K(t.$$.fragment,s),a=!1},d:function(s){s&&m(e),pe(t)}};return W("SvelteRegisterBlock",{block:r,id:Ot.name,type:"else",source:"(258:20) {:else}",ctx:n}),r}function Ut(n){let e,t,a,r,o;const s={c:function(){e=b("img"),this.h()},l:function(l){e=v(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h:function(){ft(e.src,t=n[21].logo_url)||f(e,"src",t),f(e,"alt",a=n[21].nombre),f(e,"class","w-full h-full object-cover"),p(e,T,251,22,8512)},m:function(l,i){Q(l,e,i),r||(o=me(e,"error",Wt,!1,!1,!1,!1),r=!0)},p:function(l,i){i&128&&!ft(e.src,t=l[21].logo_url)&&f(e,"src",t),i&128&&a!==(a=l[21].nombre)&&f(e,"alt",a)},i:Se,o:Se,d:function(l){l&&m(e),r=!1,o()}};return W("SvelteRegisterBlock",{block:s,id:Ut.name,type:"if",source:"(251:20) {#if marca.logo_url}",ctx:n}),s}function Ye(n){let e,t=n[21].descripcion+"",a;const r={c:function(){e=b("p"),a=oe(t),this.h()},l:function(s){e=v(s,"P",{class:!0});var c=w(e);a=le(c,t),c.forEach(m),this.h()},h:function(){f(e,"class","text-sm text-gray-600 mb-3 line-clamp-2"),p(e,T,276,16,9639)},m:function(s,c){Q(s,e,c),u(e,a)},p:function(s,c){c&128&&t!==(t=s[21].descripcion+"")&&Ee(a,t)},d:function(s){s&&m(e)}};return W("SvelteRegisterBlock",{block:r,id:Ye.name,type:"if",source:"(276:14) {#if marca.descripcion}",ctx:n}),r}function Ze(n){let e,t,a,r,o,s,c,l,i,d=n[21].nombre+"",_,k,y,S=n[21].activo?"Activo":"Inactivo",N,E,g,I,B,O,F,h,V,D,P,A,C,U;const fe=[Ut,Ot],ne=[];function ae(x,$){return x[21].logo_url?0:1}o=ae(n),s=ne[o]=fe[o](n);let z=n[21].descripcion&&Ye(n);F=new It({props:{class:"w-4 h-4"},$$inline:!0});function he(){return n[17](n[21])}D=new Ct({props:{class:"w-4 h-4"},$$inline:!0});function de(){return n[18](n[21])}const re={c:function(){e=b("div"),t=b("div"),a=b("div"),r=b("div"),s.c(),c=L(),l=b("div"),i=b("h3"),_=oe(d),k=L(),y=b("span"),N=oe(S),g=L(),z&&z.c(),I=L(),B=b("div"),O=b("button"),be(F.$$.fragment),h=L(),V=b("button"),be(D.$$.fragment),P=L(),this.h()},l:function($){e=v($,"DIV",{class:!0});var q=w(e);t=v(q,"DIV",{class:!0});var _e=w(t);a=v(_e,"DIV",{class:!0});var Y=w(a);r=v(Y,"DIV",{class:!0});var ie=w(r);s.l(ie),ie.forEach(m),c=j(Y),l=v(Y,"DIV",{class:!0});var se=w(l);i=v(se,"H3",{class:!0});var Ve=w(i);_=le(Ve,d),Ve.forEach(m),k=j(se),y=v(se,"SPAN",{class:!0});var Z=w(y);N=le(Z,S),Z.forEach(m),se.forEach(m),Y.forEach(m),_e.forEach(m),g=j(q),z&&z.l(q),I=j(q),B=v(q,"DIV",{class:!0});var H=w(B);O=v(H,"BUTTON",{class:!0,title:!0});var R=w(O);ve(F.$$.fragment,R),R.forEach(m),h=j(H),V=v(H,"BUTTON",{class:!0,title:!0});var ee=w(V);ve(D.$$.fragment,ee),ee.forEach(m),H.forEach(m),P=j(q),q.forEach(m),this.h()},h:function(){f(r,"class","w-12 h-12 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden"),p(r,T,249,18,8370),f(i,"class","font-semibold text-gray-800 truncate"),p(i,T,265,20,9122),f(y,"class",E=Fe(`text-xs px-2 py-0.5 rounded-full inline-block mt-1 ${n[21].activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`)+" svelte-1b6tmen"),p(y,T,266,20,9212),f(l,"class","flex-1 min-w-0"),p(l,T,264,18,9072),f(a,"class","flex items-center gap-3 flex-1 min-w-0"),p(a,T,247,16,8265),f(t,"class","flex items-start justify-between mb-3"),p(t,T,246,14,8196),f(O,"class","p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"),f(O,"title","Editar"),p(O,T,280,16,9863),f(V,"class","p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"),f(V,"title","Eliminar"),p(V,T,287,16,10168),f(B,"class","flex items-center justify-end gap-2 pt-3 border-t border-gray-100"),p(B,T,279,14,9766),f(e,"class","border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"),p(e,T,245,12,8095)},m:function($,q){Q($,e,q),u(e,t),u(t,a),u(a,r),ne[o].m(r,null),u(a,c),u(a,l),u(l,i),u(i,_),u(l,k),u(l,y),u(y,N),u(e,g),z&&z.m(e,null),u(e,I),u(e,B),u(B,O),ge(F,O,null),u(B,h),u(B,V),ge(D,V,null),u(e,P),A=!0,C||(U=[me(O,"click",he,!1,!1,!1,!1),me(V,"click",de,!1,!1,!1,!1)],C=!0)},p:function($,q){n=$;let _e=o;o=ae(n),o===_e?ne[o].p(n,q):(Be(),K(ne[_e],1,1,()=>{ne[_e]=null}),Te(),s=ne[o],s?s.p(n,q):(s=ne[o]=fe[o](n),s.c()),G(s,1),s.m(r,null)),(!A||q&128)&&d!==(d=n[21].nombre+"")&&Ee(_,d),(!A||q&128)&&S!==(S=n[21].activo?"Activo":"Inactivo")&&Ee(N,S),(!A||q&128&&E!==(E=Fe(`text-xs px-2 py-0.5 rounded-full inline-block mt-1 ${n[21].activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`)+" svelte-1b6tmen"))&&f(y,"class",E),n[21].descripcion?z?z.p(n,q):(z=Ye(n),z.c(),z.m(e,I)):z&&(z.d(1),z=null)},i:function($){A||(G(s),G(F.$$.fragment,$),G(D.$$.fragment,$),A=!0)},o:function($){K(s),K(F.$$.fragment,$),K(D.$$.fragment,$),A=!1},d:function($){$&&m(e),ne[o].d(),z&&z.d(),pe(F),pe(D),C=!1,rt(U)}};return W("SvelteRegisterBlock",{block:re,id:Ze.name,type:"each",source:"(245:10) {#each marcasFiltradas as marca}",ctx:n}),re}function et(n){let e,t="Crear primera marca",a,r;const o={c:function(){e=b("button"),e.textContent=t,this.h()},l:function(c){e=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1a4opdq"&&(e.textContent=t),this.h()},h:function(){f(e,"class","btn-primary"),p(e,T,237,12,7795)},m:function(c,l){Q(c,e,l),a||(r=me(e,"click",n[8],!1,!1,!1,!1),a=!0)},p:Se,d:function(c){c&&m(e),a=!1,r()}};return W("SvelteRegisterBlock",{block:o,id:et.name,type:"if",source:"(237:10) {#if marcas.length === 0}",ctx:n}),o}function tt(n){let e,t,a,r,o,s,c="GestiÃ³n de Marcas",l,i,d="Administra las marcas de productos",_,k,y,S,N,E=n[6].visible&&Ke(n),g=!n[4]&&Qe(n);const I=[jt,Rt],B=[];function O(h,V){return h[4]?0:1}y=O(n),S=B[y]=I[y](n);const F={c:function(){e=L(),t=b("div"),E&&E.c(),a=L(),r=b("div"),o=b("div"),s=b("h1"),s.textContent=c,l=L(),i=b("p"),i.textContent=d,_=L(),g&&g.c(),k=L(),S.c(),this.h()},l:function(V){qt("svelte-93bo1y",document.head).forEach(m),e=j(V),t=v(V,"DIV",{class:!0});var P=w(t);E&&E.l(P),a=j(P),r=v(P,"DIV",{class:!0});var A=w(r);o=v(A,"DIV",{});var C=w(o);s=v(C,"H1",{class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-1p2cg0l"&&(s.textContent=c),l=j(C),i=v(C,"P",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-11i8uic"&&(i.textContent=d),C.forEach(m),_=j(A),g&&g.l(A),A.forEach(m),k=j(P),S.l(P),P.forEach(m),this.h()},h:function(){document.title="Marcas | Dashboard",f(s,"class","text-2xl font-bold text-gray-800"),p(s,T,133,6,3724),f(i,"class","text-gray-600"),p(i,T,134,6,3799),p(o,T,132,4,3711),f(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),p(r,T,131,2,3625),f(t,"class","max-w-7xl mx-auto space-y-6"),p(t,T,108,0,2798)},m:function(V,D){Q(V,e,D),Q(V,t,D),E&&E.m(t,null),u(t,a),u(t,r),u(r,o),u(o,s),u(o,l),u(o,i),u(r,_),g&&g.m(r,null),u(t,k),B[y].m(t,null),N=!0},p:function(V,[D]){V[6].visible?E?(E.p(V,D),D&64&&G(E,1)):(E=Ke(V),E.c(),G(E,1),E.m(t,a)):E&&(Be(),K(E,1,1,()=>{E=null}),Te()),V[4]?g&&(Be(),K(g,1,1,()=>{g=null}),Te()):g?(g.p(V,D),D&16&&G(g,1)):(g=Qe(V),g.c(),G(g,1),g.m(r,null));let P=y;y=O(V),y===P?B[y].p(V,D):(Be(),K(B[P],1,1,()=>{B[P]=null}),Te(),S=B[y],S?S.p(V,D):(S=B[y]=I[y](V),S.c()),G(S,1),S.m(t,null))},i:function(V){N||(G(E),G(g),G(S),N=!0)},o:function(V){K(E),K(g),K(S),N=!1},d:function(V){V&&(m(e),m(t)),E&&E.d(),g&&g.d(),B[y].d()}};return W("SvelteRegisterBlock",{block:F,id:tt.name,type:"component",source:"",ctx:n}),F}const Wt=n=>n.target.style.display="none";function Yt(n,e,t){let a,{$$slots:r={},$$scope:o}=e;gt("Page",r,[]);let s=[],c=!0,l=!1,i=null,d={tipo:"",texto:"",visible:!1},_="",k="";it(async()=>{await y()});async function y(){t(3,c=!0);try{const U=await(await fetch("/api/marcas")).json();U.success&&t(0,s=U.data)}catch(C){console.error("Error cargando marcas:",C),B("error","Error al cargar las marcas")}finally{t(3,c=!1)}}function S(){t(5,i=null),t(4,l=!0)}function N(C){t(5,i=C),t(4,l=!0)}function E(){t(4,l=!1),t(5,i=null)}async function g(){await y(),E(),B("success",i?"Marca actualizada":"Marca creada")}async function I(C){if(confirm(`Â¿Eliminar "${C.nombre}"?

Si hay productos usando esta marca, no se podrÃ¡ eliminar.`))try{const fe=await(await fetch(`/api/marcas?id=${C.id}`,{method:"DELETE"})).json();if(!fe.success)throw new Error(fe.error);await y(),B("success","Marca eliminada")}catch(U){B("error",U.message)}}function B(C,U){t(6,d={tipo:C,texto:U,visible:!0}),setTimeout(()=>{t(6,d.visible=!1,d)},5e3)}const O=[];Object.keys(e).forEach(C=>{!~O.indexOf(C)&&C.slice(0,2)!=="$$"&&C!=="slot"&&Qt.warn(`<Page> was created with unknown prop '${C}'`)});const F=()=>t(6,d.visible=!1,d);function h(){_=this.value,t(1,_)}function V(){k=Gt(this),t(2,k)}const D=()=>{t(1,_=""),t(2,k="")},P=C=>N(C),A=C=>I(C);return n.$capture_state=()=>({onMount:it,Tag:Vt,Plus:St,Edit:It,Trash2:Ct,CheckCircle2:wt,X:je,Package:Et,MarcaForm:Dt,marcas:s,loading:c,mostrarFormulario:l,marcaEditando:i,mensaje:d,searchTerm:_,filterActivo:k,cargarMarcas:y,abrirFormularioCrear:S,abrirFormularioEditar:N,cerrarFormulario:E,handleSuccess:g,eliminarMarca:I,mostrarMensaje:B,marcasFiltradas:a}),n.$inject_state=C=>{"marcas"in C&&t(0,s=C.marcas),"loading"in C&&t(3,c=C.loading),"mostrarFormulario"in C&&t(4,l=C.mostrarFormulario),"marcaEditando"in C&&t(5,i=C.marcaEditando),"mensaje"in C&&t(6,d=C.mensaje),"searchTerm"in C&&t(1,_=C.searchTerm),"filterActivo"in C&&t(2,k=C.filterActivo),"marcasFiltradas"in C&&t(7,a=C.marcasFiltradas)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&7&&t(7,a=s.filter(C=>{let U=!0;if(_){const fe=_.toLowerCase();U=U&&(C.nombre.toLowerCase().includes(fe)||(C.descripcion||"").toLowerCase().includes(fe))}return k!==""&&(U=U&&C.activo===(k==="true")),U}))},[s,_,k,c,l,i,d,a,S,N,E,g,I,F,h,V,D,P,A]}class fr extends ht{constructor(e){super(e),_t(this,e,Yt,tt,pt,{}),W("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:tt.name})}}export{fr as component};
