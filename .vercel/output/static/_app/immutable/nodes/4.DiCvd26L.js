import{S as it,i as ct,s as ut,d as Y,a as ft,_ as ot,n as Be,b,O as dt,x as q,y as A,X as Ie,P as ke,a2 as mt,a0 as Ne,a1 as Re,f as ne,g as i,R as ae,a4 as Vt,G as d,h as p,j as g,k as D,l as Q,I as le,m as V,o as _,t as W,p as x,e as Ee,w as pe,z as ge,A as _e,B as ve,F as st,L as at,M as xt}from"../chunks/VwrJ_jBZ.js";import{g as ht}from"../chunks/D0QH3NT1.js";import"../chunks/ClsFpFEz.js";import{L as pt}from"../chunks/v0fJu9_I.js";import{X as He}from"../chunks/CLRgUYaD.js";import{S as gt}from"../chunks/Dd2nhuDv.js";import{C as _t}from"../chunks/jd2_iQiR.js";import{T as vt,P as bt}from"../chunks/Dh4o2pt7.js";import{S as Et}from"../chunks/9uylGhct.js";import{T as Ze}from"../chunks/B4QJF5bk.js";const{Error:Ge}=ht,F="C:/SERVER/SVELTE/tienda/src/lib/components/forms/CategoriaForm.svelte";function Xe(r){let e,t,o;const s={c:function(){e=_("div"),t=_("p"),o=W(r[3]),this.h()},l:function(u){e=g(u,"DIV",{class:!0});var n=D(e);t=g(n,"P",{class:!0});var l=D(t);o=Q(l,r[3]),l.forEach(b),n.forEach(b),this.h()},h:function(){d(t,"class","text-sm text-red-700"),p(t,F,123,6,3326),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-3"),p(e,F,122,4,3258)},m:function(u,n){ne(u,e,n),i(e,t),i(t,o)},p:function(u,n){n&8&&Ee(o,u[3])},d:function(u){u&&b(e)}};return Y("SvelteRegisterBlock",{block:s,id:Xe.name,type:"if",source:"(122:2) {#if error}",ctx:r}),s}function yt(r){let e,t,o=r[0]?"Actualizar":"Crear",s,f;e=new gt({props:{class:"w-5 h-5"},$$inline:!0});const u={c:function(){ve(e.$$.fragment),t=x(),s=W(o)},l:function(l){_e(e.$$.fragment,l),t=V(l),s=Q(l,o)},m:function(l,a){ge(e,l,a),ne(l,t,a),ne(l,s,a),f=!0},p:function(l,a){(!f||a&1)&&o!==(o=l[0]?"Actualizar":"Crear")&&Ee(s,o)},i:function(l){f||(A(e.$$.fragment,l),f=!0)},o:function(l){q(e.$$.fragment,l),f=!1},d:function(l){l&&(b(t),b(s)),pe(e,l)}};return Y("SvelteRegisterBlock",{block:u,id:yt.name,type:"else",source:"(146:6) {:else}",ctx:r}),u}function kt(r){let e,t,o;e=new pt({props:{class:"w-5 h-5 animate-spin"},$$inline:!0});const s={c:function(){ve(e.$$.fragment),t=W(`\r
        Guardando...`)},l:function(u){_e(e.$$.fragment,u),t=Q(u,`\r
        Guardando...`)},m:function(u,n){ge(e,u,n),ne(u,t,n),o=!0},p:Be,i:function(u){o||(A(e.$$.fragment,u),o=!0)},o:function(u){q(e.$$.fragment,u),o=!1},d:function(u){u&&b(t),pe(e,u)}};return Y("SvelteRegisterBlock",{block:s,id:kt.name,type:"if",source:"(143:6) {#if loading}",ctx:r}),s}function $e(r){let e,t,o,s,f,u,n="*",l,a,c,m,k,S="Slug",R,C,w,v,E="Dejar vacío para generar automáticamente",j,y,N,h="Descripción",I,P,ie,J,oe,Te="Orden",se,z,fe,ce,ue="Orden de visualización",de,me,M,Z,Ve,L,Ae="Categoría activa",Oe,Ce,X,O,G,ye,K,ee,$,we,te,xe,De,H=r[3]&&Xe(r);const Se=[kt,yt],he=[];function Fe(be,B){return be[2]?0:1}ee=Fe(r),$=he[ee]=Se[ee](r);const et={c:function(){e=_("form"),t=_("div"),o=_("div"),s=_("label"),f=W("Nombre "),u=_("span"),u.textContent=n,l=x(),a=_("input"),c=x(),m=_("div"),k=_("label"),k.textContent=S,R=x(),C=_("input"),w=x(),v=_("p"),v.textContent=E,j=x(),y=_("div"),N=_("label"),N.textContent=h,I=x(),P=_("textarea"),ie=x(),J=_("div"),oe=_("label"),oe.textContent=Te,se=x(),z=_("input"),fe=x(),ce=_("p"),ce.textContent=ue,de=x(),me=_("div"),M=_("label"),Z=_("input"),Ve=x(),L=_("span"),L.textContent=Ae,Oe=x(),H&&H.c(),Ce=x(),X=_("div"),O=_("button"),G=W("Cancelar"),ye=x(),K=_("button"),$.c(),this.h()},l:function(B){e=g(B,"FORM",{class:!0});var U=D(e);t=g(U,"DIV",{class:!0});var re=D(t);o=g(re,"DIV",{});var Le=D(o);s=g(Le,"LABEL",{class:!0});var Me=D(s);f=Q(Me,"Nombre "),u=g(Me,"SPAN",{class:!0,"data-svelte-h":!0}),le(u)!=="svelte-1n3raya"&&(u.textContent=n),Me.forEach(b),l=V(Le),a=g(Le,"INPUT",{type:!0,placeholder:!0,class:!0}),Le.forEach(b),c=V(re),m=g(re,"DIV",{});var je=D(m);k=g(je,"LABEL",{class:!0,"data-svelte-h":!0}),le(k)!=="svelte-1qa8wvy"&&(k.textContent=S),R=V(je),C=g(je,"INPUT",{type:!0,placeholder:!0,class:!0}),w=V(je),v=g(je,"P",{class:!0,"data-svelte-h":!0}),le(v)!=="svelte-17brc1d"&&(v.textContent=E),je.forEach(b),j=V(re),y=g(re,"DIV",{class:!0});var Ue=D(y);N=g(Ue,"LABEL",{class:!0,"data-svelte-h":!0}),le(N)!=="svelte-1ltsx4i"&&(N.textContent=h),I=V(Ue),P=g(Ue,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),D(P).forEach(b),Ue.forEach(b),ie=V(re),J=g(re,"DIV",{});var Pe=D(J);oe=g(Pe,"LABEL",{class:!0,"data-svelte-h":!0}),le(oe)!=="svelte-v08tvn"&&(oe.textContent=Te),se=V(Pe),z=g(Pe,"INPUT",{type:!0,min:!0,class:!0}),fe=V(Pe),ce=g(Pe,"P",{class:!0,"data-svelte-h":!0}),le(ce)!=="svelte-87y82a"&&(ce.textContent=ue),Pe.forEach(b),de=V(re),me=g(re,"DIV",{class:!0});var tt=D(me);M=g(tt,"LABEL",{class:!0});var ze=D(M);Z=g(ze,"INPUT",{type:!0,class:!0}),Ve=V(ze),L=g(ze,"SPAN",{class:!0,"data-svelte-h":!0}),le(L)!=="svelte-17prklm"&&(L.textContent=Ae),ze.forEach(b),tt.forEach(b),re.forEach(b),Oe=V(U),H&&H.l(U),Ce=V(U),X=g(U,"DIV",{class:!0});var qe=D(X);O=g(qe,"BUTTON",{type:!0,class:!0});var nt=D(O);G=Q(nt,"Cancelar"),nt.forEach(b),ye=V(qe),K=g(qe,"BUTTON",{type:!0,class:!0});var rt=D(K);$.l(rt),rt.forEach(b),qe.forEach(b),U.forEach(b),this.h()},h:function(){d(u,"class","text-red-500"),p(u,F,61,15,1639),d(s,"class","label"),p(s,F,60,6,1601),d(a,"type","text"),d(a,"placeholder","Ej: Electrónica"),d(a,"class","input"),a.required=!0,a.disabled=r[2],p(a,F,63,6,1698),p(o,F,59,4,1588),d(k,"class","label"),p(k,F,74,6,1918),d(C,"type","text"),d(C,"placeholder","electronica"),d(C,"class","input"),C.disabled=r[2],p(C,F,75,6,1959),d(v,"class","text-xs text-gray-500 mt-1"),p(v,F,82,6,2126),p(m,F,73,4,1905),d(N,"class","label"),p(N,F,86,6,2267),d(P,"placeholder","Descripción de la categoría"),d(P,"rows","3"),d(P,"class","input resize-none"),P.disabled=r[2],p(P,F,87,6,2315),d(y,"class","md:col-span-2"),p(y,F,85,4,2232),d(oe,"class","label"),p(oe,F,97,6,2556),d(z,"type","number"),d(z,"min","0"),d(z,"class","input"),z.disabled=r[2],p(z,F,98,6,2598),d(ce,"class","text-xs text-gray-500 mt-1"),p(ce,F,105,6,2750),p(J,F,96,4,2543),d(Z,"type","checkbox"),d(Z,"class","w-5 h-5 text-primary-600 rounded"),Z.disabled=r[2],p(Z,F,110,8,2945),d(L,"class","text-sm font-medium text-gray-700"),p(L,F,116,8,3124),d(M,"class","flex items-center space-x-2 cursor-pointer"),p(M,F,109,6,2877),d(me,"class","flex items-center"),p(me,F,108,4,2838),d(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),p(t,F,58,2,1531),d(O,"type","button"),d(O,"class","btn-secondary"),O.disabled=r[2],p(O,F,128,4,3458),d(K,"type","submit"),d(K,"class","btn-primary flex items-center gap-2"),K.disabled=we=!r[4]||r[2],p(K,F,137,4,3634),d(X,"class","flex justify-end space-x-3 pt-4 border-t"),p(X,F,127,2,3398),d(e,"class","space-y-4"),p(e,F,57,0,1463)},m:function(B,U){ne(B,e,U),i(e,t),i(t,o),i(o,s),i(s,f),i(s,u),i(o,l),i(o,a),ke(a,r[1].nombre),i(t,c),i(t,m),i(m,k),i(m,R),i(m,C),ke(C,r[1].slug),i(m,w),i(m,v),i(t,j),i(t,y),i(y,N),i(y,I),i(y,P),ke(P,r[1].descripcion),i(t,ie),i(t,J),i(J,oe),i(J,se),i(J,z),ke(z,r[1].orden),i(J,fe),i(J,ce),i(t,de),i(t,me),i(me,M),i(M,Z),Z.checked=r[1].activo,i(M,Ve),i(M,L),i(e,Oe),H&&H.m(e,null),i(e,Ce),i(e,X),i(X,O),i(O,G),i(X,ye),i(X,K),he[ee].m(K,null),te=!0,xe||(De=[ae(a,"input",r[8]),ae(C,"input",r[9]),ae(P,"input",r[10]),ae(z,"input",r[11]),ae(Z,"change",r[12]),ae(O,"click",r[13],!1,!1,!1,!1),ae(e,"submit",Vt(r[6]),!1,!0,!1,!1)],xe=!0)},p:function(B,[U]){(!te||U&4)&&Ie(a,"disabled",B[2]),U&2&&a.value!==B[1].nombre&&ke(a,B[1].nombre),(!te||U&4)&&Ie(C,"disabled",B[2]),U&2&&C.value!==B[1].slug&&ke(C,B[1].slug),(!te||U&4)&&Ie(P,"disabled",B[2]),U&2&&ke(P,B[1].descripcion),(!te||U&4)&&Ie(z,"disabled",B[2]),U&2&&mt(z.value)!==B[1].orden&&ke(z,B[1].orden),(!te||U&4)&&Ie(Z,"disabled",B[2]),U&2&&(Z.checked=B[1].activo),B[3]?H?H.p(B,U):(H=Xe(B),H.c(),H.m(e,Ce)):H&&(H.d(1),H=null),(!te||U&4)&&Ie(O,"disabled",B[2]);let re=ee;ee=Fe(B),ee===re?he[ee].p(B,U):(Ne(),q(he[re],1,1,()=>{he[re]=null}),Re(),$=he[ee],$?$.p(B,U):($=he[ee]=Se[ee](B),$.c()),A($,1),$.m(K,null)),(!te||U&20&&we!==(we=!B[4]||B[2]))&&Ie(K,"disabled",we)},i:function(B){te||(A($),te=!0)},o:function(B){q($),te=!1},d:function(B){B&&b(e),H&&H.d(),he[ee].d(),xe=!1,dt(De)}};return Y("SvelteRegisterBlock",{block:et,id:$e.name,type:"component",source:"",ctx:r}),et}function jt(r,e,t){let o,{$$slots:s={},$$scope:f}=e;ft("CategoriaForm",s,[]);const u=ot();let{categoria:n=null}=e,{modoEdicion:l=!1}=e,a=!1,c="",m={id:(n==null?void 0:n.id)||null,nombre:(n==null?void 0:n.nombre)||"",descripcion:(n==null?void 0:n.descripcion)||"",slug:(n==null?void 0:n.slug)||"",orden:(n==null?void 0:n.orden)||0,activo:(n==null?void 0:n.activo)!==void 0?n.activo:!0};async function k(){if(!(!o||a)){t(2,a=!0),t(3,c="");try{const I=await(await fetch("api/categorias",{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();if(!I.success)throw new Error(I.error||"Error al guardar la categoría");u("success",I.data)}catch(y){t(3,c=y.message)}finally{t(2,a=!1)}}}const S=["categoria","modoEdicion"];Object.keys(e).forEach(y=>{!~S.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<CategoriaForm> was created with unknown prop '${y}'`)});function R(){m.nombre=this.value,t(1,m)}function C(){m.slug=this.value,t(1,m)}function w(){m.descripcion=this.value,t(1,m)}function v(){m.orden=mt(this.value),t(1,m)}function E(){m.activo=this.checked,t(1,m)}const j=()=>u("cancel");return r.$$set=y=>{"categoria"in y&&t(7,n=y.categoria),"modoEdicion"in y&&t(0,l=y.modoEdicion)},r.$capture_state=()=>({createEventDispatcher:ot,Save:gt,X:He,Loader2:pt,dispatch:u,categoria:n,modoEdicion:l,loading:a,error:c,formData:m,handleSubmit:k,formularioValido:o}),r.$inject_state=y=>{"categoria"in y&&t(7,n=y.categoria),"modoEdicion"in y&&t(0,l=y.modoEdicion),"loading"in y&&t(2,a=y.loading),"error"in y&&t(3,c=y.error),"formData"in y&&t(1,m=y.formData),"formularioValido"in y&&t(4,o=y.formularioValido)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),r.$$.update=()=>{r.$$.dirty&2&&t(4,o=m.nombre.trim()!=="")},[l,m,a,c,o,u,k,n,R,C,w,v,E,j]}class Ct extends it{constructor(e){super(e),ct(this,e,jt,$e,ut,{categoria:7,modoEdicion:0}),Y("SvelteRegisterComponent",{component:this,tagName:"CategoriaForm",options:e,id:$e.name})}get categoria(){throw new Ge("<CategoriaForm>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set categoria(e){throw new Ge("<CategoriaForm>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get modoEdicion(){throw new Ge("<CategoriaForm>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set modoEdicion(e){throw new Ge("<CategoriaForm>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Pt}=ht,T="C:/SERVER/SVELTE/tienda/src/routes/(admin)/categorias/+page.svelte";function lt(r,e,t){const o=r.slice();return o[16]=e[t],o}function Je(r){let e,t,o,s,f,u=r[5].texto+"",n,l,a,c,m,k,S,R,C;o=new _t({props:{class:"w-5 h-5 "+(r[5].tipo==="success"?"text-green-600":"text-red-600")},$$inline:!0}),m=new He({props:{class:"w-4 h-4"},$$inline:!0});const w={c:function(){e=_("div"),t=_("div"),ve(o.$$.fragment),s=x(),f=_("span"),n=W(u),a=x(),c=_("button"),ve(m.$$.fragment),this.h()},l:function(E){e=g(E,"DIV",{class:!0});var j=D(e);t=g(j,"DIV",{class:!0});var y=D(t);_e(o.$$.fragment,y),s=V(y),f=g(y,"SPAN",{class:!0});var N=D(f);n=Q(N,u),N.forEach(b),a=V(y),c=g(y,"BUTTON",{});var h=D(c);_e(m.$$.fragment,h),h.forEach(b),y.forEach(b),j.forEach(b),this.h()},h:function(){d(f,"class",l=r[5].tipo==="success"?"text-green-700":"text-red-700"),p(f,T,92,8,2698),p(c,T,95,8,2829),d(t,"class",k=`rounded-lg shadow-lg p-4 flex items-center gap-3 ${r[5].tipo==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`),p(t,T,88,6,2393),d(e,"class","fixed top-20 right-4 z-50 animate-slide-in"),p(e,T,87,4,2329)},m:function(E,j){ne(E,e,j),i(e,t),ge(o,t,null),i(t,s),i(t,f),i(f,n),i(t,a),i(t,c),ge(m,c,null),S=!0,R||(C=ae(c,"click",r[11],!1,!1,!1,!1),R=!0)},p:function(E,j){const y={};j&32&&(y.class="w-5 h-5 "+(E[5].tipo==="success"?"text-green-600":"text-red-600")),o.$set(y),(!S||j&32)&&u!==(u=E[5].texto+"")&&Ee(n,u),(!S||j&32&&l!==(l=E[5].tipo==="success"?"text-green-700":"text-red-700"))&&d(f,"class",l),(!S||j&32&&k!==(k=`rounded-lg shadow-lg p-4 flex items-center gap-3 ${E[5].tipo==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`))&&d(t,"class",k)},i:function(E){S||(A(o.$$.fragment,E),A(m.$$.fragment,E),S=!0)},o:function(E){q(o.$$.fragment,E),q(m.$$.fragment,E),S=!1},d:function(E){E&&b(e),pe(o),pe(m),R=!1,C()}};return Y("SvelteRegisterBlock",{block:w,id:Je.name,type:"if",source:"(87:2) {#if mensaje.visible}",ctx:r}),w}function Ke(r){let e,t,o,s,f,u;t=new bt({props:{class:"w-5 h-5"},$$inline:!0});const n={c:function(){e=_("button"),ve(t.$$.fragment),o=W(`\r
        Nueva Categoría`),this.h()},l:function(a){e=g(a,"BUTTON",{class:!0});var c=D(e);_e(t.$$.fragment,c),o=Q(c,`\r
        Nueva Categoría`),c.forEach(b),this.h()},h:function(){d(e,"class","btn-primary flex items-center gap-2"),p(e,T,108,6,3234)},m:function(a,c){ne(a,e,c),ge(t,e,null),i(e,o),s=!0,f||(u=ae(e,"click",r[6],!1,!1,!1,!1),f=!0)},p:Be,i:function(a){s||(A(t.$$.fragment,a),s=!0)},o:function(a){q(t.$$.fragment,a),s=!1},d:function(a){a&&b(e),pe(t),f=!1,u()}};return Y("SvelteRegisterBlock",{block:n,id:Ke.name,type:"if",source:"(108:4) {#if !mostrarFormulario}",ctx:r}),n}function wt(r){let e,t,o,s;const f=[Tt,It,St],u=[];function n(a,c){return a[1]?0:a[0].length===0?1:2}t=n(r),o=u[t]=f[t](r);const l={c:function(){e=_("div"),o.c(),this.h()},l:function(c){e=g(c,"DIV",{class:!0});var m=D(e);o.l(m),m.forEach(b),this.h()},h:function(){d(e,"class","bg-white rounded-xl shadow-sm p-6"),p(e,T,134,4,4062)},m:function(c,m){ne(c,e,m),u[t].m(e,null),s=!0},p:function(c,m){let k=t;t=n(c),t===k?u[t].p(c,m):(Ne(),q(u[k],1,1,()=>{u[k]=null}),Re(),o=u[t],o?o.p(c,m):(o=u[t]=f[t](c),o.c()),A(o,1),o.m(e,null))},i:function(c){s||(A(o),s=!0)},o:function(c){q(o),s=!1},d:function(c){c&&b(e),u[t].d()}};return Y("SvelteRegisterBlock",{block:l,id:wt.name,type:"else",source:"(134:2) {:else}",ctx:r}),l}function Dt(r){let e,t,o,s=r[4]?"Editar":"Crear",f,u,n,l,a,c,m,k,S,R;a=new He({props:{class:"w-5 h-5"},$$inline:!0}),m=new Ct({props:{categoria:r[3],modoEdicion:r[4]},$$inline:!0}),m.$on("success",r[9]),m.$on("cancel",r[8]);const C={c:function(){e=_("div"),t=_("div"),o=_("h2"),f=W(s),u=W(" Categoría"),n=x(),l=_("button"),ve(a.$$.fragment),c=x(),ve(m.$$.fragment),this.h()},l:function(v){e=g(v,"DIV",{class:!0});var E=D(e);t=g(E,"DIV",{class:!0});var j=D(t);o=g(j,"H2",{class:!0});var y=D(o);f=Q(y,s),u=Q(y," Categoría"),y.forEach(b),n=V(j),l=g(j,"BUTTON",{class:!0});var N=D(l);_e(a.$$.fragment,N),N.forEach(b),j.forEach(b),c=V(E),_e(m.$$.fragment,E),E.forEach(b),this.h()},h:function(){d(o,"class","text-xl font-bold text-gray-800"),p(o,T,118,8,3589),d(l,"class","p-2 hover:bg-gray-200 rounded-lg"),p(l,T,121,8,3714),d(t,"class","flex justify-between items-center mb-4"),p(t,T,117,6,3527),d(e,"class","bg-gray-50 rounded-xl p-6 border-2 border-primary-200"),p(e,T,116,4,3452)},m:function(v,E){ne(v,e,E),i(e,t),i(t,o),i(o,f),i(o,u),i(t,n),i(t,l),ge(a,l,null),i(e,c),ge(m,e,null),k=!0,S||(R=ae(l,"click",r[8],!1,!1,!1,!1),S=!0)},p:function(v,E){(!k||E&16)&&s!==(s=v[4]?"Editar":"Crear")&&Ee(f,s);const j={};E&8&&(j.categoria=v[3]),E&16&&(j.modoEdicion=v[4]),m.$set(j)},i:function(v){k||(A(a.$$.fragment,v),A(m.$$.fragment,v),k=!0)},o:function(v){q(a.$$.fragment,v),q(m.$$.fragment,v),k=!1},d:function(v){v&&b(e),pe(a),pe(m),S=!1,R()}};return Y("SvelteRegisterBlock",{block:C,id:Dt.name,type:"if",source:"(116:2) {#if mostrarFormulario}",ctx:r}),C}function St(r){let e,t,o=at(r[0]),s=[];for(let n=0;n<o.length;n+=1)s[n]=We(lt(r,o,n));const f=n=>q(s[n],1,1,()=>{s[n]=null}),u={c:function(){e=_("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l:function(l){e=g(l,"DIV",{class:!0});var a=D(e);for(let c=0;c<s.length;c+=1)s[c].l(a);a.forEach(b),this.h()},h:function(){d(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"),p(e,T,150,8,4861)},m:function(l,a){ne(l,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p:function(l,a){if(a&1153){o=at(l[0]);let c;for(c=0;c<o.length;c+=1){const m=lt(l,o,c);s[c]?(s[c].p(m,a),A(s[c],1)):(s[c]=We(m),s[c].c(),A(s[c],1),s[c].m(e,null))}for(Ne(),c=o.length;c<s.length;c+=1)f(c);Re()}},i:function(l){if(!t){for(let a=0;a<o.length;a+=1)A(s[a]);t=!0}},o:function(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)q(s[a]);t=!1},d:function(l){l&&b(e),xt(s,l)}};return Y("SvelteRegisterBlock",{block:u,id:St.name,type:"else",source:"(150:6) {:else}",ctx:r}),u}function It(r){let e,t,o,s,f="No hay categorías",u,n,l="Crea tu primera categoría para organizar productos",a,c,m="Crear primera categoría",k,S,R;t=new Ze({props:{class:"w-16 h-16 text-gray-400 mx-auto mb-4"},$$inline:!0});const C={c:function(){e=_("div"),ve(t.$$.fragment),o=x(),s=_("h3"),s.textContent=f,u=x(),n=_("p"),n.textContent=l,a=x(),c=_("button"),c.textContent=m,this.h()},l:function(v){e=g(v,"DIV",{class:!0});var E=D(e);_e(t.$$.fragment,E),o=V(E),s=g(E,"H3",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-bcr8pf"&&(s.textContent=f),u=V(E),n=g(E,"P",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-1guerzr"&&(n.textContent=l),a=V(E),c=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),le(c)!=="svelte-12q0529"&&(c.textContent=m),E.forEach(b),this.h()},h:function(){d(s,"class","text-lg font-semibold text-gray-700 mb-2"),p(s,T,143,10,4519),d(n,"class","text-gray-500 mb-6"),p(n,T,144,10,4606),d(c,"class","btn-primary"),p(c,T,145,10,4702),d(e,"class","text-center py-12"),p(e,T,141,8,4412)},m:function(v,E){ne(v,e,E),ge(t,e,null),i(e,o),i(e,s),i(e,u),i(e,n),i(e,a),i(e,c),k=!0,S||(R=ae(c,"click",r[6],!1,!1,!1,!1),S=!0)},p:Be,i:function(v){k||(A(t.$$.fragment,v),k=!0)},o:function(v){q(t.$$.fragment,v),k=!1},d:function(v){v&&b(e),pe(t),S=!1,R()}};return Y("SvelteRegisterBlock",{block:C,id:It.name,type:"if",source:"(141:40) ",ctx:r}),C}function Tt(r){let e,t,o,s,f="Cargando categorías...";const u={c:function(){e=_("div"),t=_("div"),o=x(),s=_("p"),s.textContent=f,this.h()},l:function(l){e=g(l,"DIV",{class:!0});var a=D(e);t=g(a,"DIV",{class:!0}),D(t).forEach(b),o=V(a),s=g(a,"P",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-6tuw1k"&&(s.textContent=f),a.forEach(b),this.h()},h:function(){d(t,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"),p(t,T,137,10,4183),d(s,"class","mt-4 text-gray-600"),p(s,T,138,10,4288),d(e,"class","text-center py-12"),p(e,T,136,8,4140)},m:function(l,a){ne(l,e,a),i(e,t),i(e,o),i(e,s)},p:Be,i:Be,o:Be,d:function(l){l&&b(e)}};return Y("SvelteRegisterBlock",{block:u,id:Tt.name,type:"if",source:"(136:6) {#if loading}",ctx:r}),u}function Qe(r){let e,t=r[16].descripcion+"",o;const s={c:function(){e=_("p"),o=W(t),this.h()},l:function(u){e=g(u,"P",{class:!0});var n=D(e);o=Q(n,t),n.forEach(b),this.h()},h:function(){d(e,"class","text-sm text-gray-600 mb-3 line-clamp-2"),p(e,T,171,16,5995)},m:function(u,n){ne(u,e,n),i(e,o)},p:function(u,n){n&1&&t!==(t=u[16].descripcion+"")&&Ee(o,t)},d:function(u){u&&b(e)}};return Y("SvelteRegisterBlock",{block:s,id:Qe.name,type:"if",source:"(171:14) {#if categoria.descripcion}",ctx:r}),s}function We(r){let e,t,o,s,f,u,n,l,a=r[16].nombre+"",c,m,k,S,R=r[16].orden+"",C,w,v,E=r[16].activo?"Activo":"Inactivo",j,y,N,h,I,P,ie,J=r[16].slug+"",oe,Te,se,z,fe,ce,ue,de,me,M,Z,Ve;f=new Ze({props:{class:"w-5 h-5 text-primary-600"},$$inline:!0});let L=r[16].descripcion&&Qe(r);fe=new Et({props:{class:"w-4 h-4"},$$inline:!0});function Ae(){return r[12](r[16])}de=new vt({props:{class:"w-4 h-4"},$$inline:!0});function Oe(){return r[13](r[16])}const Ce={c:function(){e=_("div"),t=_("div"),o=_("div"),s=_("div"),ve(f.$$.fragment),u=x(),n=_("div"),l=_("h3"),c=W(a),m=x(),k=_("p"),S=W("Orden: "),C=W(R),w=x(),v=_("span"),j=W(E),N=x(),L&&L.c(),h=x(),I=_("div"),P=_("span"),ie=W("slug: "),oe=W(J),Te=x(),se=_("div"),z=_("button"),ve(fe.$$.fragment),ce=x(),ue=_("button"),ve(de.$$.fragment),me=x(),this.h()},l:function(O){e=g(O,"DIV",{class:!0});var G=D(e);t=g(G,"DIV",{class:!0});var ye=D(t);o=g(ye,"DIV",{class:!0});var K=D(o);s=g(K,"DIV",{class:!0});var ee=D(s);_e(f.$$.fragment,ee),ee.forEach(b),u=V(K),n=g(K,"DIV",{});var $=D(n);l=g($,"H3",{class:!0});var we=D(l);c=Q(we,a),we.forEach(b),m=V($),k=g($,"P",{class:!0});var te=D(k);S=Q(te,"Orden: "),C=Q(te,R),te.forEach(b),$.forEach(b),K.forEach(b),w=V(ye),v=g(ye,"SPAN",{class:!0});var xe=D(v);j=Q(xe,E),xe.forEach(b),ye.forEach(b),N=V(G),L&&L.l(G),h=V(G),I=g(G,"DIV",{class:!0});var De=D(I);P=g(De,"SPAN",{class:!0});var H=D(P);ie=Q(H,"slug: "),oe=Q(H,J),H.forEach(b),Te=V(De),se=g(De,"DIV",{class:!0});var Se=D(se);z=g(Se,"BUTTON",{class:!0,title:!0});var he=D(z);_e(fe.$$.fragment,he),he.forEach(b),ce=V(Se),ue=g(Se,"BUTTON",{class:!0,title:!0});var Fe=D(ue);_e(de.$$.fragment,Fe),Fe.forEach(b),Se.forEach(b),De.forEach(b),me=V(G),G.forEach(b),this.h()},h:function(){d(s,"class","w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center"),p(s,T,155,18,5211),d(l,"class","font-semibold text-gray-800"),p(l,T,159,20,5428),d(k,"class","text-xs text-gray-500"),p(k,T,160,20,5513),p(n,T,158,18,5401),d(o,"class","flex items-center gap-3"),p(o,T,154,16,5154),d(v,"class",y=`px-2 py-1 text-xs rounded-full ${r[16].activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),p(v,T,163,16,5642),d(t,"class","flex items-start justify-between mb-3"),p(t,T,153,14,5085),d(P,"class","text-xs text-gray-500"),p(P,T,175,16,6221),d(z,"class","p-1 text-blue-600 hover:bg-blue-50 rounded"),d(z,"title","Editar"),p(z,T,177,18,6348),d(ue,"class","p-1 text-red-600 hover:bg-red-50 rounded"),d(ue,"title","Eliminar"),p(ue,T,184,18,6650),d(se,"class","flex gap-2"),p(se,T,176,16,6304),d(I,"class","flex items-center justify-between pt-3 border-t border-gray-100"),p(I,T,174,14,6126),d(e,"class","border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"),p(e,T,152,12,4984)},m:function(O,G){ne(O,e,G),i(e,t),i(t,o),i(o,s),ge(f,s,null),i(o,u),i(o,n),i(n,l),i(l,c),i(n,m),i(n,k),i(k,S),i(k,C),i(t,w),i(t,v),i(v,j),i(e,N),L&&L.m(e,null),i(e,h),i(e,I),i(I,P),i(P,ie),i(P,oe),i(I,Te),i(I,se),i(se,z),ge(fe,z,null),i(se,ce),i(se,ue),ge(de,ue,null),i(e,me),M=!0,Z||(Ve=[ae(z,"click",Ae,!1,!1,!1,!1),ae(ue,"click",Oe,!1,!1,!1,!1)],Z=!0)},p:function(O,G){r=O,(!M||G&1)&&a!==(a=r[16].nombre+"")&&Ee(c,a),(!M||G&1)&&R!==(R=r[16].orden+"")&&Ee(C,R),(!M||G&1)&&E!==(E=r[16].activo?"Activo":"Inactivo")&&Ee(j,E),(!M||G&1&&y!==(y=`px-2 py-1 text-xs rounded-full ${r[16].activo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`))&&d(v,"class",y),r[16].descripcion?L?L.p(r,G):(L=Qe(r),L.c(),L.m(e,h)):L&&(L.d(1),L=null),(!M||G&1)&&J!==(J=r[16].slug+"")&&Ee(oe,J)},i:function(O){M||(A(f.$$.fragment,O),A(fe.$$.fragment,O),A(de.$$.fragment,O),M=!0)},o:function(O){q(f.$$.fragment,O),q(fe.$$.fragment,O),q(de.$$.fragment,O),M=!1},d:function(O){O&&b(e),pe(f),L&&L.d(),pe(fe),pe(de),Z=!1,dt(Ve)}};return Y("SvelteRegisterBlock",{block:Ce,id:We.name,type:"each",source:"(152:10) {#each categorias as categoria}",ctx:r}),Ce}function Ye(r){let e,t,o,s,f,u="Gestión de Categorías",n,l,a="Organiza tus productos por categorías",c,m,k,S,R,C=r[5].visible&&Je(r),w=!r[2]&&Ke(r);const v=[Dt,wt],E=[];function j(N,h){return N[2]?0:1}k=j(r),S=E[k]=v[k](r);const y={c:function(){e=_("div"),C&&C.c(),t=x(),o=_("div"),s=_("div"),f=_("h1"),f.textContent=u,n=x(),l=_("p"),l.textContent=a,c=x(),w&&w.c(),m=x(),S.c(),this.h()},l:function(h){e=g(h,"DIV",{class:!0});var I=D(e);C&&C.l(I),t=V(I),o=g(I,"DIV",{class:!0});var P=D(o);s=g(P,"DIV",{});var ie=D(s);f=g(ie,"H1",{class:!0,"data-svelte-h":!0}),le(f)!=="svelte-qn6cvc"&&(f.textContent=u),n=V(ie),l=g(ie,"P",{class:!0,"data-svelte-h":!0}),le(l)!=="svelte-cjgj4o"&&(l.textContent=a),ie.forEach(b),c=V(P),w&&w.l(P),P.forEach(b),m=V(I),S.l(I),I.forEach(b),this.h()},h:function(){d(f,"class","text-2xl font-bold text-gray-800"),p(f,T,104,6,3039),d(l,"class","text-gray-600"),p(l,T,105,6,3118),p(s,T,103,4,3026),d(o,"class","flex justify-between items-center"),p(o,T,102,2,2973),d(e,"class","space-y-6"),p(e,T,85,0,2275)},m:function(h,I){ne(h,e,I),C&&C.m(e,null),i(e,t),i(e,o),i(o,s),i(s,f),i(s,n),i(s,l),i(o,c),w&&w.m(o,null),i(e,m),E[k].m(e,null),R=!0},p:function(h,[I]){h[5].visible?C?(C.p(h,I),I&32&&A(C,1)):(C=Je(h),C.c(),A(C,1),C.m(e,t)):C&&(Ne(),q(C,1,1,()=>{C=null}),Re()),h[2]?w&&(Ne(),q(w,1,1,()=>{w=null}),Re()):w?(w.p(h,I),I&4&&A(w,1)):(w=Ke(h),w.c(),A(w,1),w.m(o,null));let P=k;k=j(h),k===P?E[k].p(h,I):(Ne(),q(E[P],1,1,()=>{E[P]=null}),Re(),S=E[k],S?S.p(h,I):(S=E[k]=v[k](h),S.c()),A(S,1),S.m(e,null))},i:function(h){R||(A(C),A(w),A(S),R=!0)},o:function(h){q(C),q(w),q(S),R=!1},d:function(h){h&&b(e),C&&C.d(),w&&w.d(),E[k].d()}};return Y("SvelteRegisterBlock",{block:y,id:Ye.name,type:"component",source:"",ctx:r}),y}function Bt(r,e,t){let{$$slots:o={},$$scope:s}=e;ft("Page",o,[]);let f=[],u=!0,n=!1,l=null,a=!1,c={tipo:"",texto:"",visible:!1};st(async()=>{await m()});async function m(){t(1,u=!0);try{const I=await(await fetch("/api/categorias")).json();I.success&&t(0,f=I.data)}catch(h){console.error("Error cargando categorías:",h)}finally{t(1,u=!1)}}function k(){t(3,l=null),t(4,a=!1),t(2,n=!0)}function S(h){t(3,l=h),t(4,a=!0),t(2,n=!0)}function R(){t(2,n=!1),t(3,l=null),t(4,a=!1)}async function C(){await m(),R(),v("success",a?"Categoría actualizada":"Categoría creada")}async function w(h){if(confirm(`¿Eliminar "${h.nombre}"?`))try{const P=await(await fetch(`/api/categorias?id=${h.id}`,{method:"DELETE"})).json();if(!P.success)throw new Error(P.error);await m(),v("success","Categoría eliminada")}catch(I){v("error",I.message)}}function v(h,I){t(5,c={tipo:h,texto:I,visible:!0}),setTimeout(()=>{t(5,c.visible=!1,c)},5e3)}const E=[];Object.keys(e).forEach(h=>{!~E.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&Pt.warn(`<Page> was created with unknown prop '${h}'`)});const j=()=>t(5,c.visible=!1,c),y=h=>S(h),N=h=>w(h);return r.$capture_state=()=>({onMount:st,Tag:Ze,Plus:bt,Edit:Et,Trash2:vt,CheckCircle2:_t,X:He,CategoriaForm:Ct,categorias:f,loading:u,mostrarFormulario:n,categoriaEditando:l,modoEdicion:a,mensaje:c,cargarCategorias:m,abrirFormularioCrear:k,abrirFormularioEditar:S,cerrarFormulario:R,handleSuccess:C,eliminarCategoria:w,mostrarMensaje:v}),r.$inject_state=h=>{"categorias"in h&&t(0,f=h.categorias),"loading"in h&&t(1,u=h.loading),"mostrarFormulario"in h&&t(2,n=h.mostrarFormulario),"categoriaEditando"in h&&t(3,l=h.categoriaEditando),"modoEdicion"in h&&t(4,a=h.modoEdicion),"mensaje"in h&&t(5,c=h.mensaje)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),[f,u,n,l,a,c,k,S,R,C,w,j,y,N]}class Ht extends it{constructor(e){super(e),ct(this,e,Bt,Ye,ut,{}),Y("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Ye.name})}}export{Ht as component};
