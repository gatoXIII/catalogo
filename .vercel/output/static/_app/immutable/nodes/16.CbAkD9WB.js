import{S as vn,i as bn,s as gn,d as O,q as ot,a as kn,r as hn,u as xo,w as Pe,x as X,y as Y,z as Se,A as Ve,B as De,C as Bo,D as Lo,E as qo,n as Wt,b as h,O as Fo,a0 as pn,a1 as _n,e as Z,X as tt,G as u,f as ee,g as i,R as nt,h as d,j as f,k as _,m as C,l as S,I as Q,o as m,p as w,t as V,W as Eo,v as Io,c as Po,L as So,ad as Vo,H as ia,ae as la,P as et,U as Do,af as ra}from"../chunks/VwrJ_jBZ.js";import{g as sa}from"../chunks/D0QH3NT1.js";import"../chunks/ClsFpFEz.js";import{c as ct,a as Mn,S as On}from"../chunks/D8kohgm3.js";import{I as yn,g as $o,a as Mo}from"../chunks/CQkGnOqn.js";import{P as Oo,T as Cn}from"../chunks/Dh4o2pt7.js";import{P as Uo}from"../chunks/B2qUbE6W.js";import{g as jo}from"../chunks/BkxXHVm6.js";import{g as Ao}from"../chunks/6uIGZX0H.js";import{L as ao}from"../chunks/v0fJu9_I.js";import{C as io}from"../chunks/jd2_iQiR.js";import{M as Wo}from"../chunks/psudU1-9.js";function zo(n){let e;const o=n[2].default,a=xo(o,n,n[3],null),s={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,l){a&&a.m(t,l),e=!0},p:function(t,l){a&&a.p&&(!e||l&8)&&Bo(a,o,t,t[3],e?qo(o,t[3],l,null):Lo(t[3]),null)},i:function(t){e||(Y(a,t),e=!0)},o:function(t){X(a,t),e=!1},d:function(t){a&&a.d(t)}};return O("SvelteRegisterBlock",{block:s,id:zo.name,type:"slot",source:'(22:0) <Icon name=\\"arrow-left\\" {...$$props} iconNode={iconNode}>',ctx:n}),s}function Un(n){let e,o;const a=[{name:"arrow-left"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[zo]},$$scope:{ctx:n}};for(let t=0;t<a.length;t+=1)s=ot(s,a[t]);e=new yn({props:s,$$inline:!0});const r={c:function(){De(e.$$.fragment)},l:function(l){Ve(e.$$.fragment,l)},m:function(l,c){Se(e,l,c),o=!0},p:function(l,[c]){const v=c&3?$o(a,[a[0],c&2&&Mo(l[1]),c&1&&{iconNode:l[0]}]):{};c&8&&(v.$$scope={dirty:c,ctx:l}),e.$set(v)},i:function(l){o||(Y(e.$$.fragment,l),o=!0)},o:function(l){X(e.$$.fragment,l),o=!1},d:function(l){Pe(e,l)}};return O("SvelteRegisterBlock",{block:r,id:Un.name,type:"component",source:"",ctx:n}),r}function ca(n,e,o){let{$$slots:a={},$$scope:s}=e;kn("Arrow_left",a,["default"]);const r=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return n.$$set=t=>{o(1,e=ot(ot({},e),hn(t))),"$$scope"in t&&o(3,s=t.$$scope)},n.$capture_state=()=>({Icon:yn,iconNode:r}),n.$inject_state=t=>{o(1,e=ot(ot({},e),t))},e&&"$$inject"in e&&n.$inject_state(e.$$inject),e=hn(e),[r,e,a,s]}class Ho extends vn{constructor(e){super(e),bn(this,e,ca,Un,gn,{}),O("SvelteRegisterComponent",{component:this,tagName:"Arrow_left",options:e,id:Un.name})}}function Go(n){let e;const o=n[2].default,a=xo(o,n,n[3],null),s={c:function(){a&&a.c()},l:function(t){a&&a.l(t)},m:function(t,l){a&&a.m(t,l),e=!0},p:function(t,l){a&&a.p&&(!e||l&8)&&Bo(a,o,t,t[3],e?qo(o,t[3],l,null):Lo(t[3]),null)},i:function(t){e||(Y(a,t),e=!0)},o:function(t){X(a,t),e=!1},d:function(t){a&&a.d(t)}};return O("SvelteRegisterBlock",{block:s,id:Go.name,type:"slot",source:'(22:0) <Icon name=\\"minus\\" {...$$props} iconNode={iconNode}>',ctx:n}),s}function Wn(n){let e,o;const a=[{name:"minus"},n[1],{iconNode:n[0]}];let s={$$slots:{default:[Go]},$$scope:{ctx:n}};for(let t=0;t<a.length;t+=1)s=ot(s,a[t]);e=new yn({props:s,$$inline:!0});const r={c:function(){De(e.$$.fragment)},l:function(l){Ve(e.$$.fragment,l)},m:function(l,c){Se(e,l,c),o=!0},p:function(l,[c]){const v=c&3?$o(a,[a[0],c&2&&Mo(l[1]),c&1&&{iconNode:l[0]}]):{};c&8&&(v.$$scope={dirty:c,ctx:l}),e.$set(v)},i:function(l){o||(Y(e.$$.fragment,l),o=!0)},o:function(l){X(e.$$.fragment,l),o=!1},d:function(l){Pe(e,l)}};return O("SvelteRegisterBlock",{block:r,id:Wn.name,type:"component",source:"",ctx:n}),r}function ua(n,e,o){let{$$slots:a={},$$scope:s}=e;kn("Minus",a,["default"]);const r=[["path",{d:"M5 12h14"}]];return n.$$set=t=>{o(1,e=ot(ot({},e),hn(t))),"$$scope"in t&&o(3,s=t.$$scope)},n.$capture_state=()=>({Icon:yn,iconNode:r}),n.$inject_state=t=>{o(1,e=ot(ot({},e),t))},e&&"$$inject"in e&&n.$inject_state(e.$$inject),e=hn(e),[r,e,a,s]}class Jo extends vn{constructor(e){super(e),bn(this,e,ua,Wn,gn,{}),O("SvelteRegisterComponent",{component:this,tagName:"Minus",options:e,id:Wn.name})}}const M="C:/SERVER/SVELTE/tienda/src/lib/components/cart/CartItem.svelte";function Ko(n){let e,o,a;o=new Uo({props:{class:"w-8 h-8 text-gray-400"},$$inline:!0});const s={c:function(){e=m("div"),De(o.$$.fragment),this.h()},l:function(t){e=f(t,"DIV",{class:!0});var l=_(e);Ve(o.$$.fragment,l),l.forEach(h),this.h()},h:function(){u(e,"class","w-full h-full flex items-center justify-center"),d(e,M,53,6,1708)},m:function(t,l){ee(t,e,l),Se(o,e,null),a=!0},p:Wt,i:function(t){a||(Y(o.$$.fragment,t),a=!0)},o:function(t){X(o.$$.fragment,t),a=!1},d:function(t){t&&h(e),Pe(o)}};return O("SvelteRegisterBlock",{block:s,id:Ko.name,type:"else",source:"(53:4) {:else}",ctx:n}),s}function Xo(n){let e,o,a;const s={c:function(){e=m("img"),this.h()},l:function(t){e=f(t,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),this.h()},h:function(){Eo(e.src,o=n[0].imagen_url)||u(e,"src",o),u(e,"alt",a=n[0].nombre),u(e,"class","w-full h-full object-cover"),u(e,"loading","lazy"),d(e,M,46,6,1545)},m:function(t,l){ee(t,e,l)},p:function(t,l){l&1&&!Eo(e.src,o=t[0].imagen_url)&&u(e,"src",o),l&1&&a!==(a=t[0].nombre)&&u(e,"alt",a)},i:Wt,o:Wt,d:function(t){t&&h(e)}};return O("SvelteRegisterBlock",{block:s,id:Xo.name,type:"if",source:"(46:4) {#if item.imagen_url}",ctx:n}),s}function zn(n){let e,o=n[0].marca+"",a;const s={c:function(){e=m("p"),a=V(o),this.h()},l:function(t){e=f(t,"P",{class:!0});var l=_(e);a=S(l,o),l.forEach(h),this.h()},h:function(){u(e,"class","text-xs text-gray-500"),d(e,M,68,12,2181)},m:function(t,l){ee(t,e,l),i(e,a)},p:function(t,l){l&1&&o!==(o=t[0].marca+"")&&Z(a,o)},d:function(t){t&&h(e)}};return O("SvelteRegisterBlock",{block:s,id:zn.name,type:"if",source:"(68:10) {#if item.marca}",ctx:n}),s}function Hn(n){let e,o="•";const a={c:function(){e=m("span"),e.textContent=o,this.h()},l:function(r){e=f(r,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-sg33ca"&&(e.textContent=o),this.h()},h:function(){u(e,"class","text-gray-300"),d(e,M,71,12,2307)},m:function(r,t){ee(r,e,t)},d:function(r){r&&h(e)}};return O("SvelteRegisterBlock",{block:a,id:Hn.name,type:"if",source:"(71:10) {#if item.categoria && item.marca}",ctx:n}),a}function Gn(n){let e,o=n[0].categoria+"",a;const s={c:function(){e=m("p"),a=V(o),this.h()},l:function(t){e=f(t,"P",{class:!0});var l=_(e);a=S(l,o),l.forEach(h),this.h()},h:function(){u(e,"class","text-xs text-gray-500"),d(e,M,74,12,2406)},m:function(t,l){ee(t,e,l),i(e,a)},p:function(t,l){l&1&&o!==(o=t[0].categoria+"")&&Z(a,o)},d:function(t){t&&h(e)}};return O("SvelteRegisterBlock",{block:s,id:Gn.name,type:"if",source:"(74:10) {#if item.categoria}",ctx:n}),s}function Jn(n){let e,o,a=n[0].precio_original.toFixed(2)+"",s;const r={c:function(){e=m("span"),o=V("$"),s=V(a),this.h()},l:function(l){e=f(l,"SPAN",{class:!0});var c=_(e);o=S(c,"$"),s=S(c,a),c.forEach(h),this.h()},h:function(){u(e,"class","text-xs text-gray-500 line-through ml-2"),d(e,M,84,12,2730)},m:function(l,c){ee(l,e,c),i(e,o),i(e,s)},p:function(l,c){c&1&&a!==(a=l[0].precio_original.toFixed(2)+"")&&Z(s,a)},d:function(l){l&&h(e)}};return O("SvelteRegisterBlock",{block:r,id:Jn.name,type:"if",source:"(84:10) {#if tieneDescuento}",ctx:n}),r}function Kn(n){let e,o,a=n[0].sku+"",s;const r={c:function(){e=m("p"),o=V("SKU: "),s=V(a),this.h()},l:function(l){e=f(l,"P",{class:!0});var c=_(e);o=S(c,"SKU: "),s=S(c,a),c.forEach(h),this.h()},h:function(){u(e,"class","text-xs text-gray-400 mt-1"),d(e,M,93,10,3015)},m:function(l,c){ee(l,e,c),i(e,o),i(e,s)},p:function(l,c){c&1&&a!==(a=l[0].sku+"")&&Z(s,a)},d:function(l){l&&h(e)}};return O("SvelteRegisterBlock",{block:r,id:Kn.name,type:"if",source:"(93:8) {#if item.sku}",ctx:n}),r}function Xn(n){let e,o=n[0].cantidad+"",a,s,r=n[0].precio_unitario.toFixed(2)+"",t;const l={c:function(){e=m("p"),a=V(o),s=V(" × $"),t=V(r),this.h()},l:function(v){e=f(v,"P",{class:!0});var N=_(e);a=S(N,o),s=S(N," × $"),t=S(N,r),N.forEach(h),this.h()},h:function(){u(e,"class","text-sm text-gray-500"),d(e,M,102,10,3291)},m:function(v,N){ee(v,e,N),i(e,a),i(e,s),i(e,t)},p:function(v,N){N&1&&o!==(o=v[0].cantidad+"")&&Z(a,o),N&1&&r!==(r=v[0].precio_unitario.toFixed(2)+"")&&Z(t,r)},d:function(v){v&&h(e)}};return O("SvelteRegisterBlock",{block:l,id:Xn.name,type:"if",source:"(102:8) {#if item.cantidad > 1}",ctx:n}),l}function Yn(n){let e,o,a=n[3].toFixed(2)+"",s;const r={c:function(){e=m("p"),o=V("Ahorras $"),s=V(a),this.h()},l:function(l){e=f(l,"P",{class:!0});var c=_(e);o=S(c,"Ahorras $"),s=S(c,a),c.forEach(h),this.h()},h:function(){u(e,"class","text-xs text-green-600 font-medium mt-1"),d(e,M,107,10,3463)},m:function(l,c){ee(l,e,c),i(e,o),i(e,s)},p:function(l,c){c&8&&a!==(a=l[3].toFixed(2)+"")&&Z(s,a)},d:function(l){l&&h(e)}};return O("SvelteRegisterBlock",{block:r,id:Yn.name,type:"if",source:"(107:8) {#if tieneDescuento}",ctx:n}),r}function Qn(n){let e;function o(t,l){return t[0].cantidad>=t[0].stock?Qo:Yo}let a=o(n),s=a(n);const r={c:function(){e=m("span"),s.c(),this.h()},l:function(l){e=f(l,"SPAN",{class:!0});var c=_(e);s.l(c),c.forEach(h),this.h()},h:function(){u(e,"class","text-xs text-gray-500 ml-2"),d(e,M,139,10,4837)},m:function(l,c){ee(l,e,c),s.m(e,null)},p:function(l,c){a===(a=o(l))&&s?s.p(l,c):(s.d(1),s=a(l),s&&(s.c(),s.m(e,null)))},d:function(l){l&&h(e),s.d()}};return O("SvelteRegisterBlock",{block:r,id:Qn.name,type:"if",source:"(139:8) {#if item.stock}",ctx:n}),r}function Yo(n){let e,o=n[0].stock-n[0].cantidad+"",a,s;const r={c:function(){e=m("span"),a=V(o),s=V(" disponibles"),this.h()},l:function(l){e=f(l,"SPAN",{});var c=_(e);a=S(c,o),s=S(c," disponibles"),c.forEach(h),this.h()},h:function(){d(e,M,143,14,5031)},m:function(l,c){ee(l,e,c),i(e,a),i(e,s)},p:function(l,c){c&1&&o!==(o=l[0].stock-l[0].cantidad+"")&&Z(a,o)},d:function(l){l&&h(e)}};return O("SvelteRegisterBlock",{block:r,id:Yo.name,type:"else",source:"(143:12) {:else}",ctx:n}),r}function Qo(n){let e,o="Máximo disponible";const a={c:function(){e=m("span"),e.textContent=o,this.h()},l:function(r){e=f(r,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1s41enh"&&(e.textContent=o),this.h()},h:function(){u(e,"class","text-amber-600"),d(e,M,141,14,4941)},m:function(r,t){ee(r,e,t)},p:Wt,d:function(r){r&&h(e)}};return O("SvelteRegisterBlock",{block:a,id:Qo.name,type:"if",source:"(141:12) {#if item.cantidad >= item.stock}",ctx:n}),a}function Zn(n){let e,o,a,s,r,t,l,c,v,N=n[0].nombre+"",H,A,P,k,R,j,E,T,q,B=n[0].precio_unitario.toFixed(2)+"",z,ue,U,y,x="c/u",G,b,L,oe,ge,te=n[4].toFixed(2)+"",ut,qe,Te,yt,de,fe,je,ae,dt,Fe,ke,ft=n[0].cantidad+"",mt,me,ye,Ce,xe,Ct,wt,he,we,pe,$e,Et,_e,ve,qt;const Xe=[Xo,Ko],$=[];function Ue(Be,g){return Be[0].imagen_url?0:1}a=Ue(n),s=$[a]=Xe[a](n);let se=n[0].marca&&zn(n),ce=n[0].categoria&&n[0].marca&&Hn(n),W=n[0].categoria&&Gn(n),J=n[2]&&Jn(n),K=n[0].sku&&Kn(n),le=n[0].cantidad>1&&Xn(n),ne=n[2]&&Yn(n);ae=new Jo({props:{class:"w-4 h-4"},$$inline:!0}),Ce=new Oo({props:{class:"w-4 h-4"},$$inline:!0});let ie=n[0].stock&&Qn(n);pe=new Cn({props:{class:"w-4 h-4 mr-1"},$$inline:!0});const Ft={c:function(){e=m("div"),o=m("div"),s.c(),r=w(),t=m("div"),l=m("div"),c=m("div"),v=m("h3"),H=V(N),A=w(),P=m("div"),se&&se.c(),k=w(),ce&&ce.c(),R=w(),W&&W.c(),j=w(),E=m("div"),T=m("span"),q=V("$"),z=V(B),ue=w(),J&&J.c(),U=w(),y=m("span"),y.textContent=x,G=w(),K&&K.c(),b=w(),L=m("div"),oe=m("p"),ge=V("$"),ut=V(te),qe=w(),le&&le.c(),Te=w(),ne&&ne.c(),yt=w(),de=m("div"),fe=m("div"),je=m("button"),De(ae.$$.fragment),Fe=w(),ke=m("span"),mt=V(ft),me=w(),ye=m("button"),De(Ce.$$.fragment),wt=w(),ie&&ie.c(),he=w(),we=m("button"),De(pe.$$.fragment),$e=V(`\r
        Eliminar`),this.h()},l:function(g){e=f(g,"DIV",{class:!0});var F=_(e);o=f(F,"DIV",{class:!0});var We=_(o);s.l(We),We.forEach(h),r=C(F),t=f(F,"DIV",{class:!0});var Ye=_(t);l=f(Ye,"DIV",{class:!0});var at=_(l);c=f(at,"DIV",{});var Me=_(c);v=f(Me,"H3",{class:!0});var Oe=_(v);H=S(Oe,N),Oe.forEach(h),A=C(Me),P=f(Me,"DIV",{class:!0});var Ae=_(P);se&&se.l(Ae),k=C(Ae),ce&&ce.l(Ae),R=C(Ae),W&&W.l(Ae),Ae.forEach(h),j=C(Me),E=f(Me,"DIV",{class:!0});var Qe=_(E);T=f(Qe,"SPAN",{class:!0});var it=_(T);q=S(it,"$"),z=S(it,B),it.forEach(h),ue=C(Qe),J&&J.l(Qe),U=C(Qe),y=f(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),Q(y)!=="svelte-exf6z4"&&(y.textContent=x),Qe.forEach(h),G=C(Me),K&&K.l(Me),Me.forEach(h),b=C(at),L=f(at,"DIV",{class:!0});var ze=_(L);oe=f(ze,"P",{class:!0});var It=_(oe);ge=S(It,"$"),ut=S(It,te),It.forEach(h),qe=C(ze),le&&le.l(ze),Te=C(ze),ne&&ne.l(ze),ze.forEach(h),at.forEach(h),yt=C(Ye),de=f(Ye,"DIV",{class:!0});var ht=_(de);fe=f(ht,"DIV",{class:!0});var be=_(fe);je=f(be,"BUTTON",{class:!0,title:!0});var pt=_(je);Ve(ae.$$.fragment,pt),pt.forEach(h),Fe=C(be),ke=f(be,"SPAN",{class:!0});var Pt=_(ke);mt=S(Pt,ft),Pt.forEach(h),me=C(be),ye=f(be,"BUTTON",{class:!0,title:!0});var _t=_(ye);Ve(Ce.$$.fragment,_t),_t.forEach(h),wt=C(be),ie&&ie.l(be),be.forEach(h),he=C(ht),we=f(ht,"BUTTON",{class:!0,title:!0});var vt=_(we);Ve(pe.$$.fragment,vt),$e=S(vt,`\r
        Eliminar`),vt.forEach(h),ht.forEach(h),Ye.forEach(h),F.forEach(h),this.h()},h:function(){u(o,"class","flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg overflow-hidden mr-4"),d(o,M,44,2,1429),u(v,"class","font-medium text-gray-800"),d(v,M,63,8,1985),u(P,"class","flex items-center gap-2 mt-1"),d(P,M,66,8,2097),u(T,"class","text-primary-600 font-bold"),d(T,M,80,10,2576),u(y,"class","text-xs text-gray-500"),d(y,M,88,10,2884),u(E,"class","mt-1"),d(E,M,79,8,2546),d(c,M,62,6,1970),u(oe,"class","text-lg font-bold text-gray-800"),d(oe,M,98,8,3151),u(L,"class","text-right"),d(L,M,97,6,3117),u(l,"class","flex justify-between"),d(l,M,61,4,1928),je.disabled=dt=n[1]||n[0].cantidad<=1,u(je,"class","w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),u(je,"title","Disminuir cantidad"),d(je,M,117,8,3777),u(ke,"class","w-12 text-center font-medium"),d(ke,M,126,8,4182),ye.disabled=xe=n[1]||n[0].stock&&n[0].cantidad>=n[0].stock,u(ye,"class","w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),u(ye,"title",Ct=n[0].stock&&n[0].cantidad>=n[0].stock?`Stock máximo: ${n[0].stock}`:"Aumentar cantidad"),d(ye,M,128,8,4267),u(fe,"class","flex items-center space-x-2"),d(fe,M,116,6,3726),we.disabled=n[1],u(we,"class","text-red-600 hover:text-red-800 flex items-center text-sm disabled:opacity-50 transition-colors"),u(we,"title","Eliminar del carrito"),d(we,M,149,6,5167),u(de,"class","flex items-center justify-between mt-3"),d(de,M,115,4,3666),u(t,"class","flex-grow"),d(t,M,60,2,1899),u(e,"class",Et="flex items-center px-6 py-4 hover:bg-gray-50 transition-colors "+(n[1]?"opacity-60":"")),d(e,M,42,0,1286)},m:function(g,F){ee(g,e,F),i(e,o),$[a].m(o,null),i(e,r),i(e,t),i(t,l),i(l,c),i(c,v),i(v,H),i(c,A),i(c,P),se&&se.m(P,null),i(P,k),ce&&ce.m(P,null),i(P,R),W&&W.m(P,null),i(c,j),i(c,E),i(E,T),i(T,q),i(T,z),i(E,ue),J&&J.m(E,null),i(E,U),i(E,y),i(c,G),K&&K.m(c,null),i(l,b),i(l,L),i(L,oe),i(oe,ge),i(oe,ut),i(L,qe),le&&le.m(L,null),i(L,Te),ne&&ne.m(L,null),i(t,yt),i(t,de),i(de,fe),i(fe,je),Se(ae,je,null),i(fe,Fe),i(fe,ke),i(ke,mt),i(fe,me),i(fe,ye),Se(Ce,ye,null),i(fe,wt),ie&&ie.m(fe,null),i(de,he),i(de,we),Se(pe,we,null),i(we,$e),_e=!0,ve||(qt=[nt(je,"click",n[6],!1,!1,!1,!1),nt(ye,"click",n[5],!1,!1,!1,!1),nt(we,"click",n[7],!1,!1,!1,!1)],ve=!0)},p:function(g,[F]){let We=a;a=Ue(g),a===We?$[a].p(g,F):(pn(),X($[We],1,1,()=>{$[We]=null}),_n(),s=$[a],s?s.p(g,F):(s=$[a]=Xe[a](g),s.c()),Y(s,1),s.m(o,null)),(!_e||F&1)&&N!==(N=g[0].nombre+"")&&Z(H,N),g[0].marca?se?se.p(g,F):(se=zn(g),se.c(),se.m(P,k)):se&&(se.d(1),se=null),g[0].categoria&&g[0].marca?ce||(ce=Hn(g),ce.c(),ce.m(P,R)):ce&&(ce.d(1),ce=null),g[0].categoria?W?W.p(g,F):(W=Gn(g),W.c(),W.m(P,null)):W&&(W.d(1),W=null),(!_e||F&1)&&B!==(B=g[0].precio_unitario.toFixed(2)+"")&&Z(z,B),g[2]?J?J.p(g,F):(J=Jn(g),J.c(),J.m(E,U)):J&&(J.d(1),J=null),g[0].sku?K?K.p(g,F):(K=Kn(g),K.c(),K.m(c,null)):K&&(K.d(1),K=null),(!_e||F&16)&&te!==(te=g[4].toFixed(2)+"")&&Z(ut,te),g[0].cantidad>1?le?le.p(g,F):(le=Xn(g),le.c(),le.m(L,Te)):le&&(le.d(1),le=null),g[2]?ne?ne.p(g,F):(ne=Yn(g),ne.c(),ne.m(L,null)):ne&&(ne.d(1),ne=null),(!_e||F&3&&dt!==(dt=g[1]||g[0].cantidad<=1))&&tt(je,"disabled",dt),(!_e||F&1)&&ft!==(ft=g[0].cantidad+"")&&Z(mt,ft),(!_e||F&3&&xe!==(xe=g[1]||g[0].stock&&g[0].cantidad>=g[0].stock))&&tt(ye,"disabled",xe),(!_e||F&1&&Ct!==(Ct=g[0].stock&&g[0].cantidad>=g[0].stock?`Stock máximo: ${g[0].stock}`:"Aumentar cantidad"))&&u(ye,"title",Ct),g[0].stock?ie?ie.p(g,F):(ie=Qn(g),ie.c(),ie.m(fe,null)):ie&&(ie.d(1),ie=null),(!_e||F&2)&&tt(we,"disabled",g[1]),(!_e||F&2&&Et!==(Et="flex items-center px-6 py-4 hover:bg-gray-50 transition-colors "+(g[1]?"opacity-60":"")))&&u(e,"class",Et)},i:function(g){_e||(Y(s),Y(ae.$$.fragment,g),Y(Ce.$$.fragment,g),Y(pe.$$.fragment,g),_e=!0)},o:function(g){X(s),X(ae.$$.fragment,g),X(Ce.$$.fragment,g),X(pe.$$.fragment,g),_e=!1},d:function(g){g&&h(e),$[a].d(),se&&se.d(),ce&&ce.d(),W&&W.d(),J&&J.d(),K&&K.d(),le&&le.d(),ne&&ne.d(),Pe(ae),Pe(Ce),ie&&ie.d(),Pe(pe),ve=!1,Fo(qt)}};return O("SvelteRegisterBlock",{block:Ft,id:Zn.name,type:"component",source:"",ctx:n}),Ft}function da(n,e,o){let a,s,r,{$$slots:t={},$$scope:l}=e;kn("CartItem",t,[]);let{item:c}=e,{disabled:v=!1}=e;function N(){if(v)return;const k=c.cantidad+1;if(c.stock&&k>c.stock){alert(`Stock disponible: ${c.stock} unidades`);return}ct.actualizarCantidad(c.id,k)}function H(){v||ct.actualizarCantidad(c.id,c.cantidad-1)}function A(){v||confirm(`¿Eliminar "${c.nombre}" del carrito?`)&&ct.eliminarProducto(c.id)}n.$$.on_mount.push(function(){c===void 0&&!("item"in e||n.$$.bound[n.$$.props.item])&&console.warn("<CartItem> was created without expected prop 'item'")});const P=["item","disabled"];return Object.keys(e).forEach(k=>{!~P.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<CartItem> was created with unknown prop '${k}'`)}),n.$$set=k=>{"item"in k&&o(0,c=k.item),"disabled"in k&&o(1,v=k.disabled)},n.$capture_state=()=>({Plus:Oo,Minus:Jo,Trash2:Cn,Package:Uo,carrito:ct,item:c,disabled:v,aumentarCantidad:N,disminuirCantidad:H,eliminarProducto:A,tieneDescuento:s,ahorroTotal:r,subtotalItem:a}),n.$inject_state=k=>{"item"in k&&o(0,c=k.item),"disabled"in k&&o(1,v=k.disabled),"tieneDescuento"in k&&o(2,s=k.tieneDescuento),"ahorroTotal"in k&&o(3,r=k.ahorroTotal),"subtotalItem"in k&&o(4,a=k.subtotalItem)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&o(4,a=c.precio_unitario*c.cantidad),n.$$.dirty&1&&o(2,s=c.precio_original&&c.precio_unitario<c.precio_original),n.$$.dirty&5&&o(3,r=s?(c.precio_original-c.precio_unitario)*c.cantidad:0)},[c,v,s,r,a,N,H,A]}class Zo extends vn{constructor(e){super(e),bn(this,e,da,Zn,gn,{item:0,disabled:1}),O("SvelteRegisterComponent",{component:this,tagName:"CartItem",options:e,id:Zn.name})}get item(){throw new Error("<CartItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set item(e){throw new Error("<CartItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get disabled(){throw new Error("<CartItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set disabled(e){throw new Error("<CartItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{Error:No,console:Ro}=sa,p="C:/SERVER/SVELTE/tienda/src/routes/carrito/+page.svelte";function mn(n,e,o){const a=n.slice();return a[21]=e[o],a}function ea(n){let e,o,a,s,r,t,l,c=n[5].reduce(To,0)+"",v,N,H,A,P,k,R,j,E=[],T=new Map,q,B,z,ue="Información de contacto",U,y,x,G,b,L,oe="*",ge,te,ut,qe,Te,yt,de,fe="*",je,ae,dt,Fe,ke,ft="Tu email (opcional)",mt,me,ye,Ce,xe,Ct="Dirección (opcional)",wt,he,we,pe,$e,Et="Notas adicionales (opcional)",_e,ve,qt,Xe,$,Ue,se="Resumen del Pedido",ce,W,J,K,le,ne=n[5].length+"",ie,Ft,Be,g,F=n[1].moneda_simbolo+"",We,Ye=n[4].toFixed(2)+"",at,Me,Oe,Ae,Qe,it=n[1].impuesto_porcentaje+"",ze,It,ht,be,pt=n[1].moneda_simbolo+"",Pt,_t=n[3].toFixed(2)+"",vt,wn,St,lt,Vt,lo="Total",En,bt,Ot=n[1].moneda_simbolo+"",zt,Ut=n[2].toFixed(2)+"",Ht,In,Gt,He,Ge,Je,Jt,Pn,Kt,rt,gt,ro="¿Cómo funciona?",Sn,Le,Dt,so="Tu pedido se guardará en nuestro sistema",Vn,jt,co="Se abrirá WhatsApp con tu pedido listo",Dn,At,uo="Envía el mensaje y te contactaremos",jn,Nt,fo="Coordinaremos pago y entrega",An,Rt,st,Tt,Nn,xt,mo="Pedido seguro • Sin cargos automáticos",re,Rn,ho;P=new Cn({props:{class:"w-4 h-4 mr-1"},$$inline:!0});let Bt=So(n[5]);const Xt=Ie=>Ie[21].id;Vo(n,Bt,mn,Xt);for(let Ie=0;Ie<Bt.length;Ie+=1){let I=mn(n,Bt,Ie),D=Xt(I);T.set(D,E[Ie]=eo(D,I))}let Ee=n[8]&&to(n);const po=[aa,oa],Lt=[];function _o(Ie,I){return Ie[6]?0:1}Ge=_o(n),Je=Lt[Ge]=po[Ge](n);let Ne=!n[10]&&no(n);Tt=new io({props:{class:"w-4 h-4 text-green-500"},$$inline:!0});const vo={c:function(){e=m("div"),o=m("div"),a=m("div"),s=m("div"),r=m("div"),t=m("h2"),l=V("Productos ("),v=V(c),N=V(" items)"),H=w(),A=m("button"),De(P.$$.fragment),k=V(`\r
                Vaciar carrito`),R=w(),j=m("div");for(let I=0;I<E.length;I+=1)E[I].c();q=w(),B=m("div"),z=m("h3"),z.textContent=ue,U=w(),y=m("div"),x=m("div"),G=m("label"),b=V("Tu nombre "),L=m("span"),L.textContent=oe,ge=w(),te=m("input"),ut=w(),qe=m("div"),Te=m("label"),yt=V("Tu WhatsApp "),de=m("span"),de.textContent=fe,je=w(),ae=m("input"),dt=w(),Fe=m("div"),ke=m("label"),ke.textContent=ft,mt=w(),me=m("input"),ye=w(),Ce=m("div"),xe=m("label"),xe.textContent=Ct,wt=w(),he=m("input"),we=w(),pe=m("div"),$e=m("label"),$e.textContent=Et,_e=w(),ve=m("textarea"),qt=w(),Xe=m("div"),$=m("div"),Ue=m("h2"),Ue.textContent=se,ce=w(),W=m("div"),J=m("div"),K=m("span"),le=V("Subtotal ("),ie=V(ne),Ft=V(" productos)"),Be=w(),g=m("span"),We=V(F),at=V(Ye),Me=w(),Oe=m("div"),Ae=m("span"),Qe=V("Impuestos ("),ze=V(it),It=V("%)"),ht=w(),be=m("span"),Pt=V(pt),vt=V(_t),wn=w(),St=m("div"),lt=m("div"),Vt=m("span"),Vt.textContent=lo,En=w(),bt=m("span"),zt=V(Ot),Ht=V(Ut),In=w(),Ee&&Ee.c(),Gt=w(),He=m("button"),Je.c(),Pn=w(),Ne&&Ne.c(),Kt=w(),rt=m("div"),gt=m("p"),gt.textContent=ro,Sn=w(),Le=m("ol"),Dt=m("li"),Dt.textContent=so,Vn=w(),jt=m("li"),jt.textContent=co,Dn=w(),At=m("li"),At.textContent=uo,jn=w(),Nt=m("li"),Nt.textContent=fo,An=w(),Rt=m("div"),st=m("div"),De(Tt.$$.fragment),Nn=w(),xt=m("span"),xt.textContent=mo,this.h()},l:function(I){e=f(I,"DIV",{class:!0});var D=_(e);o=f(D,"DIV",{class:!0});var Ke=_(o);a=f(Ke,"DIV",{class:!0});var $t=_(a);s=f($t,"DIV",{class:!0});var bo=_(s);r=f(bo,"DIV",{class:!0});var Yt=_(r);t=f(Yt,"H2",{class:!0});var Qt=_(t);l=S(Qt,"Productos ("),v=S(Qt,c),N=S(Qt," items)"),Qt.forEach(h),H=C(Yt),A=f(Yt,"BUTTON",{class:!0});var Tn=_(A);Ve(P.$$.fragment,Tn),k=S(Tn,`\r
                Vaciar carrito`),Tn.forEach(h),Yt.forEach(h),bo.forEach(h),R=C($t),j=f($t,"DIV",{class:!0});var go=_(j);for(let $n=0;$n<E.length;$n+=1)E[$n].l(go);go.forEach(h),q=C($t),B=f($t,"DIV",{class:!0});var Zt=_(B);z=f(Zt,"H3",{class:!0,"data-svelte-h":!0}),Q(z)!=="svelte-dp8rcm"&&(z.textContent=ue),U=C(Zt),y=f(Zt,"DIV",{class:!0});var Ze=_(y);x=f(Ze,"DIV",{});var en=_(x);G=f(en,"LABEL",{class:!0});var xn=_(G);b=S(xn,"Tu nombre "),L=f(xn,"SPAN",{class:!0,"data-svelte-h":!0}),Q(L)!=="svelte-1n3raya"&&(L.textContent=oe),xn.forEach(h),ge=C(en),te=f(en,"INPUT",{type:!0,placeholder:!0,class:!0}),en.forEach(h),ut=C(Ze),qe=f(Ze,"DIV",{});var tn=_(qe);Te=f(tn,"LABEL",{class:!0});var Bn=_(Te);yt=S(Bn,"Tu WhatsApp "),de=f(Bn,"SPAN",{class:!0,"data-svelte-h":!0}),Q(de)!=="svelte-1n3raya"&&(de.textContent=fe),Bn.forEach(h),je=C(tn),ae=f(tn,"INPUT",{type:!0,placeholder:!0,class:!0}),tn.forEach(h),dt=C(Ze),Fe=f(Ze,"DIV",{});var nn=_(Fe);ke=f(nn,"LABEL",{class:!0,"data-svelte-h":!0}),Q(ke)!=="svelte-11aqzbg"&&(ke.textContent=ft),mt=C(nn),me=f(nn,"INPUT",{type:!0,placeholder:!0,class:!0}),nn.forEach(h),ye=C(Ze),Ce=f(Ze,"DIV",{});var on=_(Ce);xe=f(on,"LABEL",{class:!0,"data-svelte-h":!0}),Q(xe)!=="svelte-1rg10gj"&&(xe.textContent=Ct),wt=C(on),he=f(on,"INPUT",{type:!0,placeholder:!0,class:!0}),on.forEach(h),we=C(Ze),pe=f(Ze,"DIV",{class:!0});var an=_(pe);$e=f(an,"LABEL",{class:!0,"data-svelte-h":!0}),Q($e)!=="svelte-2bqgu0"&&($e.textContent=Et),_e=C(an),ve=f(an,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),_(ve).forEach(h),an.forEach(h),Ze.forEach(h),Zt.forEach(h),$t.forEach(h),Ke.forEach(h),qt=C(D),Xe=f(D,"DIV",{class:!0});var ko=_(Xe);$=f(ko,"DIV",{class:!0});var Re=_($);Ue=f(Re,"H2",{class:!0,"data-svelte-h":!0}),Q(Ue)!=="svelte-1nx76o9"&&(Ue.textContent=se),ce=C(Re),W=f(Re,"DIV",{class:!0});var Mt=_(W);J=f(Mt,"DIV",{class:!0});var ln=_(J);K=f(ln,"SPAN",{});var rn=_(K);le=S(rn,"Subtotal ("),ie=S(rn,ne),Ft=S(rn," productos)"),rn.forEach(h),Be=C(ln),g=f(ln,"SPAN",{class:!0});var Ln=_(g);We=S(Ln,F),at=S(Ln,Ye),Ln.forEach(h),ln.forEach(h),Me=C(Mt),Oe=f(Mt,"DIV",{class:!0});var sn=_(Oe);Ae=f(sn,"SPAN",{});var cn=_(Ae);Qe=S(cn,"Impuestos ("),ze=S(cn,it),It=S(cn,"%)"),cn.forEach(h),ht=C(sn),be=f(sn,"SPAN",{class:!0});var qn=_(be);Pt=S(qn,pt),vt=S(qn,_t),qn.forEach(h),sn.forEach(h),wn=C(Mt),St=f(Mt,"DIV",{class:!0});var yo=_(St);lt=f(yo,"DIV",{class:!0});var un=_(lt);Vt=f(un,"SPAN",{"data-svelte-h":!0}),Q(Vt)!=="svelte-2fqrek"&&(Vt.textContent=lo),En=C(un),bt=f(un,"SPAN",{class:!0});var Fn=_(bt);zt=S(Fn,Ot),Ht=S(Fn,Ut),Fn.forEach(h),un.forEach(h),yo.forEach(h),Mt.forEach(h),In=C(Re),Ee&&Ee.l(Re),Gt=C(Re),He=f(Re,"BUTTON",{class:!0});var Co=_(He);Je.l(Co),Co.forEach(h),Pn=C(Re),Ne&&Ne.l(Re),Kt=C(Re),rt=f(Re,"DIV",{class:!0});var dn=_(rt);gt=f(dn,"P",{class:!0,"data-svelte-h":!0}),Q(gt)!=="svelte-1fy7crw"&&(gt.textContent=ro),Sn=C(dn),Le=f(dn,"OL",{class:!0});var kt=_(Le);Dt=f(kt,"LI",{"data-svelte-h":!0}),Q(Dt)!=="svelte-vz2cm0"&&(Dt.textContent=so),Vn=C(kt),jt=f(kt,"LI",{"data-svelte-h":!0}),Q(jt)!=="svelte-18um5w6"&&(jt.textContent=co),Dn=C(kt),At=f(kt,"LI",{"data-svelte-h":!0}),Q(At)!=="svelte-17wqqwe"&&(At.textContent=uo),jn=C(kt),Nt=f(kt,"LI",{"data-svelte-h":!0}),Q(Nt)!=="svelte-1o03w6d"&&(Nt.textContent=fo),kt.forEach(h),dn.forEach(h),An=C(Re),Rt=f(Re,"DIV",{class:!0});var wo=_(Rt);st=f(wo,"DIV",{class:!0});var fn=_(st);Ve(Tt.$$.fragment,fn),Nn=C(fn),xt=f(fn,"SPAN",{"data-svelte-h":!0}),Q(xt)!=="svelte-3ftcyi"&&(xt.textContent=mo),fn.forEach(h),wo.forEach(h),Re.forEach(h),ko.forEach(h),D.forEach(h),this.h()},h:function(){u(t,"class","font-semibold text-gray-700"),d(t,p,177,14,6149),u(A,"class","text-sm text-red-600 hover:text-red-800 flex items-center transition-colors"),A.disabled=n[6],d(A,p,180,14,6322),u(r,"class","flex justify-between items-center"),d(r,p,176,12,6086),u(s,"class","bg-gray-50 px-6 py-4 border-b border-gray-200"),d(s,p,175,10,6013),u(j,"class","divide-y divide-gray-100"),d(j,p,192,10,6727),u(z,"class","font-medium text-gray-700 mb-4"),d(z,p,200,12,7056),u(L,"class","text-red-500"),d(L,p,204,28,7282),u(G,"class","label"),d(G,p,203,16,7231),u(te,"type","text"),u(te,"placeholder","Ej: Juan Pérez"),u(te,"class","input"),te.disabled=n[6],te.required=!0,d(te,p,206,16,7361),d(x,p,202,14,7208),u(de,"class","text-red-500"),d(de,p,217,30,7738),u(Te,"class","label"),d(Te,p,216,16,7685),u(ae,"type","tel"),u(ae,"placeholder","Ej: 7121920418"),u(ae,"class","input"),ae.disabled=n[6],ae.required=!0,d(ae,p,219,16,7817),d(qe,p,215,14,7662),u(ke,"class","label"),d(ke,p,229,16,8142),u(me,"type","email"),u(me,"placeholder","Ej: correo@ejemplo.com"),u(me,"class","input"),me.disabled=n[6],d(me,p,230,16,8208),d(Fe,p,228,14,8119),u(xe,"class","label"),d(xe,p,239,16,8512),u(he,"type","text"),u(he,"placeholder","Ej: Calle Principal 123"),u(he,"class","input"),he.disabled=n[6],d(he,p,240,16,8579),d(Ce,p,238,14,8489),u($e,"class","label"),d($e,p,249,16,8909),u(ve,"placeholder","¿Alguna indicación especial?"),u(ve,"rows","2"),u(ve,"class","input resize-none"),ve.disabled=n[6],d(ve,p,250,16,8984),u(pe,"class","md:col-span-2"),d(pe,p,248,14,8864),u(y,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),d(y,p,201,12,7141),u(B,"class","p-6 border-t border-gray-200 bg-gray-50"),d(B,p,199,10,6989),u(a,"class","bg-white rounded-xl shadow-sm overflow-hidden"),d(a,p,173,8,5911),u(o,"class","lg:w-2/3"),d(o,p,172,6,5879),u(Ue,"class","text-xl font-bold text-gray-800 mb-6"),d(Ue,p,266,10,9500),d(K,p,271,14,9731),u(g,"class","font-medium"),d(g,p,272,14,9798),u(J,"class","flex justify-between text-gray-600"),d(J,p,270,12,9667),d(Ae,p,276,14,9994),u(be,"class","font-medium"),d(be,p,277,14,10071),u(Oe,"class","flex justify-between text-gray-600"),d(Oe,p,275,12,9930),d(Vt,p,282,16,10332),u(bt,"class","text-primary-700"),d(bt,p,283,16,10368),u(lt,"class","flex justify-between text-lg font-bold"),d(lt,p,281,14,10262),u(St,"class","border-t border-gray-200 pt-4"),d(St,p,280,12,10203),u(W,"class","space-y-4 mb-6"),d(W,p,269,10,9625),He.disabled=Jt=!n[10]||n[6],u(He,"class","w-full btn-primary flex items-center justify-center gap-2 mb-4 disabled:opacity-50 disabled:cursor-not-allowed"),d(He,p,296,10,10837),u(gt,"class","font-medium text-gray-700"),d(gt,p,318,12,11722),d(Dt,p,320,14,11848),d(jt,p,321,14,11913),d(At,p,322,14,11976),d(Nt,p,323,14,12036),u(Le,"class","list-decimal pl-4 space-y-1"),d(Le,p,319,12,11792),u(rt,"class","text-sm text-gray-500 border-t border-gray-100 pt-4 space-y-2"),d(rt,p,317,10,11633),d(xt,p,331,14,12364),u(st,"class","flex items-center gap-2 text-xs text-gray-500"),d(st,p,329,12,12226),u(Rt,"class","mt-4 pt-4 border-t border-gray-100"),d(Rt,p,328,10,12164),u($,"class","bg-white rounded-xl shadow-sm p-6 sticky top-24"),d($,p,265,8,9427),u(Xe,"class","lg:w-1/3"),d(Xe,p,264,6,9395),u(e,"class","flex flex-col lg:flex-row gap-8"),d(e,p,170,4,5791)},m:function(I,D){ee(I,e,D),i(e,o),i(o,a),i(a,s),i(s,r),i(r,t),i(t,l),i(t,v),i(t,N),i(r,H),i(r,A),Se(P,A,null),i(A,k),i(a,R),i(a,j);for(let Ke=0;Ke<E.length;Ke+=1)E[Ke]&&E[Ke].m(j,null);i(a,q),i(a,B),i(B,z),i(B,U),i(B,y),i(y,x),i(x,G),i(G,b),i(G,L),i(x,ge),i(x,te),et(te,n[0].nombre),i(y,ut),i(y,qe),i(qe,Te),i(Te,yt),i(Te,de),i(qe,je),i(qe,ae),et(ae,n[0].whatsapp),i(y,dt),i(y,Fe),i(Fe,ke),i(Fe,mt),i(Fe,me),et(me,n[0].email),i(y,ye),i(y,Ce),i(Ce,xe),i(Ce,wt),i(Ce,he),et(he,n[0].direccion),i(y,we),i(y,pe),i(pe,$e),i(pe,_e),i(pe,ve),et(ve,n[0].notas),i(e,qt),i(e,Xe),i(Xe,$),i($,Ue),i($,ce),i($,W),i(W,J),i(J,K),i(K,le),i(K,ie),i(K,Ft),i(J,Be),i(J,g),i(g,We),i(g,at),i(W,Me),i(W,Oe),i(Oe,Ae),i(Ae,Qe),i(Ae,ze),i(Ae,It),i(Oe,ht),i(Oe,be),i(be,Pt),i(be,vt),i(W,wn),i(W,St),i(St,lt),i(lt,Vt),i(lt,En),i(lt,bt),i(bt,zt),i(bt,Ht),i($,In),Ee&&Ee.m($,null),i($,Gt),i($,He),Lt[Ge].m(He,null),i($,Pn),Ne&&Ne.m($,null),i($,Kt),i($,rt),i(rt,gt),i(rt,Sn),i(rt,Le),i(Le,Dt),i(Le,Vn),i(Le,jt),i(Le,Dn),i(Le,At),i(Le,jn),i(Le,Nt),i($,An),i($,Rt),i(Rt,st),Se(Tt,st,null),i(st,Nn),i(st,xt),re=!0,Rn||(ho=[nt(A,"click",n[13],!1,!1,!1,!1),nt(te,"input",n[16]),nt(ae,"input",n[17]),nt(me,"input",n[18]),nt(he,"input",n[19]),nt(ve,"input",n[20]),nt(He,"click",n[12],!1,!1,!1,!1)],Rn=!0)},p:function(I,D){(!re||D&32)&&c!==(c=I[5].reduce(To,0)+"")&&Z(v,c),(!re||D&64)&&tt(A,"disabled",I[6]),D&96&&(Bt=So(I[5]),pn(),Vo(I,Bt,mn,Xt),E=la(E,D,Xt,1,I,Bt,T,j,ra,eo,null,mn),_n()),(!re||D&64)&&tt(te,"disabled",I[6]),D&1&&te.value!==I[0].nombre&&et(te,I[0].nombre),(!re||D&64)&&tt(ae,"disabled",I[6]),D&1&&et(ae,I[0].whatsapp),(!re||D&64)&&tt(me,"disabled",I[6]),D&1&&me.value!==I[0].email&&et(me,I[0].email),(!re||D&64)&&tt(he,"disabled",I[6]),D&1&&he.value!==I[0].direccion&&et(he,I[0].direccion),(!re||D&64)&&tt(ve,"disabled",I[6]),D&1&&et(ve,I[0].notas),(!re||D&32)&&ne!==(ne=I[5].length+"")&&Z(ie,ne),(!re||D&2)&&F!==(F=I[1].moneda_simbolo+"")&&Z(We,F),(!re||D&16)&&Ye!==(Ye=I[4].toFixed(2)+"")&&Z(at,Ye),(!re||D&2)&&it!==(it=I[1].impuesto_porcentaje+"")&&Z(ze,it),(!re||D&2)&&pt!==(pt=I[1].moneda_simbolo+"")&&Z(Pt,pt),(!re||D&8)&&_t!==(_t=I[3].toFixed(2)+"")&&Z(vt,_t),(!re||D&2)&&Ot!==(Ot=I[1].moneda_simbolo+"")&&Z(zt,Ot),(!re||D&4)&&Ut!==(Ut=I[2].toFixed(2)+"")&&Z(Ht,Ut),I[8]?Ee?Ee.p(I,D):(Ee=to(I),Ee.c(),Ee.m($,Gt)):Ee&&(Ee.d(1),Ee=null);let Ke=Ge;Ge=_o(I),Ge!==Ke&&(pn(),X(Lt[Ke],1,1,()=>{Lt[Ke]=null}),_n(),Je=Lt[Ge],Je||(Je=Lt[Ge]=po[Ge](I),Je.c()),Y(Je,1),Je.m(He,null)),(!re||D&1088&&Jt!==(Jt=!I[10]||I[6]))&&tt(He,"disabled",Jt),I[10]?Ne&&(Ne.d(1),Ne=null):Ne||(Ne=no(I),Ne.c(),Ne.m($,Kt))},i:function(I){if(!re){Y(P.$$.fragment,I);for(let D=0;D<Bt.length;D+=1)Y(E[D]);Y(Je),Y(Tt.$$.fragment,I),re=!0}},o:function(I){X(P.$$.fragment,I);for(let D=0;D<E.length;D+=1)X(E[D]);X(Je),X(Tt.$$.fragment,I),re=!1},d:function(I){I&&h(e),Pe(P);for(let D=0;D<E.length;D+=1)E[D].d();Ee&&Ee.d(),Lt[Ge].d(),Ne&&Ne.d(),Pe(Tt),Rn=!1,Fo(ho)}};return O("SvelteRegisterBlock",{block:vo,id:ea.name,type:"else",source:"(170:2) {:else}",ctx:n}),vo}function ta(n){let e,o,a,s,r,t,l="Tu carrito está vacío",c,v,N="Añade productos desde el catálogo para comenzar tu pedido",H,A,P,k,R;s=new On({props:{class:"w-12 h-12 text-gray-400"},$$inline:!0}),P=new On({props:{class:"w-4 h-4 mr-2"},$$inline:!0});const j={c:function(){e=m("div"),o=m("div"),a=m("div"),De(s.$$.fragment),r=w(),t=m("h3"),t.textContent=l,c=w(),v=m("p"),v.textContent=N,H=w(),A=m("a"),De(P.$$.fragment),k=V(`\r
          Ver catálogo`),this.h()},l:function(T){e=f(T,"DIV",{class:!0});var q=_(e);o=f(q,"DIV",{class:!0});var B=_(o);a=f(B,"DIV",{class:!0});var z=_(a);Ve(s.$$.fragment,z),z.forEach(h),r=C(B),t=f(B,"H3",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1dmo387"&&(t.textContent=l),c=C(B),v=f(B,"P",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-5wxn8q"&&(v.textContent=N),H=C(B),A=f(B,"A",{href:!0,class:!0});var ue=_(A);Ve(P.$$.fragment,ue),k=S(ue,`\r
          Ver catálogo`),ue.forEach(h),B.forEach(h),q.forEach(h),this.h()},h:function(){u(a,"class","w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6"),d(a,p,156,8,5212),u(t,"class","text-xl font-semibold text-gray-700 mb-2"),d(t,p,159,8,5392),u(v,"class","text-gray-500 mb-6"),d(v,p,160,8,5481),u(A,"href","/"),u(A,"class","btn-primary inline-flex items-center"),d(A,p,163,8,5604),u(o,"class","max-w-md mx-auto"),d(o,p,155,6,5172),u(e,"class","text-center py-16 bg-white rounded-xl shadow-sm border-2 border-dashed border-gray-300"),d(e,p,154,4,5064)},m:function(T,q){ee(T,e,q),i(e,o),i(o,a),Se(s,a,null),i(o,r),i(o,t),i(o,c),i(o,v),i(o,H),i(o,A),Se(P,A,null),i(A,k),R=!0},p:Wt,i:function(T){R||(Y(s.$$.fragment,T),Y(P.$$.fragment,T),R=!0)},o:function(T){X(s.$$.fragment,T),X(P.$$.fragment,T),R=!1},d:function(T){T&&h(e),Pe(s),Pe(P)}};return O("SvelteRegisterBlock",{block:j,id:ta.name,type:"if",source:"(153:26) ",ctx:n}),j}function na(n){let e,o,a,s,r,t="¡Pedido Creado!",l,c,v,N,H,A,P,k,R,j,E,T,q,B="Redirigiendo a WhatsApp...",z;a=new io({props:{class:"w-12 h-12 text-green-600"},$$inline:!0}),E=new ao({props:{class:"w-5 h-5 animate-spin"},$$inline:!0});const ue={c:function(){e=m("div"),o=m("div"),De(a.$$.fragment),s=w(),r=m("h2"),r.textContent=t,l=w(),c=m("p"),v=V("Tu pedido "),N=m("strong"),H=V(n[9]),A=V(` ha sido registrado exitosamente.\r
        `),P=m("br"),k=V("Se está abriendo WhatsApp para que lo envíes..."),R=w(),j=m("div"),De(E.$$.fragment),T=w(),q=m("span"),q.textContent=B,this.h()},l:function(y){e=f(y,"DIV",{class:!0});var x=_(e);o=f(x,"DIV",{class:!0});var G=_(o);Ve(a.$$.fragment,G),G.forEach(h),s=C(x),r=f(x,"H2",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-qs4s2h"&&(r.textContent=t),l=C(x),c=f(x,"P",{class:!0});var b=_(c);v=S(b,"Tu pedido "),N=f(b,"STRONG",{});var L=_(N);H=S(L,n[9]),L.forEach(h),A=S(b,` ha sido registrado exitosamente.\r
        `),P=f(b,"BR",{}),k=S(b,"Se está abriendo WhatsApp para que lo envíes..."),b.forEach(h),R=C(x),j=f(x,"DIV",{class:!0});var oe=_(j);Ve(E.$$.fragment,oe),T=C(oe),q=f(oe,"SPAN",{"data-svelte-h":!0}),Q(q)!=="svelte-tbvc1g"&&(q.textContent=B),oe.forEach(h),x.forEach(h),this.h()},h:function(){u(o,"class","w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6"),d(o,p,139,6,4359),u(r,"class","text-2xl font-bold text-gray-800 mb-2"),d(r,p,142,6,4535),d(N,p,144,18,4663),d(P,p,145,8,4733),u(c,"class","text-gray-600 mb-6"),d(c,p,143,6,4613),d(q,p,149,8,4937),u(j,"class","flex items-center justify-center space-x-2 text-primary-600"),d(j,p,147,6,4804),u(e,"class","bg-white rounded-xl shadow-sm p-8 text-center"),d(e,p,138,4,4292)},m:function(y,x){ee(y,e,x),i(e,o),Se(a,o,null),i(e,s),i(e,r),i(e,l),i(e,c),i(c,v),i(c,N),i(N,H),i(c,A),i(c,P),i(c,k),i(e,R),i(e,j),Se(E,j,null),i(j,T),i(j,q),z=!0},p:function(y,x){(!z||x&512)&&Z(H,y[9])},i:function(y){z||(Y(a.$$.fragment,y),Y(E.$$.fragment,y),z=!0)},o:function(y){X(a.$$.fragment,y),X(E.$$.fragment,y),z=!1},d:function(y){y&&h(e),Pe(a),Pe(E)}};return O("SvelteRegisterBlock",{block:ue,id:na.name,type:"if",source:"(137:2) {#if pedidoCreado}",ctx:n}),ue}function eo(n,e){let o,a,s;a=new Zo({props:{item:e[21],disabled:e[6]},$$inline:!0});const r={key:n,first:null,c:function(){o=Do(),De(a.$$.fragment),this.h()},l:function(l){o=Do(),Ve(a.$$.fragment,l),this.h()},h:function(){this.first=o},m:function(l,c){ee(l,o,c),Se(a,l,c),s=!0},p:function(l,c){e=l;const v={};c&32&&(v.item=e[21]),c&64&&(v.disabled=e[6]),a.$set(v)},i:function(l){s||(Y(a.$$.fragment,l),s=!0)},o:function(l){X(a.$$.fragment,l),s=!1},d:function(l){l&&h(o),Pe(a,l)}};return O("SvelteRegisterBlock",{block:r,id:eo.name,type:"each",source:"(194:12) {#each $carrito as item (item.id)}",ctx:e}),r}function to(n){let e,o,a;const s={c:function(){e=m("div"),o=m("p"),a=V(n[8]),this.h()},l:function(t){e=f(t,"DIV",{class:!0});var l=_(e);o=f(l,"P",{class:!0});var c=_(o);a=S(c,n[8]),c.forEach(h),l.forEach(h),this.h()},h:function(){u(o,"class","text-sm text-red-700"),d(o,p,291,14,10685),u(e,"class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"),d(e,p,290,12,10604)},m:function(t,l){ee(t,e,l),i(e,o),i(o,a)},p:function(t,l){l&256&&Z(a,t[8])},d:function(t){t&&h(e)}};return O("SvelteRegisterBlock",{block:s,id:to.name,type:"if",source:"(290:10) {#if errorCreandoPedido}",ctx:n}),s}function oa(n){let e,o,a;e=new Wo({props:{class:"w-5 h-5"},$$inline:!0});const s={c:function(){De(e.$$.fragment),o=V(`\r
              Crear y enviar por WhatsApp`)},l:function(t){Ve(e.$$.fragment,t),o=S(t,`\r
              Crear y enviar por WhatsApp`)},m:function(t,l){Se(e,t,l),ee(t,o,l),a=!0},i:function(t){a||(Y(e.$$.fragment,t),a=!0)},o:function(t){X(e.$$.fragment,t),a=!1},d:function(t){t&&h(o),Pe(e,t)}};return O("SvelteRegisterBlock",{block:s,id:oa.name,type:"else",source:"(305:12) {:else}",ctx:n}),s}function aa(n){let e,o,a;e=new ao({props:{class:"w-5 h-5 animate-spin"},$$inline:!0});const s={c:function(){De(e.$$.fragment),o=V(`\r
              Creando pedido...`)},l:function(t){Ve(e.$$.fragment,t),o=S(t,`\r
              Creando pedido...`)},m:function(t,l){Se(e,t,l),ee(t,o,l),a=!0},i:function(t){a||(Y(e.$$.fragment,t),a=!0)},o:function(t){X(e.$$.fragment,t),a=!1},d:function(t){t&&h(o),Pe(e,t)}};return O("SvelteRegisterBlock",{block:s,id:aa.name,type:"if",source:"(302:12) {#if enviandoPedido}",ctx:n}),s}function no(n){let e,o="* Completa tu nombre y WhatsApp para continuar";const a={c:function(){e=m("p"),e.textContent=o,this.h()},l:function(r){e=f(r,"P",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1yaqqcw"&&(e.textContent=o),this.h()},h:function(){u(e,"class","text-xs text-amber-600 text-center mb-4"),d(e,p,311,12,11429)},m:function(r,t){ee(r,e,t)},d:function(r){r&&h(e)}};return O("SvelteRegisterBlock",{block:a,id:no.name,type:"if",source:"(311:10) {#if !formularioValido}",ctx:n}),a}function oo(n){var ue;let e,o,a,s,r,t,l,c,v,N="Mi Carrito",H,A,P="Revisa tu pedido y envíalo por WhatsApp",k,R,j,E;document.title=e="Mi Carrito - "+(((ue=n[1])==null?void 0:ue.nombre_empresa)||"CatálogoExpress"),t=new Ho({props:{class:"w-4 h-4 mr-2"},$$inline:!0});const T=[na,ta,ea],q=[];function B(U,y){return U[7]?0:U[11]?1:2}R=B(n),j=q[R]=T[R](n);const z={c:function(){o=w(),a=m("div"),s=m("div"),r=m("a"),De(t.$$.fragment),l=V(`\r
      Volver al catálogo`),c=w(),v=m("h1"),v.textContent=N,H=w(),A=m("p"),A.textContent=P,k=w(),j.c(),this.h()},l:function(y){ia("svelte-zxsald",document.head).forEach(h),o=C(y),a=f(y,"DIV",{class:!0});var G=_(a);s=f(G,"DIV",{class:!0});var b=_(s);r=f(b,"A",{href:!0,class:!0});var L=_(r);Ve(t.$$.fragment,L),l=S(L,`\r
      Volver al catálogo`),L.forEach(h),c=C(b),v=f(b,"H1",{class:!0,"data-svelte-h":!0}),Q(v)!=="svelte-2eo2kt"&&(v.textContent=N),H=C(b),A=f(b,"P",{class:!0,"data-svelte-h":!0}),Q(A)!=="svelte-8swj9h"&&(A.textContent=P),b.forEach(h),k=C(G),j.l(G),G.forEach(h),this.h()},h:function(){u(r,"href","/"),u(r,"class","inline-flex items-center text-primary-600 hover:text-primary-800 mb-4 transition-colors"),d(r,p,126,4,3868),u(v,"class","text-3xl font-bold text-gray-800"),d(v,p,130,4,4060),u(A,"class","text-gray-600 mt-2"),d(A,p,131,4,4126),u(s,"class","mb-8"),d(s,p,125,2,3844),u(a,"class","max-w-6xl mx-auto"),d(a,p,123,0,3786)},m:function(y,x){ee(y,o,x),ee(y,a,x),i(a,s),i(s,r),Se(t,r,null),i(r,l),i(s,c),i(s,v),i(s,H),i(s,A),i(a,k),q[R].m(a,null),E=!0},p:function(y,[x]){var b;(!E||x&2)&&e!==(e="Mi Carrito - "+(((b=y[1])==null?void 0:b.nombre_empresa)||"CatálogoExpress"))&&(document.title=e);let G=R;R=B(y),R===G?q[R].p(y,x):(pn(),X(q[G],1,1,()=>{q[G]=null}),_n(),j=q[R],j?j.p(y,x):(j=q[R]=T[R](y),j.c()),Y(j,1),j.m(a,null))},i:function(y){E||(Y(t.$$.fragment,y),Y(j),E=!0)},o:function(y){X(t.$$.fragment,y),X(j),E=!1},d:function(y){y&&(h(o),h(a)),Pe(t),q[R].d()}};return O("SvelteRegisterBlock",{block:z,id:oo.name,type:"component",source:"",ctx:n}),z}const To=(n,e)=>n+e.cantidad;function fa(n,e,o){let a,s,r,t,l,c,v,N;Io(ct,"carrito"),Po(n,ct,b=>o(5,v=b)),Io(Mn,"carritoVacio"),Po(n,Mn,b=>o(11,N=b));let{$$slots:H={},$$scope:A}=e;kn("Page",H,[]);let{data:P}=e,k={nombre:"",whatsapp:"",email:"",direccion:"",notas:""},R=!1,j=!1,E="",T=null;async function q(){if(!(!c||N||R)){o(6,R=!0),o(8,E="");try{const b={items:v.map(ge=>({id:ge.id,nombre:ge.nombre,sku:ge.sku,cantidad:ge.cantidad,precio_unitario:ge.precio_unitario,imagen_url:ge.imagen_url})),cliente_nombre:k.nombre,cliente_whatsapp:k.whatsapp,cliente_email:k.email||null,cliente_direccion:k.direccion||null,subtotal:s,impuesto:t,total:l,notas:k.notas||null},oe=await(await fetch("/api/pedidos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();if(!oe.success)throw new Error(oe.error||"Error creando el pedido");o(9,T=oe.data.numero_pedido),o(7,j=!0),setTimeout(()=>{const ge={numero_pedido:oe.data.numero_pedido,cliente_nombre:k.nombre,cliente_whatsapp:k.whatsapp},te=jo(ge,v,a);window.open(te,"_blank"),setTimeout(()=>{ct.limpiarCarrito(),Ao("/?pedido=success")},1500)},1e3)}catch(b){console.error("Error creando pedido:",b),o(8,E=b.message),o(6,R=!1)}}}function B(){confirm("¿Estás seguro de vaciar el carrito?")&&ct.limpiarCarrito()}n.$$.on_mount.push(function(){P===void 0&&!("data"in e||n.$$.bound[n.$$.props.data])&&Ro.warn("<Page> was created without expected prop 'data'")});const z=["data"];Object.keys(e).forEach(b=>{!~z.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&Ro.warn(`<Page> was created with unknown prop '${b}'`)});function ue(){k.nombre=this.value,o(0,k)}function U(){k.whatsapp=this.value,o(0,k)}function y(){k.email=this.value,o(0,k)}function x(){k.direccion=this.value,o(0,k)}function G(){k.notas=this.value,o(0,k)}return n.$$set=b=>{"data"in b&&o(14,P=b.data)},n.$capture_state=()=>({ShoppingCart:On,Trash2:Cn,ArrowLeft:Ho,MessageCircle:Wo,CheckCircle2:io,Loader2:ao,carrito:ct,carritoVacio:Mn,CartItem:Zo,generarEnlacePedido:jo,goto:Ao,data:P,datosCliente:k,enviandoPedido:R,pedidoCreado:j,errorCreandoPedido:E,pedidoId:T,crearYEnviarPedido:q,limpiarCarrito:B,configuracion:a,total:l,impuesto:t,subtotal:s,formularioValido:c,impuestoPorcentaje:r,$carrito:v,$carritoVacio:N}),n.$inject_state=b=>{"data"in b&&o(14,P=b.data),"datosCliente"in b&&o(0,k=b.datosCliente),"enviandoPedido"in b&&o(6,R=b.enviandoPedido),"pedidoCreado"in b&&o(7,j=b.pedidoCreado),"errorCreandoPedido"in b&&o(8,E=b.errorCreandoPedido),"pedidoId"in b&&o(9,T=b.pedidoId),"configuracion"in b&&o(1,a=b.configuracion),"total"in b&&o(2,l=b.total),"impuesto"in b&&o(3,t=b.impuesto),"subtotal"in b&&o(4,s=b.subtotal),"formularioValido"in b&&o(10,c=b.formularioValido),"impuestoPorcentaje"in b&&o(15,r=b.impuestoPorcentaje)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&16384&&o(1,a=P.configuracion),n.$$.dirty&32&&o(4,s=v.reduce((b,L)=>b+L.precio_unitario*L.cantidad,0)),n.$$.dirty&2&&o(15,r=((a==null?void 0:a.impuesto_porcentaje)||18)/100),n.$$.dirty&32784&&o(3,t=s*r),n.$$.dirty&24&&o(2,l=s+t),n.$$.dirty&1&&o(10,c=k.nombre.trim()!==""&&k.whatsapp.trim()!=="")},[k,a,l,t,s,v,R,j,E,T,c,N,q,B,P,r,ue,U,y,x,G]}class Ia extends vn{constructor(e){super(e),bn(this,e,fa,oo,gn,{data:14}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:oo.name})}get data(){throw new No("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new No("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ia as component};
