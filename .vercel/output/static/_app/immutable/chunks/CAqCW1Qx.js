import{S as le,i as ie,s as se,d as C,q,a as ae,r as Z,u as ye,w as W,x as L,y as S,z as Y,A as H,B as X,C as ve,D as we,E as ke,_ as Se,b as y,e as Ie,a0 as oe,a1 as re,f as V,g as b,G as p,h as w,j as I,k as B,l as K,m as A,I as ee,o as E,t as Q,p as O,Y as Xe,n as Ke,W as Ne,R as J,O as qe,X as $,J as Re,K as je,P as Ce}from"./VwrJ_jBZ.js";import{g as Qe}from"./D0QH3NT1.js";import"./ClsFpFEz.js";import{I as x,g as Ee,a as Ue}from"./CQkGnOqn.js";import{L as Pe}from"./v0fJu9_I.js";import{X as Ae}from"./CLRgUYaD.js";function Oe(r){let e;const t=r[2].default,o=ye(t,r,r[3],null),a={c:function(){o&&o.c()},l:function(n){o&&o.l(n)},m:function(n,l){o&&o.m(n,l),e=!0},p:function(n,l){o&&o.p&&(!e||l&8)&&ve(o,t,n,n[3],e?ke(t,n[3],l,null):we(n[3]),null)},i:function(n){e||(S(o,n),e=!0)},o:function(n){L(o,n),e=!1},d:function(n){o&&o.d(n)}};return C("SvelteRegisterBlock",{block:a,id:Oe.name,type:"slot",source:'(22:0) <Icon name=\\"image\\" {...$$props} iconNode={iconNode}>',ctx:r}),a}function ce(r){let e,t;const o=[{name:"image"},r[1],{iconNode:r[0]}];let a={$$slots:{default:[Oe]},$$scope:{ctx:r}};for(let n=0;n<o.length;n+=1)a=q(a,o[n]);e=new x({props:a,$$inline:!0});const i={c:function(){X(e.$$.fragment)},l:function(l){H(e.$$.fragment,l)},m:function(l,s){Y(e,l,s),t=!0},p:function(l,[s]){const c=s&3?Ee(o,[o[0],s&2&&Ue(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i:function(l){t||(S(e.$$.fragment,l),t=!0)},o:function(l){L(e.$$.fragment,l),t=!1},d:function(l){W(e,l)}};return C("SvelteRegisterBlock",{block:i,id:ce.name,type:"component",source:"",ctx:r}),i}function Ze(r,e,t){let{$$slots:o={},$$scope:a}=e;ae("Image",o,["default"]);const i=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];return r.$$set=n=>{t(1,e=q(q({},e),Z(n))),"$$scope"in n&&t(3,a=n.$$scope)},r.$capture_state=()=>({Icon:x,iconNode:i}),r.$inject_state=n=>{t(1,e=q(q({},e),n))},e&&"$$inject"in e&&r.$inject_state(e.$$inject),e=Z(e),[i,e,o,a]}class xe extends le{constructor(e){super(e),ie(this,e,Ze,ce,se,{}),C("SvelteRegisterComponent",{component:this,tagName:"Image",options:e,id:ce.name})}}function Ve(r){let e;const t=r[2].default,o=ye(t,r,r[3],null),a={c:function(){o&&o.c()},l:function(n){o&&o.l(n)},m:function(n,l){o&&o.m(n,l),e=!0},p:function(n,l){o&&o.p&&(!e||l&8)&&ve(o,t,n,n[3],e?ke(t,n[3],l,null):we(n[3]),null)},i:function(n){e||(S(o,n),e=!0)},o:function(n){L(o,n),e=!1},d:function(n){o&&o.d(n)}};return C("SvelteRegisterBlock",{block:a,id:Ve.name,type:"slot",source:'(22:0) <Icon name=\\"link-2\\" {...$$props} iconNode={iconNode}>',ctx:r}),a}function ue(r){let e,t;const o=[{name:"link-2"},r[1],{iconNode:r[0]}];let a={$$slots:{default:[Ve]},$$scope:{ctx:r}};for(let n=0;n<o.length;n+=1)a=q(a,o[n]);e=new x({props:a,$$inline:!0});const i={c:function(){X(e.$$.fragment)},l:function(l){H(e.$$.fragment,l)},m:function(l,s){Y(e,l,s),t=!0},p:function(l,[s]){const c=s&3?Ee(o,[o[0],s&2&&Ue(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i:function(l){t||(S(e.$$.fragment,l),t=!0)},o:function(l){L(e.$$.fragment,l),t=!1},d:function(l){W(e,l)}};return C("SvelteRegisterBlock",{block:i,id:ue.name,type:"component",source:"",ctx:r}),i}function $e(r,e,t){let{$$slots:o={},$$scope:a}=e;ae("Link_2",o,["default"]);const i=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12"}]];return r.$$set=n=>{t(1,e=q(q({},e),Z(n))),"$$scope"in n&&t(3,a=n.$$scope)},r.$capture_state=()=>({Icon:x,iconNode:i}),r.$inject_state=n=>{t(1,e=q(q({},e),n))},e&&"$$inject"in e&&r.$inject_state(e.$$inject),e=Z(e),[i,e,o,a]}class Me extends le{constructor(e){super(e),ie(this,e,$e,ue,se,{}),C("SvelteRegisterComponent",{component:this,tagName:"Link_2",options:e,id:ue.name})}}function Ge(r){let e;const t=r[2].default,o=ye(t,r,r[3],null),a={c:function(){o&&o.c()},l:function(n){o&&o.l(n)},m:function(n,l){o&&o.m(n,l),e=!0},p:function(n,l){o&&o.p&&(!e||l&8)&&ve(o,t,n,n[3],e?ke(t,n[3],l,null):we(n[3]),null)},i:function(n){e||(S(o,n),e=!0)},o:function(n){L(o,n),e=!1},d:function(n){o&&o.d(n)}};return C("SvelteRegisterBlock",{block:a,id:Ge.name,type:"slot",source:'(22:0) <Icon name=\\"upload\\" {...$$props} iconNode={iconNode}>',ctx:r}),a}function fe(r){let e,t;const o=[{name:"upload"},r[1],{iconNode:r[0]}];let a={$$slots:{default:[Ge]},$$scope:{ctx:r}};for(let n=0;n<o.length;n+=1)a=q(a,o[n]);e=new x({props:a,$$inline:!0});const i={c:function(){X(e.$$.fragment)},l:function(l){H(e.$$.fragment,l)},m:function(l,s){Y(e,l,s),t=!0},p:function(l,[s]){const c=s&3?Ee(o,[o[0],s&2&&Ue(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i:function(l){t||(S(e.$$.fragment,l),t=!0)},o:function(l){L(e.$$.fragment,l),t=!1},d:function(l){W(e,l)}};return C("SvelteRegisterBlock",{block:i,id:fe.name,type:"component",source:"",ctx:r}),i}function et(r,e,t){let{$$slots:o={},$$scope:a}=e;ae("Upload",o,["default"]);const i=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]];return r.$$set=n=>{t(1,e=q(q({},e),Z(n))),"$$scope"in n&&t(3,a=n.$$scope)},r.$capture_state=()=>({Icon:x,iconNode:i}),r.$inject_state=n=>{t(1,e=q(q({},e),n))},e&&"$$inject"in e&&r.$inject_state(e.$$inject),e=Z(e),[i,e,o,a]}class ze extends le{constructor(e){super(e),ie(this,e,et,fe,se,{}),C("SvelteRegisterComponent",{component:this,tagName:"Upload",options:e,id:fe.name})}}async function Le(r,e,t,o=null){var n;if(!r.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen");const a=10*1024*1024;if(r.size>a)throw new Error("La imagen no puede superar los 10MB");const i=new FormData;i.append("file",r),i.append("upload_preset",e),i.append("folder","catalogoexpress"),i.append("resource_type","image");try{const l=await fetch(`https://api.cloudinary.com/v1_1/${t}/image/upload`,{method:"POST",body:i});if(!l.ok){const c=await l.json();throw new Error(((n=c.error)==null?void 0:n.message)||"Error al subir la imagen")}const s=await l.json();return{url:s.secure_url,publicId:s.public_id,width:s.width,height:s.height,format:s.format,bytes:s.bytes}}catch(l){throw console.error("Error uploading to Cloudinary:",l),l}}function de(r){return r&&["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type)}function Be(r){return new Promise((e,t)=>{if(!de(r)){t(new Error("Archivo no v치lido"));return}const o=new FileReader;o.onload=a=>e(a.target.result),o.onerror=a=>t(new Error("Error al leer el archivo")),o.readAsDataURL(r)})}const De="dvw65xgeu",Te="catalogo_appvg",{console:tt}=Qe,k="C:/SERVER/SVELTE/tienda/src/lib/components/ui/ImageUploader.svelte";function me(r){let e,t="*";const o={c:function(){e=E("span"),e.textContent=t,this.h()},l:function(i){e=I(i,"SPAN",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1n3raya"&&(e.textContent=t),this.h()},h:function(){p(e,"class","text-red-500"),w(e,k,128,6,3507)},m:function(i,n){V(i,e,n)},d:function(i){i&&y(e)}};return C("SvelteRegisterBlock",{block:o,id:me.name,type:"if",source:"(128:4) {#if required}",ctx:r}),o}function Fe(r){let e,t,o,a,i,n,l,s,c,u,m,d,f,_,v,N;const U=[Ye,We],M=[];function D(j,P){return j[4]?0:1}i=D(r),n=M[i]=U[i](r),u=new Me({props:{class:"w-6 h-6 text-gray-600"},$$inline:!0});let h=r[7]&&ge(r);const R={c:function(){e=E("div"),t=E("div"),o=E("button"),a=E("div"),n.c(),s=O(),c=E("button"),X(u.$$.fragment),m=O(),h&&h.c(),d=O(),f=E("input"),this.h()},l:function(P){e=I(P,"DIV",{class:!0});var T=B(e);t=I(T,"DIV",{class:!0});var G=B(t);o=I(G,"BUTTON",{type:!0,class:!0});var te=B(o);a=I(te,"DIV",{class:!0});var g=B(a);n.l(g),g.forEach(y),te.forEach(y),s=A(G),c=I(G,"BUTTON",{type:!0,class:!0,title:!0});var z=B(c);H(u.$$.fragment,z),z.forEach(y),G.forEach(y),m=A(T),h&&h.l(T),d=A(T),f=I(T,"INPUT",{type:!0,accept:!0,class:!0}),T.forEach(y),this.h()},h:function(){p(a,"class","flex flex-col items-center text-gray-600"),w(a,k,175,10,5111),p(o,"type","button"),o.disabled=l=r[1]||r[4],p(o,"class","flex-1 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),w(o,k,169,8,4776),p(c,"type","button"),c.disabled=r[1],p(c,"class","px-4 py-3 border-2 border-gray-300 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-colors disabled:opacity-50"),p(c,"title","Usar URL"),w(c,k,187,8,5612),p(t,"class","flex gap-2"),w(t,k,168,6,4742),p(f,"type","file"),p(f,"accept","image/jpeg,image/jpg,image/png,image/gif,image/webp"),f.disabled=r[1],p(f,"class","hidden"),w(f,k,221,6,6957),p(e,"class","space-y-2"),w(e,k,166,4,4677)},m:function(P,T){V(P,e,T),b(e,t),b(t,o),b(o,a),M[i].m(a,null),b(t,s),b(t,c),Y(u,c,null),b(e,m),h&&h.m(e,null),b(e,d),b(e,f),r[19](f),_=!0,v||(N=[J(o,"click",r[13],!1,!1,!1,!1),J(c,"click",r[16],!1,!1,!1,!1),J(f,"change",r[10],!1,!1,!1,!1)],v=!0)},p:function(P,T){let G=i;i=D(P),i!==G&&(oe(),L(M[G],1,1,()=>{M[G]=null}),re(),n=M[i],n||(n=M[i]=U[i](P),n.c()),S(n,1),n.m(a,null)),(!_||T&18&&l!==(l=P[1]||P[4]))&&$(o,"disabled",l),(!_||T&2)&&$(c,"disabled",P[1]),P[7]?h?h.p(P,T):(h=ge(P),h.c(),h.m(e,d)):h&&(h.d(1),h=null),(!_||T&2)&&$(f,"disabled",P[1])},i:function(P){_||(S(n),S(u.$$.fragment,P),_=!0)},o:function(P){L(n),L(u.$$.fragment,P),_=!1},d:function(P){P&&y(e),M[i].d(),W(u),h&&h.d(),r[19](null),v=!1,qe(N)}};return C("SvelteRegisterBlock",{block:R,id:Fe.name,type:"else",source:"(166:2) {:else}",ctx:r}),R}function Je(r){let e,t,o,a,i,n,l,s,c=!r[1]&&pe(r),u=r[4]&&he(r);const m={c:function(){e=E("div"),t=E("img"),a=O(),c&&c.c(),i=O(),u&&u.c(),this.h()},l:function(f){e=I(f,"DIV",{class:!0});var _=B(e);t=I(_,"IMG",{src:!0,alt:!0,class:!0}),a=A(_),c&&c.l(_),i=A(_),u&&u.l(_),_.forEach(y),this.h()},h:function(){Ne(t.src,o=r[3])||p(t,"src",o),p(t,"alt","Preview"),p(t,"class","h-48 w-48 object-cover rounded-lg border-2 border-gray-200 shadow-sm"),w(t,k,135,6,3672),p(e,"class","relative inline-block"),w(e,k,134,4,3629)},m:function(f,_){V(f,e,_),b(e,t),b(e,a),c&&c.m(e,null),b(e,i),u&&u.m(e,null),n=!0,l||(s=J(t,"error",r[15],!1,!1,!1,!1),l=!0)},p:function(f,_){(!n||_&8&&!Ne(t.src,o=f[3]))&&p(t,"src",o),f[1]?c&&(oe(),L(c,1,1,()=>{c=null}),re()):c?(c.p(f,_),_&2&&S(c,1)):(c=pe(f),c.c(),S(c,1),c.m(e,i)),f[4]?u?(u.p(f,_),_&16&&S(u,1)):(u=he(f),u.c(),S(u,1),u.m(e,null)):u&&(oe(),L(u,1,1,()=>{u=null}),re())},i:function(f){n||(S(c),S(u),n=!0)},o:function(f){L(c),L(u),n=!1},d:function(f){f&&y(e),c&&c.d(),u&&u.d(),l=!1,s()}};return C("SvelteRegisterBlock",{block:m,id:Je.name,type:"if",source:"(134:2) {#if preview}",ctx:r}),m}function We(r){let e,t,o,a="Subir imagen",i,n,l="JPG, PNG, GIF hasta 10MB",s;e=new ze({props:{class:"w-8 h-8 mb-2"},$$inline:!0});const c={c:function(){X(e.$$.fragment),t=O(),o=E("span"),o.textContent=a,i=O(),n=E("span"),n.textContent=l,this.h()},l:function(m){H(e.$$.fragment,m),t=A(m),o=I(m,"SPAN",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-1xahvt2"&&(o.textContent=a),i=A(m),n=I(m,"SPAN",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-1g9yfot"&&(n.textContent=l),this.h()},h:function(){p(o,"class","text-sm font-medium"),w(o,k,181,14,5395),p(n,"class","text-xs text-gray-500 mt-1"),w(n,k,182,14,5464)},m:function(m,d){Y(e,m,d),V(m,t,d),V(m,o,d),V(m,i,d),V(m,n,d),s=!0},i:function(m){s||(S(e.$$.fragment,m),s=!0)},o:function(m){L(e.$$.fragment,m),s=!1},d:function(m){m&&(y(t),y(o),y(i),y(n)),W(e,m)}};return C("SvelteRegisterBlock",{block:c,id:We.name,type:"else",source:"(180:12) {:else}",ctx:r}),c}function Ye(r){let e,t,o,a="Subiendo...",i;e=new Pe({props:{class:"w-8 h-8 animate-spin mb-2"},$$inline:!0});const n={c:function(){X(e.$$.fragment),t=O(),o=E("span"),o.textContent=a,this.h()},l:function(s){H(e.$$.fragment,s),t=A(s),o=I(s,"SPAN",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-1tjvhty"&&(o.textContent=a),this.h()},h:function(){p(o,"class","text-sm"),w(o,k,178,14,5271)},m:function(s,c){Y(e,s,c),V(s,t,c),V(s,o,c),i=!0},i:function(s){i||(S(e.$$.fragment,s),i=!0)},o:function(s){L(e.$$.fragment,s),i=!1},d:function(s){s&&(y(t),y(o)),W(e,s)}};return C("SvelteRegisterBlock",{block:n,id:Ye.name,type:"if",source:"(177:12) {#if uploading}",ctx:r}),n}function ge(r){let e,t,o,a,i,n,l,s;const c={c:function(){e=E("div"),t=E("input"),o=O(),a=E("button"),i=Q("Usar URL"),this.h()},l:function(m){e=I(m,"DIV",{class:!0});var d=B(e);t=I(d,"INPUT",{type:!0,placeholder:!0,class:!0}),o=A(d),a=I(d,"BUTTON",{type:!0,class:!0});var f=B(a);i=K(f,"Usar URL"),f.forEach(y),d.forEach(y),this.h()},h:function(){p(t,"type","url"),p(t,"placeholder","https://ejemplo.com/imagen.jpg"),p(t,"class","flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent"),t.disabled=r[1],w(t,k,201,10,6168),p(a,"type","button"),a.disabled=n=r[1]||!r[8].trim(),p(a,"class","px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 text-sm font-medium"),w(a,k,209,10,6565),p(e,"class","flex gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200"),w(e,k,200,8,6083)},m:function(m,d){V(m,e,d),b(e,t),Ce(t,r[8]),b(e,o),b(e,a),b(a,i),l||(s=[J(t,"input",r[17]),J(t,"keypress",r[18],!1,!1,!1,!1),J(a,"click",r[12],!1,!1,!1,!1)],l=!0)},p:function(m,d){d&2&&$(t,"disabled",m[1]),d&256&&t.value!==m[8]&&Ce(t,m[8]),d&258&&n!==(n=m[1]||!m[8].trim())&&$(a,"disabled",n)},d:function(m){m&&y(e),l=!1,qe(s)}};return C("SvelteRegisterBlock",{block:c,id:ge.name,type:"if",source:"(200:6) {#if showUrlInput}",ctx:r}),c}function pe(r){let e,t,o,a,i;t=new Ae({props:{class:"w-4 h-4"},$$inline:!0});const n={c:function(){e=E("button"),X(t.$$.fragment),this.h()},l:function(s){e=I(s,"BUTTON",{type:!0,class:!0,title:!0});var c=B(e);H(t.$$.fragment,c),c.forEach(y),this.h()},h:function(){p(e,"type","button"),p(e,"class","absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 shadow-lg transition-colors"),p(e,"title","Eliminar imagen"),w(e,k,146,8,3974)},m:function(s,c){V(s,e,c),Y(t,e,null),o=!0,a||(i=J(e,"click",r[11],!1,!1,!1,!1),a=!0)},p:Ke,i:function(s){o||(S(t.$$.fragment,s),o=!0)},o:function(s){L(t.$$.fragment,s),o=!1},d:function(s){s&&y(e),W(t),a=!1,i()}};return C("SvelteRegisterBlock",{block:n,id:pe.name,type:"if",source:"(146:6) {#if !disabled}",ctx:r}),n}function he(r){let e,t,o,a,i,n,l,s,c;o=new Pe({props:{class:"w-8 h-8 animate-spin mx-auto mb-2"},$$inline:!0});const u={c:function(){e=E("div"),t=E("div"),X(o.$$.fragment),a=O(),i=E("p"),n=Q("Subiendo... "),l=Q(r[5]),s=Q("%"),this.h()},l:function(d){e=I(d,"DIV",{class:!0});var f=B(e);t=I(f,"DIV",{class:!0});var _=B(t);H(o.$$.fragment,_),a=A(_),i=I(_,"P",{class:!0});var v=B(i);n=K(v,"Subiendo... "),l=K(v,r[5]),s=K(v,"%"),v.forEach(y),_.forEach(y),f.forEach(y),this.h()},h:function(){p(i,"class","text-sm"),w(i,k,160,12,4549),p(t,"class","text-center text-white"),w(t,k,158,10,4432),p(e,"class","absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center"),w(e,k,157,8,4323)},m:function(d,f){V(d,e,f),b(e,t),Y(o,t,null),b(t,a),b(t,i),b(i,n),b(i,l),b(i,s),c=!0},p:function(d,f){(!c||f&32)&&Ie(l,d[5])},i:function(d){c||(S(o.$$.fragment,d),c=!0)},o:function(d){L(o.$$.fragment,d),c=!1},d:function(d){d&&y(e),W(o)}};return C("SvelteRegisterBlock",{block:u,id:he.name,type:"if",source:"(157:6) {#if uploading}",ctx:r}),u}function _e(r){let e,t,o,a,i,n;const l={c:function(){e=E("div"),t=je("svg"),o=je("path"),a=O(),i=E("p"),n=Q(r[6]),this.h()},l:function(c){e=I(c,"DIV",{class:!0});var u=B(e);t=Re(u,"svg",{class:!0,fill:!0,viewBox:!0});var m=B(t);o=Re(m,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),B(o).forEach(y),m.forEach(y),a=A(u),i=I(u,"P",{class:!0});var d=B(i);n=K(d,r[6]),d.forEach(y),u.forEach(y),this.h()},h:function(){p(o,"fill-rule","evenodd"),p(o,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),p(o,"clip-rule","evenodd"),w(o,k,236,8,7457),p(t,"class","w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"),p(t,"fill","currentColor"),p(t,"viewBox","0 0 20 20"),w(t,k,235,6,7352),p(i,"class","text-sm text-red-700"),w(i,k,238,6,7746),p(e,"class","flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg"),w(e,k,234,4,7261)},m:function(c,u){V(c,e,u),b(e,t),b(t,o),b(e,a),b(e,i),b(i,n)},p:function(c,u){u&64&&Ie(n,c[6])},d:function(c){c&&y(e)}};return C("SvelteRegisterBlock",{block:l,id:_e.name,type:"if",source:"(234:2) {#if error}",ctx:r}),l}function be(r){let e,t,o,a,i,n,l,s,c,u,m="Recomendado: 800x600px o superior, formato JPG o PNG",d,f=r[2]&&me(r);const _=[Je,Fe],v=[];function N(D,h){return D[3]?0:1}n=N(r),l=v[n]=_[n](r);let U=r[6]&&_e(r);const M={c:function(){e=E("div"),t=E("label"),o=Q(r[0]),a=O(),f&&f.c(),i=O(),l.c(),s=O(),U&&U.c(),c=O(),u=E("p"),u.textContent=m,this.h()},l:function(h){e=I(h,"DIV",{class:!0});var R=B(e);t=I(R,"LABEL",{class:!0});var j=B(t);o=K(j,r[0]),a=A(j),f&&f.l(j),j.forEach(y),i=A(R),l.l(R),s=A(R),U&&U.l(R),c=A(R),u=I(R,"P",{class:!0,"data-svelte-h":!0}),ee(u)!=="svelte-1x5zc29"&&(u.textContent=m),R.forEach(y),this.h()},h:function(){p(t,"class","block text-sm font-medium text-gray-700"),w(t,k,125,2,3411),p(u,"class","text-xs text-gray-500"),w(u,k,243,2,7845),p(e,"class","space-y-3"),w(e,k,124,0,3384)},m:function(h,R){V(h,e,R),b(e,t),b(t,o),b(t,a),f&&f.m(t,null),b(e,i),v[n].m(e,null),b(e,s),U&&U.m(e,null),b(e,c),b(e,u),d=!0},p:function(h,[R]){(!d||R&1)&&Ie(o,h[0]),h[2]?f||(f=me(h),f.c(),f.m(t,null)):f&&(f.d(1),f=null);let j=n;n=N(h),n===j?v[n].p(h,R):(oe(),L(v[j],1,1,()=>{v[j]=null}),re(),l=v[n],l?l.p(h,R):(l=v[n]=_[n](h),l.c()),S(l,1),l.m(e,s)),h[6]?U?U.p(h,R):(U=_e(h),U.c(),U.m(e,c)):U&&(U.d(1),U=null)},i:function(h){d||(S(l),d=!0)},o:function(h){L(l),d=!1},d:function(h){h&&y(e),f&&f.d(),v[n].d(),U&&U.d()}};return C("SvelteRegisterBlock",{block:M,id:be.name,type:"component",source:"",ctx:r}),M}function nt(r,e,t){let{$$slots:o={},$$scope:a}=e;ae("ImageUploader",o,[]);const i=Se();let{imageUrl:n=""}=e,{label:l="Imagen"}=e,{disabled:s=!1}=e,{required:c=!1}=e,u=!1,m=0,d="",f=n,_=!1,v="",N;async function U(g){var ne;const z=(ne=g.target.files)==null?void 0:ne[0];if(z){if(!de(z)){t(6,d="Solo se permiten im치genes (JPG, PNG, GIF, WebP)");return}if(z.size>10*1024*1024){t(6,d="La imagen no puede superar los 10MB");return}t(6,d=""),t(4,u=!0),t(5,m=0);try{t(3,f=await Be(z));const F=await Le(z,Te,De,He=>{t(5,m=He)});t(3,f=F.url),t(14,n=F.url),i("upload",{url:F.url,publicId:F.publicId,width:F.width,height:F.height})}catch(F){console.error("Error uploading image:",F),t(6,d=F.message||"Error al subir la imagen"),t(3,f="")}finally{t(4,u=!1),t(5,m=0),N&&t(9,N.value="",N)}}}function M(){t(3,f=""),t(14,n=""),t(8,v=""),N&&t(9,N.value="",N),i("remove")}function D(){if(!v.trim()){t(6,d="Ingresa una URL v치lida");return}if(![".jpg",".jpeg",".png",".gif",".webp"].some(ne=>v.toLowerCase().includes(ne))&&!v.includes("cloudinary.com")){t(6,d="La URL debe ser de una imagen v치lida");return}t(6,d=""),t(3,f=v),t(14,n=v),t(7,_=!1),i("upload",{url:v})}function h(){N==null||N.click()}const R=["imageUrl","label","disabled","required"];Object.keys(e).forEach(g=>{!~R.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&tt.warn(`<ImageUploader> was created with unknown prop '${g}'`)});const j=()=>{t(6,d="Error al cargar la imagen"),t(3,f="")},P=()=>t(7,_=!_);function T(){v=this.value,t(8,v)}const G=g=>g.key==="Enter"&&D();function te(g){Xe[g?"unshift":"push"](()=>{N=g,t(9,N)})}return r.$$set=g=>{"imageUrl"in g&&t(14,n=g.imageUrl),"label"in g&&t(0,l=g.label),"disabled"in g&&t(1,s=g.disabled),"required"in g&&t(2,c=g.required)},r.$capture_state=()=>({createEventDispatcher:Se,Upload:ze,X:Ae,Loader2:Pe,ImageIcon:xe,Link2:Me,uploadImageToCloudinary:Le,generateImagePreview:Be,isValidImageFile:de,PUBLIC_CLOUDINARY_UPLOAD_PRESET:Te,PUBLIC_CLOUDINARY_CLOUD_NAME:De,dispatch:i,imageUrl:n,label:l,disabled:s,required:c,uploading:u,uploadProgress:m,error:d,preview:f,showUrlInput:_,manualUrl:v,fileInput:N,handleFileSelect:U,handleRemove:M,handleManualUrl:D,triggerFileInput:h}),r.$inject_state=g=>{"imageUrl"in g&&t(14,n=g.imageUrl),"label"in g&&t(0,l=g.label),"disabled"in g&&t(1,s=g.disabled),"required"in g&&t(2,c=g.required),"uploading"in g&&t(4,u=g.uploading),"uploadProgress"in g&&t(5,m=g.uploadProgress),"error"in g&&t(6,d=g.error),"preview"in g&&t(3,f=g.preview),"showUrlInput"in g&&t(7,_=g.showUrlInput),"manualUrl"in g&&t(8,v=g.manualUrl),"fileInput"in g&&t(9,N=g.fileInput)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),r.$$.update=()=>{r.$$.dirty&16392&&n&&n!==f&&t(3,f=n)},[l,s,c,f,u,m,d,_,v,N,U,M,D,h,n,j,P,T,G,te]}class ct extends le{constructor(e){super(e),ie(this,e,nt,be,se,{imageUrl:14,label:0,disabled:1,required:2}),C("SvelteRegisterComponent",{component:this,tagName:"ImageUploader",options:e,id:be.name})}get imageUrl(){throw new Error("<ImageUploader>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set imageUrl(e){throw new Error("<ImageUploader>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get label(){throw new Error("<ImageUploader>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set label(e){throw new Error("<ImageUploader>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get disabled(){throw new Error("<ImageUploader>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set disabled(e){throw new Error("<ImageUploader>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get required(){throw new Error("<ImageUploader>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set required(e){throw new Error("<ImageUploader>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{ct as I,ze as U};
