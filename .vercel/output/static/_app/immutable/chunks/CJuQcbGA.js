import{w as s}from"./BWp1LszE.js";const a={isAuthenticated:!1,user:null,loading:!1,error:null,initialized:!1};function l(){const{subscribe:n,set:i,update:o}=s(a);return{subscribe:n,login:async(r,t)=>{if(o(e=>({...e,loading:!0,error:null})),await new Promise(e=>setTimeout(e,500)),r==="admin"&&t==="admin123"){const e={id:1,username:"admin",name:"Administrador",email:"admin@catalogoexpress.com",role:"admin"};return localStorage.setItem("auth_user",JSON.stringify(e)),localStorage.setItem("auth_token","demo_token_"+Date.now()),i({isAuthenticated:!0,user:e,loading:!1,error:null,initialized:!0}),{success:!0,user:e}}else{const e="Usuario o contraseÃ±a incorrectos";return i({isAuthenticated:!1,user:null,loading:!1,error:e,initialized:!0}),{success:!1,error:e}}},logout:()=>{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),i({...a,initialized:!0})},init:()=>(o(r=>{if(r.initialized)return r;try{const t=localStorage.getItem("auth_user"),e=localStorage.getItem("auth_token");if(t&&e)return{isAuthenticated:!0,user:JSON.parse(t),loading:!1,error:null,initialized:!0}}catch(t){console.error("Error inicializando auth:",t)}return{...a,initialized:!0}}),!0)}}const m=l();export{m as a};
